{"meta":{"title":"é—®æ¸ å“ªå¾—æ¸…å¦‚è®¸ï¼Ÿ","subtitle":"just do it","description":"https://img.vim-cn.com/33/461edfd8f8283ad38990aa7a83131b4494eb2c.jpg","author":"Haiyang Song","url":"https://shyshy903.github.io","root":"/"},"pages":[{"title":"archives","date":"2020-01-01T13:19:24.000Z","updated":"2020-01-01T13:19:24.000Z","comments":true,"path":"archives/index.html","permalink":"https://shyshy903.github.io/archives/index.html","excerpt":"","text":""},{"title":"categories","date":"2020-01-01T13:14:12.000Z","updated":"2020-01-01T13:14:12.000Z","comments":true,"path":"categories/index.html","permalink":"https://shyshy903.github.io/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2020-01-01T13:14:30.000Z","updated":"2020-01-01T13:14:30.000Z","comments":true,"path":"tags/index.html","permalink":"https://shyshy903.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"å·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€ï¼ˆCNN)","slug":"Deep_learning/å·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€ï¼ˆCNN)","date":"2020-02-16T16:00:00.000Z","updated":"2020-02-16T16:00:00.000Z","comments":true,"path":"2020/02/17/Deep_learning/å·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€ï¼ˆCNN)/","link":"","permalink":"https://shyshy903.github.io/2020/02/17/Deep_learning/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%EF%BC%88CNN)/","excerpt":"","text":"å·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€äºŒç»´äº’ç›¸å…³è¿ç®—è™½ç„¶å·ç§¯å±‚å¾—åäºå·ç§¯ï¼ˆconvolutionï¼‰è¿ç®—ï¼Œä½†æˆ‘ä»¬é€šå¸¸åœ¨å·ç§¯å±‚ä¸­ä½¿ç”¨æ›´åŠ ç›´è§‚çš„äº’ç›¸å…³ï¼ˆcross-correlationï¼‰è¿ç®—ã€‚åœ¨äºŒç»´å·ç§¯å±‚ä¸­ï¼Œä¸€ä¸ªäºŒç»´è¾“å…¥æ•°ç»„å’Œä¸€ä¸ªäºŒç»´æ ¸ï¼ˆkernelï¼‰æ•°ç»„é€šè¿‡äº’ç›¸å…³è¿ç®—è¾“å‡ºä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªå…·ä½“ä¾‹å­æ¥è§£é‡ŠäºŒç»´äº’ç›¸å…³è¿ç®—çš„å«ä¹‰ã€‚å¦‚å›¾5.1æ‰€ç¤ºï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªé«˜å’Œå®½å‡ä¸º3çš„äºŒç»´æ•°ç»„ã€‚æˆ‘ä»¬å°†è¯¥æ•°ç»„çš„å½¢çŠ¶è®°ä¸º$3 \\times 3$æˆ–ï¼ˆ3ï¼Œ3ï¼‰ã€‚æ ¸æ•°ç»„çš„é«˜å’Œå®½åˆ†åˆ«ä¸º2ã€‚è¯¥æ•°ç»„åœ¨å·ç§¯è®¡ç®—ä¸­åˆç§°å·ç§¯æ ¸æˆ–è¿‡æ»¤å™¨ï¼ˆfilterï¼‰ã€‚å·ç§¯æ ¸çª—å£ï¼ˆåˆç§°å·ç§¯çª—å£ï¼‰çš„å½¢çŠ¶å–å†³äºå·ç§¯æ ¸çš„é«˜å’Œå®½ï¼Œå³$2 \\times 2$ã€‚å›¾5.1ä¸­çš„é˜´å½±éƒ¨åˆ†ä¸ºç¬¬ä¸€ä¸ªè¾“å‡ºå…ƒç´ åŠå…¶è®¡ç®—æ‰€ä½¿ç”¨çš„è¾“å…¥å’Œæ ¸æ•°ç»„å…ƒç´ ï¼š$0\\times0+1\\times1+3\\times2+4\\times3=19$ã€‚ å›¾5.1 äºŒç»´äº’ç›¸å…³è¿ç®— åœ¨äºŒç»´äº’ç›¸å…³è¿ç®—ä¸­ï¼Œå·ç§¯çª—å£ä»è¾“å…¥æ•°ç»„çš„æœ€å·¦ä¸Šæ–¹å¼€å§‹ï¼ŒæŒ‰ä»å·¦å¾€å³ã€ä»ä¸Šå¾€ä¸‹çš„é¡ºåºï¼Œä¾æ¬¡åœ¨è¾“å…¥æ•°ç»„ä¸Šæ»‘åŠ¨ã€‚å½“å·ç§¯çª—å£æ»‘åŠ¨åˆ°æŸä¸€ä½ç½®æ—¶ï¼Œçª—å£ä¸­çš„è¾“å…¥å­æ•°ç»„ä¸æ ¸æ•°ç»„æŒ‰å…ƒç´ ç›¸ä¹˜å¹¶æ±‚å’Œï¼Œå¾—åˆ°è¾“å‡ºæ•°ç»„ä¸­ç›¸åº”ä½ç½®çš„å…ƒç´ ã€‚å›¾5.1ä¸­çš„è¾“å‡ºæ•°ç»„é«˜å’Œå®½åˆ†åˆ«ä¸º2ï¼Œå…¶ä¸­çš„4ä¸ªå…ƒç´ ç”±äºŒç»´äº’ç›¸å…³è¿ç®—å¾—å‡ºï¼š 0\\times0+1\\times1+3\\times2+4\\times3=19,\\\\ 1\\times0+2\\times1+4\\times2+5\\times3=25,\\\\ 3\\times0+4\\times1+6\\times2+7\\times3=37,\\\\ 4\\times0+5\\times1+7\\times2+8\\times3=43.\\\\12345678910111213# äºŒç»´äº’ç›¸å…³è¿ç®—æ ¸å¿ƒç¤ºä¾‹import torch import torch.nn as nndef corr2d(X, K): H, W = X.shape h, w = K.shape Y = torch.zeros(H - h + 1, W - w + 1) for i in range(Y.shape[0]): for j in range(Y.shape[1]): Y[i, j] = (X[i: i + h, j: j + w] * K).sum() return Y äºŒç»´å·ç§¯å±‚äºŒç»´å·ç§¯å±‚å°†è¾“å…¥å’Œå·ç§¯æ ¸åšäº’ç›¸å…³è¿ç®—ï¼Œå¹¶åŠ ä¸Šä¸€ä¸ªæ ‡é‡åç½®æ¥å¾—åˆ°è¾“å‡ºã€‚å·ç§¯å±‚çš„æ¨¡å‹å‚æ•°åŒ…æ‹¬å·ç§¯æ ¸å’Œæ ‡é‡åç½®ã€‚ 12345678910# äºŒç»´å·ç§¯å±‚çš„pytorchç¤ºä¾‹class Conv2D(nn.Module): def __init__(self, kernel_size): super(Conv2D, self).__init__() self.weight = nn.Parameter(torch.randn(kernel_size)) self.bias = nn.Parameter(torch.randn(1)) def forward(self, x): return corr2d(x, self.weight) + self.bias äº’ç›¸å…³è¿ç®—ä¸å·ç§¯è¿ç®—å®é™…ä¸Šï¼Œå·ç§¯è¿ç®—ä¸äº’ç›¸å…³è¿ç®—ç±»ä¼¼ã€‚ä¸ºäº†å¾—åˆ°å·ç§¯è¿ç®—çš„è¾“å‡ºï¼Œæˆ‘ä»¬åªéœ€å°†æ ¸æ•°ç»„å·¦å³ç¿»è½¬å¹¶ä¸Šä¸‹ç¿»è½¬ï¼Œå†ä¸è¾“å…¥æ•°ç»„åšäº’ç›¸å…³è¿ç®—ã€‚å¯è§ï¼Œå·ç§¯è¿ç®—å’Œäº’ç›¸å…³è¿ç®—è™½ç„¶ç±»ä¼¼ï¼Œä½†å¦‚æœå®ƒä»¬ä½¿ç”¨ç›¸åŒçš„æ ¸æ•°ç»„ï¼Œå¯¹äºåŒä¸€ä¸ªè¾“å…¥ï¼Œè¾“å‡ºå¾€å¾€å¹¶ä¸ç›¸åŒã€‚ é‚£ä¹ˆï¼Œä½ ä¹Ÿè®¸ä¼šå¥½å¥‡å·ç§¯å±‚ä¸ºä½•èƒ½ä½¿ç”¨äº’ç›¸å…³è¿ç®—æ›¿ä»£å·ç§¯è¿ç®—ã€‚å…¶å®ï¼Œåœ¨æ·±åº¦å­¦ä¹ ä¸­æ ¸æ•°ç»„éƒ½æ˜¯å­¦å‡ºæ¥çš„ï¼šå·ç§¯å±‚æ— è®ºä½¿ç”¨äº’ç›¸å…³è¿ç®—æˆ–å·ç§¯è¿ç®—éƒ½ä¸å½±å“æ¨¡å‹é¢„æµ‹æ—¶çš„è¾“å‡ºã€‚ä¸ºäº†è§£é‡Šè¿™ä¸€ç‚¹ï¼Œå‡è®¾å·ç§¯å±‚ä½¿ç”¨äº’ç›¸å…³è¿ç®—å­¦å‡ºå›¾5.1ä¸­çš„æ ¸æ•°ç»„ã€‚è®¾å…¶ä»–æ¡ä»¶ä¸å˜ï¼Œä½¿ç”¨å·ç§¯è¿ç®—å­¦å‡ºçš„æ ¸æ•°ç»„å³å›¾5.1ä¸­çš„æ ¸æ•°ç»„æŒ‰ä¸Šä¸‹ã€å·¦å³ç¿»è½¬ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¾“å…¥ä¸å­¦å‡ºçš„å·²ç¿»è½¬çš„æ ¸æ•°ç»„å†åšå·ç§¯è¿ç®—æ—¶ï¼Œä¾ç„¶å¾—åˆ°å›¾5.1ä¸­çš„è¾“å‡ºã€‚ä¸ºäº†ä¸å¤§å¤šæ•°æ·±åº¦å­¦ä¹ æ–‡çŒ®ä¸€è‡´ï¼Œå¦‚æ— ç‰¹åˆ«è¯´æ˜ï¼Œæœ¬ä¹¦ä¸­æåˆ°çš„å·ç§¯è¿ç®—å‡æŒ‡äº’ç›¸å…³è¿ç®—ã€‚ ç‰¹å¾å›¾å’Œæ„Ÿå—é‡äºŒç»´å·ç§¯å±‚è¾“å‡ºçš„äºŒç»´æ•°ç»„å¯ä»¥çœ‹ä½œæ˜¯è¾“å…¥åœ¨ç©ºé—´ç»´åº¦ï¼ˆå®½å’Œé«˜ï¼‰ä¸ŠæŸä¸€çº§çš„è¡¨å¾ï¼Œä¹Ÿå«ç‰¹å¾å›¾ï¼ˆfeature mapï¼‰ã€‚å½±å“å…ƒç´ $x$çš„å‰å‘è®¡ç®—çš„æ‰€æœ‰å¯èƒ½è¾“å…¥åŒºåŸŸï¼ˆå¯èƒ½å¤§äºè¾“å…¥çš„å®é™…å°ºå¯¸ï¼‰å«åš$x$çš„æ„Ÿå—é‡ï¼ˆreceptive fieldï¼‰ã€‚ä»¥å›¾5.1ä¸ºä¾‹ï¼Œè¾“å…¥ä¸­é˜´å½±éƒ¨åˆ†çš„å››ä¸ªå…ƒç´ æ˜¯è¾“å‡ºä¸­é˜´å½±éƒ¨åˆ†å…ƒç´ çš„æ„Ÿå—é‡ã€‚æˆ‘ä»¬å°†å›¾5.1ä¸­å½¢çŠ¶ä¸º$2 \\times 2$çš„è¾“å‡ºè®°ä¸º$Y$ï¼Œå¹¶è€ƒè™‘ä¸€ä¸ªæ›´æ·±çš„å·ç§¯ç¥ç»ç½‘ç»œï¼šå°†$Y$ä¸å¦ä¸€ä¸ªå½¢çŠ¶ä¸º$2 \\times 2$çš„æ ¸æ•°ç»„åšäº’ç›¸å…³è¿ç®—ï¼Œè¾“å‡ºå•ä¸ªå…ƒç´ $z$ã€‚é‚£ä¹ˆï¼Œ$z$åœ¨$Y$ä¸Šçš„æ„Ÿå—é‡åŒ…æ‹¬$Y$çš„å…¨éƒ¨å››ä¸ªå…ƒç´ ï¼Œåœ¨è¾“å…¥ä¸Šçš„æ„Ÿå—é‡åŒ…æ‹¬å…¶ä¸­å…¨éƒ¨9ä¸ªå…ƒç´ ã€‚å¯è§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ·±çš„å·ç§¯ç¥ç»ç½‘ç»œä½¿ç‰¹å¾å›¾ä¸­å•ä¸ªå…ƒç´ çš„æ„Ÿå—é‡å˜å¾—æ›´åŠ å¹¿é˜”ï¼Œä»è€Œæ•æ‰è¾“å…¥ä¸Šæ›´å¤§å°ºå¯¸çš„ç‰¹å¾ã€‚ æˆ‘ä»¬å¸¸ä½¿ç”¨â€œå…ƒç´ â€ä¸€è¯æ¥æè¿°æ•°ç»„æˆ–çŸ©é˜µä¸­çš„æˆå‘˜ã€‚åœ¨ç¥ç»ç½‘ç»œçš„æœ¯è¯­ä¸­ï¼Œè¿™äº›å…ƒç´ ä¹Ÿå¯ç§°ä¸ºâ€œå•å…ƒâ€ã€‚å½“å«ä¹‰æ˜ç¡®æ—¶ï¼Œæœ¬ä¹¦ä¸å¯¹è¿™ä¸¤ä¸ªæœ¯è¯­åšä¸¥æ ¼åŒºåˆ†ã€‚ å¡«å……å’Œæ­¥å¹…æˆ‘ä»¬ä½¿ç”¨é«˜å’Œå®½ä¸º3çš„è¾“å…¥ä¸é«˜å’Œå®½ä¸º2çš„å·ç§¯æ ¸å¾—åˆ°é«˜å’Œå®½ä¸º2çš„è¾“å‡ºã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå‡è®¾è¾“å…¥å½¢çŠ¶æ˜¯$n_h\\times n_w$ï¼Œå·ç§¯æ ¸çª—å£å½¢çŠ¶æ˜¯$k_h\\times k_w$ï¼Œé‚£ä¹ˆè¾“å‡ºå½¢çŠ¶å°†ä¼šæ˜¯ (n_h-k_h+1) \\times (n_w-k_w+1).æ‰€ä»¥å·ç§¯å±‚çš„è¾“å‡ºå½¢çŠ¶ç”±è¾“å…¥å½¢çŠ¶å’Œå·ç§¯æ ¸çª—å£å½¢çŠ¶å†³å®šã€‚æœ¬èŠ‚æˆ‘ä»¬å°†ä»‹ç»å·ç§¯å±‚çš„ä¸¤ä¸ªè¶…å‚æ•°ï¼Œå³å¡«å……å’Œæ­¥å¹…ã€‚å®ƒä»¬å¯ä»¥å¯¹ç»™å®šå½¢çŠ¶çš„è¾“å…¥å’Œå·ç§¯æ ¸æ”¹å˜è¾“å‡ºå½¢çŠ¶ã€‚ å¡«å……å¡«å……ï¼ˆpaddingï¼‰æ˜¯æŒ‡åœ¨è¾“å…¥é«˜å’Œå®½çš„ä¸¤ä¾§å¡«å……å…ƒç´ ï¼ˆé€šå¸¸æ˜¯0å…ƒç´ ï¼‰ï¼Œå›¾2é‡Œæˆ‘ä»¬åœ¨åŸè¾“å…¥é«˜å’Œå®½çš„ä¸¤ä¾§åˆ†åˆ«æ·»åŠ äº†å€¼ä¸º0çš„å…ƒç´ ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœåœ¨é«˜çš„ä¸¤ä¾§ä¸€å…±å¡«å……$p_h$è¡Œï¼Œåœ¨å®½çš„ä¸¤ä¾§ä¸€å…±å¡«å……$p_w$åˆ—ï¼Œé‚£ä¹ˆè¾“å‡ºå½¢çŠ¶å°†ä¼šæ˜¯ (n_h-k_h+p_h+1)\\times(n_w-k_w+p_w+1),ä¹Ÿå°±æ˜¯è¯´ï¼Œè¾“å‡ºçš„é«˜å’Œå®½ä¼šåˆ†åˆ«å¢åŠ $p_h$å’Œ$p_w$ã€‚ åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šè®¾ç½®$p_h=k_h-1$å’Œ$p_w=k_w-1$æ¥ä½¿è¾“å…¥å’Œè¾“å‡ºå…·æœ‰ç›¸åŒçš„é«˜å’Œå®½ã€‚è¿™æ ·ä¼šæ–¹ä¾¿åœ¨æ„é€ ç½‘ç»œæ—¶æ¨æµ‹æ¯ä¸ªå±‚çš„è¾“å‡ºå½¢çŠ¶ã€‚å‡è®¾è¿™é‡Œ$k_h$æ˜¯å¥‡æ•°ï¼Œæˆ‘ä»¬ä¼šåœ¨é«˜çš„ä¸¤ä¾§åˆ†åˆ«å¡«å……$p_h/2$è¡Œã€‚å¦‚æœ$k_h$æ˜¯å¶æ•°ï¼Œä¸€ç§å¯èƒ½æ˜¯åœ¨è¾“å…¥çš„é¡¶ç«¯ä¸€ä¾§å¡«å……$\\lceil p_h/2\\rceil$è¡Œï¼Œè€Œåœ¨åº•ç«¯ä¸€ä¾§å¡«å……$\\lfloor p_h/2\\rfloor$è¡Œã€‚åœ¨å®½çš„ä¸¤ä¾§å¡«å……åŒç†ã€‚ å·ç§¯ç¥ç»ç½‘ç»œç»å¸¸ä½¿ç”¨å¥‡æ•°é«˜å®½çš„å·ç§¯æ ¸ï¼Œå¦‚1ã€3ã€5å’Œ7ï¼Œæ‰€ä»¥ä¸¤ç«¯ä¸Šçš„å¡«å……ä¸ªæ•°ç›¸ç­‰ã€‚å¯¹ä»»æ„çš„äºŒç»´æ•°ç»„Xï¼Œè®¾å®ƒçš„ç¬¬iè¡Œç¬¬jåˆ—çš„å…ƒç´ ä¸ºX[i,j]ã€‚å½“ä¸¤ç«¯ä¸Šçš„å¡«å……ä¸ªæ•°ç›¸ç­‰ï¼Œå¹¶ä½¿è¾“å…¥å’Œè¾“å‡ºå…·æœ‰ç›¸åŒçš„é«˜å’Œå®½æ—¶ï¼Œæˆ‘ä»¬å°±çŸ¥é“è¾“å‡ºY[i,j]æ˜¯ç”±è¾“å…¥ä»¥X[i,j]ä¸ºä¸­å¿ƒçš„çª—å£åŒå·ç§¯æ ¸è¿›è¡Œäº’ç›¸å…³è®¡ç®—å¾—åˆ°çš„ã€‚ æ­¥å¹…å·ç§¯çª—å£ä»è¾“å…¥æ•°ç»„çš„æœ€å·¦ä¸Šæ–¹å¼€å§‹ï¼ŒæŒ‰ä»å·¦å¾€å³ã€ä»ä¸Šå¾€ä¸‹çš„é¡ºåºï¼Œä¾æ¬¡åœ¨è¾“å…¥æ•°ç»„ä¸Šæ»‘åŠ¨ã€‚æˆ‘ä»¬å°†æ¯æ¬¡æ»‘åŠ¨çš„è¡Œæ•°å’Œåˆ—æ•°ç§°ä¸ºæ­¥å¹…ï¼ˆstrideï¼‰ã€‚ ç›®å‰æˆ‘ä»¬çœ‹åˆ°çš„ä¾‹å­é‡Œï¼Œåœ¨é«˜å’Œå®½ä¸¤ä¸ªæ–¹å‘ä¸Šæ­¥å¹…å‡ä¸º1ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ›´å¤§æ­¥å¹…ã€‚å›¾5.3å±•ç¤ºäº†åœ¨é«˜ä¸Šæ­¥å¹…ä¸º3ã€åœ¨å®½ä¸Šæ­¥å¹…ä¸º2çš„äºŒç»´äº’ç›¸å…³è¿ç®—ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¾“å‡ºç¬¬ä¸€åˆ—ç¬¬äºŒä¸ªå…ƒç´ æ—¶ï¼Œå·ç§¯çª—å£å‘ä¸‹æ»‘åŠ¨äº†3è¡Œï¼Œè€Œåœ¨è¾“å‡ºç¬¬ä¸€è¡Œç¬¬äºŒä¸ªå…ƒç´ æ—¶å·ç§¯çª—å£å‘å³æ»‘åŠ¨äº†2åˆ—ã€‚å½“å·ç§¯çª—å£åœ¨è¾“å…¥ä¸Šå†å‘å³æ»‘åŠ¨2åˆ—æ—¶ï¼Œç”±äºè¾“å…¥å…ƒç´ æ— æ³•å¡«æ»¡çª—å£ï¼Œæ— ç»“æœè¾“å‡ºã€‚å›¾5.3ä¸­çš„é˜´å½±éƒ¨åˆ†ä¸ºè¾“å‡ºå…ƒç´ åŠå…¶è®¡ç®—æ‰€ä½¿ç”¨çš„è¾“å…¥å’Œæ ¸æ•°ç»„å…ƒç´ ï¼š$0\\times0+0\\times1+1\\times2+2\\times3=8$ã€$0\\times0+6\\times1+0\\times2+0\\times3=6$ã€‚ é«˜å’Œå®½ä¸Šæ­¥å¹…åˆ†åˆ«ä¸º3å’Œ2çš„äºŒç»´äº’ç›¸å…³è¿ç®— ä¸€èˆ¬æ¥è¯´ï¼Œå½“é«˜ä¸Šæ­¥å¹…ä¸º$s_h$ï¼Œå®½ä¸Šæ­¥å¹…ä¸º$s_w$æ—¶ï¼Œè¾“å‡ºå½¢çŠ¶ä¸º \\lfloor(n_h-k_h+p_h+s_h)/s_h\\rfloor \\times \\lfloor(n_w-k_w+p_w+s_w)/s_w\\rfloor.å¦‚æœè®¾ç½®$p_h=k_h-1$å’Œ$p_w=k_w-1$ï¼Œé‚£ä¹ˆè¾“å‡ºå½¢çŠ¶å°†ç®€åŒ–ä¸º$\\lfloor(n_h+s_h-1)/s_h\\rfloor \\times \\lfloor(n_w+s_w-1)/s_w\\rfloor$ã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¦‚æœè¾“å…¥çš„é«˜å’Œå®½èƒ½åˆ†åˆ«è¢«é«˜å’Œå®½ä¸Šçš„æ­¥å¹…æ•´é™¤ï¼Œé‚£ä¹ˆè¾“å‡ºå½¢çŠ¶å°†æ˜¯$(n_h/s_h) \\times (n_w/s_w)$ã€‚ å¤šè¾“å…¥é€šé“å’Œå¤šè¾“å‡ºé€šé“è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯äºŒç»´æ•°ç»„ï¼Œä½†çœŸå®æ•°æ®çš„ç»´åº¦ç»å¸¸æ›´é«˜ã€‚ä¾‹å¦‚ï¼Œå½©è‰²å›¾åƒåœ¨é«˜å’Œå®½2ä¸ªç»´åº¦å¤–è¿˜æœ‰RGBï¼ˆçº¢ã€ç»¿ã€è“ï¼‰3ä¸ªé¢œè‰²é€šé“ã€‚å‡è®¾å½©è‰²å›¾åƒçš„é«˜å’Œå®½åˆ†åˆ«æ˜¯$h$å’Œ$w$ï¼ˆåƒç´ ï¼‰ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ª$3\\times h\\times w$çš„å¤šç»´æ•°ç»„ã€‚æˆ‘ä»¬å°†å¤§å°ä¸º3çš„è¿™ä¸€ç»´ç§°ä¸ºé€šé“ï¼ˆchannelï¼‰ç»´ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†ä»‹ç»å«å¤šä¸ªè¾“å…¥é€šé“æˆ–å¤šä¸ªè¾“å‡ºé€šé“çš„å·ç§¯æ ¸ã€‚ å¤šè¾“å…¥é€šé“å½“è¾“å…¥æ•°æ®å«å¤šä¸ªé€šé“æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ„é€ ä¸€ä¸ªè¾“å…¥é€šé“æ•°ä¸è¾“å…¥æ•°æ®çš„é€šé“æ•°ç›¸åŒçš„å·ç§¯æ ¸ï¼Œä»è€Œèƒ½å¤Ÿä¸å«å¤šé€šé“çš„è¾“å…¥æ•°æ®åšäº’ç›¸å…³è¿ç®—ã€‚å‡è®¾è¾“å…¥æ•°æ®çš„é€šé“æ•°ä¸º$c_i$ï¼Œé‚£ä¹ˆå·ç§¯æ ¸çš„è¾“å…¥é€šé“æ•°åŒæ ·ä¸º$c_i$ã€‚è®¾å·ç§¯æ ¸çª—å£å½¢çŠ¶ä¸º$k_h\\times k_w$ã€‚å½“$c_i=1$æ—¶ï¼Œæˆ‘ä»¬çŸ¥é“å·ç§¯æ ¸åªåŒ…å«ä¸€ä¸ªå½¢çŠ¶ä¸º$k_h\\times k_w$çš„äºŒç»´æ•°ç»„ã€‚å½“$c_i &gt; 1$æ—¶ï¼Œæˆ‘ä»¬å°†ä¼šä¸ºæ¯ä¸ªè¾“å…¥é€šé“å„åˆ†é…ä¸€ä¸ªå½¢çŠ¶ä¸º$k_h\\times k_w$çš„æ ¸æ•°ç»„ã€‚æŠŠè¿™$c_i$ä¸ªæ•°ç»„åœ¨è¾“å…¥é€šé“ç»´ä¸Šè¿ç»“ï¼Œå³å¾—åˆ°ä¸€ä¸ªå½¢çŠ¶ä¸º$c_i\\times k_h\\times k_w$çš„å·ç§¯æ ¸ã€‚ç”±äºè¾“å…¥å’Œå·ç§¯æ ¸å„æœ‰$c_i$ä¸ªé€šé“ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å„ä¸ªé€šé“ä¸Šå¯¹è¾“å…¥çš„äºŒç»´æ•°ç»„å’Œå·ç§¯æ ¸çš„äºŒç»´æ ¸æ•°ç»„åšäº’ç›¸å…³è¿ç®—ï¼Œå†å°†è¿™$c_i$ä¸ªäº’ç›¸å…³è¿ç®—çš„äºŒç»´è¾“å‡ºæŒ‰é€šé“ç›¸åŠ ï¼Œå¾—åˆ°ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚è¿™å°±æ˜¯å«å¤šä¸ªé€šé“çš„è¾“å…¥æ•°æ®ä¸å¤šè¾“å…¥é€šé“çš„å·ç§¯æ ¸åšäºŒç»´äº’ç›¸å…³è¿ç®—çš„è¾“å‡ºã€‚ å›¾5.4å±•ç¤ºäº†å«2ä¸ªè¾“å…¥é€šé“çš„äºŒç»´äº’ç›¸å…³è®¡ç®—çš„ä¾‹å­ã€‚åœ¨æ¯ä¸ªé€šé“ä¸Šï¼ŒäºŒç»´è¾“å…¥æ•°ç»„ä¸äºŒç»´æ ¸æ•°ç»„åšäº’ç›¸å…³è¿ç®—ï¼Œå†æŒ‰é€šé“ç›¸åŠ å³å¾—åˆ°è¾“å‡ºã€‚å›¾5.4ä¸­é˜´å½±éƒ¨åˆ†ä¸ºç¬¬ä¸€ä¸ªè¾“å‡ºå…ƒç´ åŠå…¶è®¡ç®—æ‰€ä½¿ç”¨çš„è¾“å…¥å’Œæ ¸æ•°ç»„å…ƒç´ ï¼š$(1\\times1+2\\times2+4\\times3+5\\times4)+(0\\times0+1\\times1+3\\times2+4\\times3)=56$ã€‚ å›¾5.4 å«2ä¸ªè¾“å…¥é€šé“çš„äº’ç›¸å…³è®¡ç®— å¤šè¾“å‡ºé€šé“å½“è¾“å…¥é€šé“æœ‰å¤šä¸ªæ—¶ï¼Œå› ä¸ºæˆ‘ä»¬å¯¹å„ä¸ªé€šé“çš„ç»“æœåšäº†ç´¯åŠ ï¼Œæ‰€ä»¥ä¸è®ºè¾“å…¥é€šé“æ•°æ˜¯å¤šå°‘ï¼Œè¾“å‡ºé€šé“æ•°æ€»æ˜¯ä¸º1ã€‚è®¾å·ç§¯æ ¸è¾“å…¥é€šé“æ•°å’Œè¾“å‡ºé€šé“æ•°åˆ†åˆ«ä¸º$c_i$å’Œ$c_o$ï¼Œé«˜å’Œå®½åˆ†åˆ«ä¸º$k_h$å’Œ$k_w$ã€‚å¦‚æœå¸Œæœ›å¾—åˆ°å«å¤šä¸ªé€šé“çš„è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªè¾“å‡ºé€šé“åˆ†åˆ«åˆ›å»ºå½¢çŠ¶ä¸º$c_i\\times k_h\\times k_w$çš„æ ¸æ•°ç»„ã€‚å°†å®ƒä»¬åœ¨è¾“å‡ºé€šé“ç»´ä¸Šè¿ç»“ï¼Œå·ç§¯æ ¸çš„å½¢çŠ¶å³$c_o\\times c_i\\times k_h\\times k_w$ã€‚åœ¨åšäº’ç›¸å…³è¿ç®—æ—¶ï¼Œæ¯ä¸ªè¾“å‡ºé€šé“ä¸Šçš„ç»“æœç”±å·ç§¯æ ¸åœ¨è¯¥è¾“å‡ºé€šé“ä¸Šçš„æ ¸æ•°ç»„ä¸æ•´ä¸ªè¾“å…¥æ•°ç»„è®¡ç®—è€Œæ¥ã€‚ 1x1å·ç§¯å±‚å·ç§¯çª—å£å½¢çŠ¶ä¸º$1\\times 1$ï¼ˆ$k_h=k_w=1$ï¼‰çš„å¤šé€šé“å·ç§¯å±‚ã€‚æˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸º$1\\times 1$å·ç§¯å±‚ï¼Œå¹¶å°†å…¶ä¸­çš„å·ç§¯è¿ç®—ç§°ä¸º$1\\times 1$å·ç§¯ã€‚å› ä¸ºä½¿ç”¨äº†æœ€å°çª—å£ï¼Œ$1\\times 1$å·ç§¯å¤±å»äº†å·ç§¯å±‚å¯ä»¥è¯†åˆ«é«˜å’Œå®½ç»´åº¦ä¸Šç›¸é‚»å…ƒç´ æ„æˆçš„æ¨¡å¼çš„åŠŸèƒ½ã€‚å®é™…ä¸Šï¼Œ$1\\times 1$å·ç§¯çš„ä¸»è¦è®¡ç®—å‘ç”Ÿåœ¨é€šé“ç»´ä¸Šã€‚å›¾5.5å±•ç¤ºäº†ä½¿ç”¨è¾“å…¥é€šé“æ•°ä¸º3ã€è¾“å‡ºé€šé“æ•°ä¸º2çš„$1\\times 1$å·ç§¯æ ¸çš„äº’ç›¸å…³è®¡ç®—ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¾“å…¥å’Œè¾“å‡ºå…·æœ‰ç›¸åŒçš„é«˜å’Œå®½ã€‚è¾“å‡ºä¸­çš„æ¯ä¸ªå…ƒç´ æ¥è‡ªè¾“å…¥ä¸­åœ¨é«˜å’Œå®½ä¸Šç›¸åŒä½ç½®çš„å…ƒç´ åœ¨ä¸åŒé€šé“ä¹‹é—´çš„æŒ‰æƒé‡ç´¯åŠ ã€‚å‡è®¾æˆ‘ä»¬å°†é€šé“ç»´å½“ä½œç‰¹å¾ç»´ï¼Œå°†é«˜å’Œå®½ç»´åº¦ä¸Šçš„å…ƒç´ å½“æˆæ•°æ®æ ·æœ¬ï¼Œé‚£ä¹ˆ$1\\times 1$å·ç§¯å±‚çš„ä½œç”¨ä¸å…¨è¿æ¥å±‚ç­‰ä»·ã€‚ 1x1å·ç§¯æ ¸çš„äº’ç›¸å…³è®¡ç®—ã€‚è¾“å…¥å’Œè¾“å‡ºå…·æœ‰ç›¸åŒçš„é«˜å’Œå®½ å·ç§¯å±‚ä¸å…¨è¿æ¥å±‚çš„æ¯”è¾ƒäºŒç»´å·ç§¯å±‚ç»å¸¸ç”¨äºå¤„ç†å›¾åƒï¼Œä¸æ­¤å‰çš„å…¨è¿æ¥å±‚ç›¸æ¯”ï¼Œå®ƒä¸»è¦æœ‰ä¸¤ä¸ªä¼˜åŠ¿ï¼š ä¸€æ˜¯å…¨è¿æ¥å±‚æŠŠå›¾åƒå±•å¹³æˆä¸€ä¸ªå‘é‡ï¼Œåœ¨è¾“å…¥å›¾åƒä¸Šç›¸é‚»çš„å…ƒç´ å¯èƒ½å› ä¸ºå±•å¹³æ“ä½œä¸å†ç›¸é‚»ï¼Œç½‘ç»œéš¾ä»¥æ•æ‰å±€éƒ¨ä¿¡æ¯ã€‚è€Œå·ç§¯å±‚çš„è®¾è®¡ï¼Œå¤©ç„¶åœ°å…·æœ‰æå–å±€éƒ¨ä¿¡æ¯çš„èƒ½åŠ›ã€‚ äºŒæ˜¯å·ç§¯å±‚çš„å‚æ•°é‡æ›´å°‘ã€‚ä½¿ç”¨å·ç§¯å±‚å¯ä»¥ä»¥è¾ƒå°‘çš„å‚æ•°æ•°é‡æ¥å¤„ç†æ›´å¤§çš„å›¾åƒã€‚ å·ç§¯å±‚çš„pytorchå®ç° in_channels (python:int) â€“ Number of channels in the input imag out_channels (python:int) â€“ Number of channels produced by the convolution kernel_size (python:int or tuple) â€“ Size of the convolving kernel stride (python:int or tuple, optional) â€“ Stride of the convolution. Default: 1 padding (python:int or tuple, optional) â€“ Zero-padding added to both sides of the input. Default: 0 bias (bool, optional) â€“ If True, adds a learnable bias to the output. Default: True 12345678X = torch.rand(4, 2, 3, 5)print(X.shape)conv2d = nn.Conv2d(in_channels=2, out_channels=3, kernel_size=(3, 5), stride=1, padding=(1, 2))Y = conv2d(X)print('Y.shape: ', Y.shape)print('weight.shape: ', conv2d.weight.shape)print('bias.shape: ', conv2d.bias.shape) æ± åŒ–å±‚äºŒç»´æ± åŒ–å±‚ äºŒç»´æœ€å¤§æ± åŒ–å±‚åŒå·ç§¯å±‚ä¸€æ ·ï¼Œæ± åŒ–å±‚æ¯æ¬¡å¯¹è¾“å…¥æ•°æ®çš„ä¸€ä¸ªå›ºå®šå½¢çŠ¶çª—å£ï¼ˆåˆç§°æ± åŒ–çª—å£ï¼‰ä¸­çš„å…ƒç´ è®¡ç®—è¾“å‡ºã€‚ä¸åŒäºå·ç§¯å±‚é‡Œè®¡ç®—è¾“å…¥å’Œæ ¸çš„äº’ç›¸å…³æ€§ï¼Œæ± åŒ–å±‚ç›´æ¥è®¡ç®—æ± åŒ–çª—å£å†…å…ƒç´ çš„æœ€å¤§å€¼æˆ–è€…å¹³å‡å€¼ã€‚è¯¥è¿ç®—ä¹Ÿåˆ†åˆ«å«åšæœ€å¤§æ± åŒ–æˆ–å¹³å‡æ± åŒ–ã€‚åœ¨äºŒç»´æœ€å¤§æ± åŒ–ä¸­ï¼Œæ± åŒ–çª—å£ä»è¾“å…¥æ•°ç»„çš„æœ€å·¦ä¸Šæ–¹å¼€å§‹ï¼ŒæŒ‰ä»å·¦å¾€å³ã€ä»ä¸Šå¾€ä¸‹çš„é¡ºåºï¼Œä¾æ¬¡åœ¨è¾“å…¥æ•°ç»„ä¸Šæ»‘åŠ¨ã€‚å½“æ± åŒ–çª—å£æ»‘åŠ¨åˆ°æŸä¸€ä½ç½®æ—¶ï¼Œçª—å£ä¸­çš„è¾“å…¥å­æ•°ç»„çš„æœ€å¤§å€¼å³è¾“å‡ºæ•°ç»„ä¸­ç›¸åº”ä½ç½®çš„å…ƒç´ ã€‚ å›¾5.6 æ± åŒ–çª—å£å½¢çŠ¶ä¸º 2 x 2 çš„æœ€å¤§æ± åŒ–æ± åŒ–çª—å£å½¢çŠ¶ä¸º$2\\times 2$çš„æœ€å¤§æ± åŒ–ï¼Œé˜´å½±éƒ¨åˆ†ä¸ºç¬¬ä¸€ä¸ªè¾“å‡ºå…ƒç´ åŠå…¶è®¡ç®—æ‰€ä½¿ç”¨çš„è¾“å…¥å…ƒç´ ã€‚è¾“å‡ºæ•°ç»„çš„é«˜å’Œå®½åˆ†åˆ«ä¸º2ï¼Œå…¶ä¸­çš„4ä¸ªå…ƒç´ ç”±å–æœ€å¤§å€¼è¿ç®—$\\text{max}$å¾—å‡ºï¼š \\max(0,1,3,4)=4,\\\\ \\max(1,2,4,5)=5,\\\\ \\max(3,4,6,7)=7,\\\\ \\max(4,5,7,8)=8.\\\\ äºŒç»´å¹³å‡æ± åŒ–å±‚ äºŒç»´å¹³å‡æ± åŒ–çš„å·¥ä½œåŸç†ä¸äºŒç»´æœ€å¤§æ± åŒ–ç±»ä¼¼ï¼Œä½†å°†æœ€å¤§è¿ç®—ç¬¦æ›¿æ¢æˆå¹³å‡è¿ç®—ç¬¦ã€‚æ± åŒ–çª—å£å½¢çŠ¶ä¸º$p \\times q$çš„æ± åŒ–å±‚ç§°ä¸º$p \\times q$æ± åŒ–å±‚ï¼Œå…¶ä¸­çš„æ± åŒ–è¿ç®—å«ä½œ$p \\times q$æ± åŒ–ã€‚ è®©æˆ‘ä»¬å†æ¬¡å›åˆ°æœ¬èŠ‚å¼€å§‹æåˆ°çš„ç‰©ä½“è¾¹ç¼˜æ£€æµ‹çš„ä¾‹å­ã€‚ç°åœ¨æˆ‘ä»¬å°†å·ç§¯å±‚çš„è¾“å‡ºä½œä¸º$2\\times 2$æœ€å¤§æ± åŒ–çš„è¾“å…¥ã€‚è®¾è¯¥å·ç§¯å±‚è¾“å…¥æ˜¯Xã€æ± åŒ–å±‚è¾“å‡ºä¸ºYã€‚æ— è®ºæ˜¯X[i, j]å’ŒX[i, j+1]å€¼ä¸åŒï¼Œè¿˜æ˜¯X[i, j+1]å’ŒX[i, j+2]ä¸åŒï¼Œæ± åŒ–å±‚è¾“å‡ºå‡æœ‰Y[i, j]=1ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨$2\\times 2$æœ€å¤§æ± åŒ–å±‚æ—¶ï¼Œåªè¦å·ç§¯å±‚è¯†åˆ«çš„æ¨¡å¼åœ¨é«˜å’Œå®½ä¸Šç§»åŠ¨ä¸è¶…è¿‡ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥å°†å®ƒæ£€æµ‹å‡ºæ¥ã€‚ æ± åŒ–å±‚çš„pytorchå®ç°12345678X = torch.arange(32, dtype=torch.float32).view(1, 2, 4, 4)# å¹³å‡æ± åŒ–å±‚ä½¿ç”¨çš„æ˜¯nn.AvgPool2dï¼Œä½¿ç”¨æ–¹æ³•ä¸nn.MaxPool2dç›¸åŒã€‚pool2d = nn.MaxPool2d(kernel_size=3, padding=1, stride=(2, 1))Y = pool2d(X)print(X)print(Y)","categories":[{"name":"deep_learning","slug":"deep-learning","permalink":"https://shyshy903.github.io/categories/deep-learning/"}],"tags":[{"name":"DL","slug":"DL","permalink":"https://shyshy903.github.io/tags/DL/"}]},{"title":"æ³¨æ„åŠ›æœºåˆ¶ï¼ˆAttention)","slug":"Deep_learning/æ³¨æ„åŠ›æœºåˆ¶","date":"2020-02-15T16:00:00.000Z","updated":"2020-02-15T16:00:00.000Z","comments":true,"path":"2020/02/16/Deep_learning/æ³¨æ„åŠ›æœºåˆ¶/","link":"","permalink":"https://shyshy903.github.io/2020/02/16/Deep_learning/%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/","excerpt":"","text":"æ³¨æ„åŠ›æœºåˆ¶åœ¨â€œç¼–ç å™¨â€”è§£ç å™¨ï¼ˆseq2seqï¼‰â€â¼€èŠ‚â¾¥ï¼Œè§£ç å™¨åœ¨å„ä¸ªæ—¶é—´æ­¥ä¾èµ–ç›¸åŒçš„èƒŒæ™¯å˜é‡ï¼ˆcontext vectorï¼‰æ¥è·å–è¾“â¼Šåºåˆ—ä¿¡æ¯ã€‚å½“ç¼–ç å™¨ä¸ºå¾ªç¯ç¥ç»â½¹ç»œæ—¶ï¼ŒèƒŒæ™¯å˜é‡æ¥â¾ƒå®ƒæœ€ç»ˆæ—¶é—´æ­¥çš„éšè—çŠ¶æ€ã€‚å°†æºåºåˆ—è¾“å…¥ä¿¡æ¯ä»¥å¾ªç¯å•ä½çŠ¶æ€ç¼–ç ï¼Œç„¶åå°†å…¶ä¼ é€’ç»™è§£ç å™¨ä»¥ç”Ÿæˆç›®æ ‡åºåˆ—ã€‚ç„¶è€Œè¿™ç§ç»“æ„å­˜åœ¨ç€é—®é¢˜ï¼Œå°¤å…¶æ˜¯RNNæœºåˆ¶å®é™…ä¸­å­˜åœ¨é•¿ç¨‹æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜ï¼Œå¯¹äºè¾ƒé•¿çš„å¥å­ï¼Œæˆ‘ä»¬å¾ˆéš¾å¯„å¸Œæœ›äºå°†è¾“å…¥çš„åºåˆ—è½¬åŒ–ä¸ºå®šé•¿çš„å‘é‡è€Œä¿å­˜æ‰€æœ‰çš„æœ‰æ•ˆä¿¡æ¯ï¼Œæ‰€ä»¥éšç€æ‰€éœ€ç¿»è¯‘å¥å­çš„é•¿åº¦çš„å¢åŠ ï¼Œè¿™ç§ç»“æ„çš„æ•ˆæœä¼šæ˜¾è‘—ä¸‹é™ã€‚ ä¸æ­¤åŒæ—¶ï¼Œè§£ç çš„ç›®æ ‡è¯è¯­å¯èƒ½åªä¸åŸè¾“å…¥çš„éƒ¨åˆ†è¯è¯­æœ‰å…³ï¼Œè€Œå¹¶ä¸æ˜¯ä¸æ‰€æœ‰çš„è¾“å…¥æœ‰å…³ã€‚ä¾‹å¦‚ï¼Œå½“æŠŠâ€œHello worldâ€ç¿»è¯‘æˆâ€œBonjour le mondeâ€æ—¶ï¼Œâ€œHelloâ€æ˜ å°„æˆâ€œBonjourâ€ï¼Œâ€œworldâ€æ˜ å°„æˆâ€œmondeâ€ã€‚åœ¨seq2seqæ¨¡å‹ä¸­ï¼Œè§£ç å™¨åªèƒ½éšå¼åœ°ä»ç¼–ç å™¨çš„æœ€ç»ˆçŠ¶æ€ä¸­é€‰æ‹©ç›¸åº”çš„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œæ³¨æ„åŠ›æœºåˆ¶å¯ä»¥å°†è¿™ç§é€‰æ‹©è¿‡ç¨‹æ˜¾å¼åœ°å»ºæ¨¡ã€‚ æ³¨æ„åŠ›æœºåˆ¶æ¡†æ¶Attention æ˜¯ä¸€ç§é€šç”¨çš„å¸¦æƒæ± åŒ–æ–¹æ³•ï¼Œè¾“å…¥ç”±ä¸¤éƒ¨åˆ†æ„æˆï¼šè¯¢é—®ï¼ˆqueryï¼‰å’Œé”®å€¼å¯¹ï¼ˆkey-value pairsï¼‰ã€‚ Query , attention layerå¾—åˆ°è¾“å‡ºä¸valueçš„ç»´åº¦ä¸€è‡´ . å¯¹äºä¸€ä¸ªqueryæ¥è¯´ï¼Œattention layer ä¼šä¸æ¯ä¸€ä¸ªkeyè®¡ç®—æ³¨æ„åŠ›åˆ†æ•°å¹¶è¿›è¡Œæƒé‡çš„å½’ä¸€åŒ–ï¼Œè¾“å‡ºçš„å‘é‡åˆ™æ˜¯valueçš„åŠ æƒæ±‚å’Œï¼Œè€Œæ¯ä¸ªkeyè®¡ç®—çš„æƒé‡ä¸valueä¸€ä¸€å¯¹åº”ã€‚ ä¸ºäº†è®¡ç®—è¾“å‡ºï¼Œæˆ‘ä»¬é¦–å…ˆå‡è®¾æœ‰ä¸€ä¸ªå‡½æ•° ç”¨äºè®¡ç®—queryå’Œkeyçš„ç›¸ä¼¼æ€§ï¼Œç„¶åå¯ä»¥è®¡ç®—æ‰€æœ‰çš„ attention scores ${a_1, \\ldots, a_n }$by a_i = \\alpha(\\mathbf q, \\mathbf k_i)æˆ‘ä»¬ä½¿ç”¨ softmaxå‡½æ•° è·å¾—æ³¨æ„åŠ›æƒé‡ï¼š b_1, \\ldots, b_n = \\textrm{softmax}(a_1, \\ldots, a_n)æœ€ç»ˆçš„è¾“å‡ºå°±æ˜¯valueçš„åŠ æƒæ±‚å’Œï¼š \\mathbf o = \\sum_{i=1}^n b_i \\mathbf v_i ä¸åŒçš„attetion layerçš„åŒºåˆ«åœ¨äºscoreå‡½æ•°çš„é€‰æ‹©ï¼Œåœ¨æœ¬èŠ‚çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸¤ä¸ªå¸¸ç”¨çš„æ³¨æ„å±‚ Dot-product Attention å’Œ Multilayer Perceptron Attentionï¼›éšåæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªå¼•å…¥attentionçš„seq2seqæ¨¡å‹å¹¶åœ¨è‹±æ³•ç¿»è¯‘è¯­æ–™ä¸Šè¿›è¡Œè®­ç»ƒä¸æµ‹è¯•ã€‚ softmaxçš„å±è”½123456789101112131415161718192021222324252627def SequenceMask(X, X_len,value=-1e6): maxlen = X.size(1) #print(X.size(),torch.arange((maxlen),dtype=torch.float)[None, :],'\\n',X_len[:, None] ) mask = torch.arange((maxlen),dtype=torch.float)[None, :] &gt;= X_len[:, None] #print(mask) X[mask]=value return Xdef masked_softmax(X, valid_length): # X: 3-D tensor, valid_length: 1-D or 2-D tensor softmax = nn.Softmax(dim=-1) if valid_length is None: return softmax(X) else: shape = X.shape if valid_length.dim() == 1: try: valid_length = torch.FloatTensor(valid_length.numpy().repeat(shape[1], axis=0))#[2,2,3,3] except: valid_length = torch.FloatTensor(valid_length.cpu().numpy().repeat(shape[1], axis=0))#[2,2,3,3] else: valid_length = valid_length.reshape((-1,)) # fill masked elements with a large negative, whose exp is 0 X = SequenceMask(X.reshape((-1, shape[-1])), valid_length) return softmax(X).reshape(shape)masked_softmax(torch.rand((2,2,4),dtype=torch.float), torch.FloatTensor([2,3])) è¶…å‡ºäºŒç»´çŸ©é˜µçš„ä¹˜æ³• Xå’Œ Yæ˜¯ç»´åº¦åˆ†åˆ«ä¸º(b,n,m)å’Œ(b, m, k)çš„å¼ é‡ï¼Œè¿›è¡Œ bæ¬¡äºŒç»´çŸ©é˜µä¹˜æ³•åå¾—åˆ° , ç»´åº¦ä¸º (b, n, k)ã€‚ Z[i,:,:] = dot(X[i,:,:], Y[i,:,:])\\qquad for\\ i= 1,â€¦,n\\1torch.bmm(torch.ones((2,1,3), dtype = torch.float), torch.ones((2,3,2), dtype = torch.float)) ç‚¹ç§¯æ³¨æ„åŠ›The dot product å‡è®¾queryå’Œkeysæœ‰ç›¸åŒçš„ç»´åº¦, å³ . é€šè¿‡è®¡ç®—queryå’Œkeyè½¬ç½®çš„ä¹˜ç§¯æ¥è®¡ç®—attention score,é€šå¸¸è¿˜ä¼šé™¤å»sqrt{d}å‡å°‘è®¡ç®—å‡ºæ¥çš„scoreå¯¹ç»´åº¦ğ‘‘çš„ä¾èµ–æ€§ï¼Œå¦‚ä¸‹ğ›¼(ğª,ğ¤)=âŸ¨ğª,ğ¤âŸ©/ \\sqrt{d}å‡è®¾ğâˆˆâ„^{ğ‘šÃ—ğ‘‘}æœ‰mä¸ªqueryï¼Œ æœ‰nä¸ªkeys. æˆ‘ä»¬å¯ä»¥é€šè¿‡çŸ©é˜µè¿ç®—çš„æ–¹å¼è®¡ç®—æ‰€æœ‰mnä¸ªscoreï¼šğ›¼(ğ,ğŠ)=ğğŠ^ğ‘‡/\\sqrt{d}ç°åœ¨è®©æˆ‘ä»¬å®ç°è¿™ä¸ªå±‚ï¼Œå®ƒæ”¯æŒä¸€æ‰¹æŸ¥è¯¢å’Œé”®å€¼å¯¹ã€‚æ­¤å¤–ï¼Œå®ƒæ”¯æŒä½œä¸ºæ­£åˆ™åŒ–éšæœºåˆ é™¤ä¸€äº›æ³¨æ„åŠ›æƒé‡. 1234567891011121314151617class DotProductAttention(nn.Module): def __init__(self, dropout, **kwargs): super(DotProductAttention, self).__init__(**kwargs) self.dropout = nn.Dropout(dropout) # query: (batch_size, #queries, d) # key: (batch_size, #kv_pairs, d) # value: (batch_size, #kv_pairs, dim_v) # valid_length: either (batch_size, ) or (batch_size, xx) def forward(self, query, key, value, valid_length=None): d = query.shape[-1] # set transpose_b=True to swap the last two dimensions of key scores = torch.bmm(query, key.transpose(1,2)) / math.sqrt(d) attention_weights = self.dropout(masked_softmax(scores, valid_length)) print(\"attention_weight\\n\",attention_weights) return torch.bmm(attention_weights, value) å¤šå±‚æ„ŸçŸ¥æœºæ³¨æ„åŠ›å°†scoreå‡½æ•°å®šä¹‰: a(\\boldsymbol{s}, \\boldsymbol{h}) = \\boldsymbol{v}^\\top \\tanh(\\boldsymbol{W}_s \\boldsymbol{s} + \\boldsymbol{W}_h \\boldsymbol{h}),. ç„¶åå°†key å’Œ value åœ¨ç‰¹å¾çš„ç»´åº¦ä¸Šåˆå¹¶ï¼ˆconcatenateï¼‰ï¼Œç„¶åé€è‡³ a single hidden layer perceptron è¿™å±‚ä¸­ hidden layer ä¸º â„ and è¾“å‡ºçš„sizeä¸º 1 .éšå±‚æ¿€æ´»å‡½æ•°ä¸ºtanhï¼Œæ— åç½®. 1234567891011121314151617181920# Save to the d2l package.class MLPAttention(nn.Module): def __init__(self, units,ipt_dim,dropout, **kwargs): super(MLPAttention, self).__init__(**kwargs) # Use flatten=True to keep query's and key's 3-D shapes. self.W_k = nn.Linear(ipt_dim, units, bias=False) self.W_q = nn.Linear(ipt_dim, units, bias=False) self.v = nn.Linear(units, 1, bias=False) self.dropout = nn.Dropout(dropout) def forward(self, query, key, value, valid_length): query, key = self.W_k(query), self.W_q(key) #print(\"size\",query.size(),key.size()) # expand query to (batch_size, #querys, 1, units), and key to # (batch_size, 1, #kv_pairs, units). Then plus them with broadcast. features = query.unsqueeze(2) + key.unsqueeze(1) #print(\"features:\",features.size()) #--------------å¼€å¯ scores = self.v(features).squeeze(-1) attention_weights = self.dropout(masked_softmax(scores, valid_length)) return torch.bmm(attention_weights, value) è®¡ç®—èƒŒæ™¯å˜é‡æˆ‘ä»¬å…ˆæè¿°ç¬¬ä¸€ä¸ªå…³é”®ç‚¹ï¼Œå³è®¡ç®—èƒŒæ™¯å˜é‡ã€‚å›¾æç»˜äº†æ³¨æ„åŠ›æœºåˆ¶å¦‚ä½•ä¸ºè§£ç å™¨åœ¨æ—¶é—´æ­¥2è®¡ç®—èƒŒæ™¯å˜é‡ã€‚é¦–å…ˆï¼Œå‡½æ•°$a$æ ¹æ®è§£ç å™¨åœ¨æ—¶é—´æ­¥1çš„éšè—çŠ¶æ€å’Œç¼–ç å™¨åœ¨å„ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€è®¡ç®—softmaxè¿ç®—çš„è¾“å…¥ã€‚softmaxè¿ç®—è¾“å‡ºæ¦‚ç‡åˆ†å¸ƒå¹¶å¯¹ç¼–ç å™¨å„ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€åšåŠ æƒå¹³å‡ï¼Œä»è€Œå¾—åˆ°èƒŒæ™¯å˜é‡ã€‚ å…·ä½“æ¥è¯´ï¼Œä»¤ç¼–ç å™¨åœ¨æ—¶é—´æ­¥$t$çš„éšè—çŠ¶æ€ä¸º$\\boldsymbol{h}_t$ï¼Œä¸”æ€»æ—¶é—´æ­¥æ•°ä¸º$T$ã€‚é‚£ä¹ˆè§£ç å™¨åœ¨æ—¶é—´æ­¥$tâ€™$çš„èƒŒæ™¯å˜é‡ä¸ºæ‰€æœ‰ç¼–ç å™¨éšè—çŠ¶æ€çš„åŠ æƒå¹³å‡ï¼š \\boldsymbol{c}_{t'} = \\sum_{t=1}^T \\alpha_{t' t} \\boldsymbol{h}_t,å…¶ä¸­ç»™å®š$tâ€™$æ—¶ï¼Œæƒé‡$\\alpha_{tâ€™ t}$åœ¨$t=1,\\ldots,T$çš„å€¼æ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒã€‚ä¸ºäº†å¾—åˆ°æ¦‚ç‡åˆ†å¸ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨softmaxè¿ç®—: \\alpha_{t' t} = \\frac{\\exp(e_{t' t})}{ \\sum_{k=1}^T \\exp(e_{t' k}) },\\quad t=1,\\ldots,T.ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å¦‚ä½•è®¡ç®—ä¸Šå¼ä¸­softmaxè¿ç®—çš„è¾“å…¥$e_{tâ€™ t}$ã€‚ç”±äº$e_{tâ€™ t}$åŒæ—¶å–å†³äºè§£ç å™¨çš„æ—¶é—´æ­¥$tâ€™$å’Œç¼–ç å™¨çš„æ—¶é—´æ­¥$t$ï¼Œæˆ‘ä»¬ä¸å¦¨ä»¥è§£ç å™¨åœ¨æ—¶é—´æ­¥$tâ€™-1$çš„éšè—çŠ¶æ€$\\boldsymbol{s}_{tâ€™ - 1}$ä¸ç¼–ç å™¨åœ¨æ—¶é—´æ­¥$t$çš„éšè—çŠ¶æ€$\\boldsymbol{h}_t$ä¸ºè¾“å…¥ï¼Œå¹¶é€šè¿‡å‡½æ•°$a$è®¡ç®—$e_{tâ€™ t}$ï¼š e_{t' t} = a(\\boldsymbol{s}_{t' - 1}, \\boldsymbol{h}_t).è¿™é‡Œå‡½æ•°$a$æœ‰å¤šç§é€‰æ‹©ï¼Œå¦‚æœä¸¤ä¸ªè¾“å…¥å‘é‡é•¿åº¦ç›¸åŒï¼Œä¸€ä¸ªç®€å•çš„é€‰æ‹©æ˜¯è®¡ç®—å®ƒä»¬çš„å†…ç§¯$a(\\boldsymbol{s}, \\boldsymbol{h})=\\boldsymbol{s}^\\top \\boldsymbol{h}$ã€‚è€Œæœ€æ—©æå‡ºæ³¨æ„åŠ›æœºåˆ¶çš„è®ºæ–‡åˆ™å°†è¾“å…¥è¿ç»“åé€šè¿‡å«å•éšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºå˜æ¢ [1]ï¼š a(\\boldsymbol{s}, \\boldsymbol{h}) = \\boldsymbol{v}^\\top \\tanh(\\boldsymbol{W}_s \\boldsymbol{s} + \\boldsymbol{W}_h \\boldsymbol{h}),å…¶ä¸­$\\boldsymbol{v}$ã€$\\boldsymbol{W}_s$ã€$\\boldsymbol{W}_h$éƒ½æ˜¯å¯ä»¥å­¦ä¹ çš„æ¨¡å‹å‚æ•°ã€‚ çŸ¢é‡åŒ–è®¡ç®—æˆ‘ä»¬è¿˜å¯ä»¥å¯¹æ³¨æ„åŠ›æœºåˆ¶é‡‡ç”¨æ›´é«˜æ•ˆçš„çŸ¢é‡åŒ–è®¡ç®—ã€‚å¹¿ä¹‰ä¸Šï¼Œæ³¨æ„åŠ›æœºåˆ¶çš„è¾“å…¥åŒ…æ‹¬æŸ¥è¯¢é¡¹ä»¥åŠä¸€ä¸€å¯¹åº”çš„é”®é¡¹å’Œå€¼é¡¹ï¼Œå…¶ä¸­å€¼é¡¹æ˜¯éœ€è¦åŠ æƒå¹³å‡çš„ä¸€ç»„é¡¹ã€‚åœ¨åŠ æƒå¹³å‡ä¸­ï¼Œå€¼é¡¹çš„æƒé‡æ¥è‡ªæŸ¥è¯¢é¡¹ä»¥åŠä¸è¯¥å€¼é¡¹å¯¹åº”çš„é”®é¡¹çš„è®¡ç®—ã€‚ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒæŸ¥è¯¢é¡¹ä¸ºè§£ç å™¨çš„éšè—çŠ¶æ€ï¼Œé”®é¡¹å’Œå€¼é¡¹å‡ä¸ºç¼–ç å™¨çš„éšè—çŠ¶æ€ã€‚è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªå¸¸è§çš„ç®€å•æƒ…å½¢ï¼Œå³ç¼–ç å™¨å’Œè§£ç å™¨çš„éšè—å•å…ƒä¸ªæ•°å‡ä¸º$h$ï¼Œä¸”å‡½æ•°$a(\\boldsymbol{s}, \\boldsymbol{h})=\\boldsymbol{s}^\\top \\boldsymbol{h}$ã€‚å‡è®¾æˆ‘ä»¬å¸Œæœ›æ ¹æ®è§£ç å™¨å•ä¸ªéšè—çŠ¶æ€$\\boldsymbol{s}_{tâ€™ - 1} \\in \\mathbb{R}^{h}$å’Œç¼–ç å™¨æ‰€æœ‰éšè—çŠ¶æ€$\\boldsymbol{h}_t \\in \\mathbb{R}^{h}, t = 1,\\ldots,T$æ¥è®¡ç®—èƒŒæ™¯å‘é‡$\\boldsymbol{c}_{tâ€™}\\in \\mathbb{R}^{h}$ã€‚æˆ‘ä»¬å¯ä»¥å°†æŸ¥è¯¢é¡¹çŸ©é˜µ$\\boldsymbol{Q} \\in \\mathbb{R}^{1 \\times h}$è®¾ä¸º$\\boldsymbol{s}_{tâ€™ - 1}^\\top$ï¼Œå¹¶ä»¤é”®é¡¹çŸ©é˜µ$\\boldsymbol{K} \\in \\mathbb{R}^{T \\times h}$å’Œå€¼é¡¹çŸ©é˜µ$\\boldsymbol{V} \\in \\mathbb{R}^{T \\times h}$ç›¸åŒä¸”ç¬¬$t$è¡Œå‡ä¸º$\\boldsymbol{h}_t^\\top$ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡çŸ¢é‡åŒ–è®¡ç®— \\text{softmax}(\\boldsymbol{Q}\\boldsymbol{K}^\\top)\\boldsymbol{V}å³å¯ç®—å‡ºè½¬ç½®åçš„èƒŒæ™¯å‘é‡$\\boldsymbol{c}_{tâ€™}^\\top$ã€‚å½“æŸ¥è¯¢é¡¹çŸ©é˜µ$\\boldsymbol{Q}$çš„è¡Œæ•°ä¸º$n$æ—¶ï¼Œä¸Šå¼å°†å¾—åˆ°$n$è¡Œçš„è¾“å‡ºçŸ©é˜µã€‚è¾“å‡ºçŸ©é˜µä¸æŸ¥è¯¢é¡¹çŸ©é˜µåœ¨ç›¸åŒè¡Œä¸Šä¸€ä¸€å¯¹åº”ã€‚ å¼•å…¥æ³¨æ„åŠ›æœºåˆ¶çš„S2Sæœ¬èŠ‚ä¸­å°†æ³¨æ„æœºåˆ¶æ·»åŠ åˆ°sequence to sequence æ¨¡å‹ä¸­ï¼Œä»¥æ˜¾å¼åœ°ä½¿ç”¨æƒé‡èšåˆstatesã€‚ä¸‹å›¾å±•ç¤ºencoding å’Œdecodingçš„æ¨¡å‹ç»“æ„ï¼Œåœ¨æ—¶é—´æ­¥ä¸ºtçš„æ—¶å€™ã€‚æ­¤åˆ»attention layerä¿å­˜ç€encoderingçœ‹åˆ°çš„æ‰€æœ‰ä¿¡æ¯â€”â€”å³encodingçš„æ¯ä¸€æ­¥è¾“å‡ºã€‚åœ¨decodingé˜¶æ®µï¼Œè§£ç å™¨çš„æ—¶åˆ»çš„éšè—çŠ¶æ€è¢«å½“ä½œqueryï¼Œencoderçš„æ¯ä¸ªæ—¶é—´æ­¥çš„hidden statesä½œä¸ºkeyå’Œvalueè¿›è¡Œattentionèšåˆ. Attetion modelçš„è¾“å‡ºå½“ä½œæˆä¸Šä¸‹æ–‡ä¿¡æ¯context vectorï¼Œå¹¶ä¸è§£ç å™¨è¾“å…¥æ‹¼æ¥èµ·æ¥ä¸€èµ·é€åˆ°è§£ç å™¨ï¼šä¸‹å›¾å±•ç¤ºäº†seq2seqæœºåˆ¶çš„æ‰€ä»¥å±‚çš„å…³ç³»ï¼Œä¸‹é¢å±•ç¤ºäº†encoderå’Œdecoderçš„layerç»“æ„ Decoderç”±äºå¸¦æœ‰æ³¨æ„æœºåˆ¶çš„seq2seqçš„ç¼–ç å™¨ä¸ä¹‹å‰ç« èŠ‚ä¸­çš„Seq2SeqEncoderç›¸åŒï¼Œæ‰€ä»¥åœ¨æ­¤å¤„æˆ‘ä»¬åªå…³æ³¨è§£ç å™¨ã€‚æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªMLPæ³¨æ„å±‚(MLPAttention)ï¼Œå®ƒçš„éšè—å¤§å°ä¸è§£ç å™¨ä¸­çš„LSTMå±‚ç›¸åŒã€‚ç„¶åæˆ‘ä»¬é€šè¿‡ä»ç¼–ç å™¨ä¼ é€’ä¸‰ä¸ªå‚æ•°æ¥åˆå§‹åŒ–è§£ç å™¨çš„çŠ¶æ€: the encoder outputs of all timestepsï¼šencoderè¾“å‡ºçš„å„ä¸ªçŠ¶æ€ï¼Œè¢«ç”¨äºattetion layerçš„memoryéƒ¨åˆ†ï¼Œæœ‰ç›¸åŒçš„keyå’Œvalues the hidden state of the encoderâ€™s final timestepï¼šç¼–ç å™¨æœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€ï¼Œè¢«ç”¨äºåˆå§‹åŒ–decoder çš„hidden state the encoder valid length: ç¼–ç å™¨çš„æœ‰æ•ˆé•¿åº¦ï¼Œå€Ÿæ­¤ï¼Œæ³¨æ„å±‚ä¸ä¼šè€ƒè™‘ç¼–ç å™¨è¾“å‡ºä¸­çš„å¡«å……æ ‡è®°ï¼ˆPaddingsï¼‰ åœ¨è§£ç çš„æ¯ä¸ªæ—¶é—´æ­¥ï¼Œæˆ‘ä»¬ä½¿ç”¨è§£ç å™¨çš„æœ€åä¸€ä¸ªRNNå±‚çš„è¾“å‡ºä½œä¸ºæ³¨æ„å±‚çš„queryã€‚ç„¶åï¼Œå°†æ³¨æ„åŠ›æ¨¡å‹çš„è¾“å‡ºä¸è¾“å…¥åµŒå…¥å‘é‡è¿æ¥èµ·æ¥ï¼Œè¾“å…¥åˆ°RNNå±‚ã€‚è™½ç„¶RNNå±‚éšè—çŠ¶æ€ä¹ŸåŒ…å«æ¥è‡ªè§£ç å™¨çš„å†å²ä¿¡æ¯ï¼Œä½†æ˜¯attention modelçš„è¾“å‡ºæ˜¾å¼åœ°é€‰æ‹©äº†enc_valid_lenä»¥å†…çš„ç¼–ç å™¨è¾“å‡ºï¼Œè¿™æ ·attentionæœºåˆ¶å°±ä¼šå°½å¯èƒ½æ’é™¤å…¶ä»–ä¸ç›¸å…³çš„ä¿¡æ¯ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556class Seq2SeqAttentionDecoder(d2l.Decoder): def __init__(self, vocab_size, embed_size, num_hiddens, num_layers, dropout=0, **kwargs): super(Seq2SeqAttentionDecoder, self).__init__(**kwargs) self.attention_cell = MLPAttention(num_hiddens,num_hiddens, dropout) self.embedding = nn.Embedding(vocab_size, embed_size) self.rnn = nn.LSTM(embed_size+ num_hiddens,num_hiddens, num_layers, dropout=dropout) self.dense = nn.Linear(num_hiddens,vocab_size) def init_state(self, enc_outputs, enc_valid_len, *args): outputs, hidden_state = enc_outputs# print(\"first:\",outputs.size(),hidden_state[0].size(),hidden_state[1].size()) # Transpose outputs to (batch_size, seq_len, hidden_size) return (outputs.permute(1,0,-1), hidden_state, enc_valid_len) #outputs.swapaxes(0, 1) def forward(self, X, state): enc_outputs, hidden_state, enc_valid_len = state #(\"X.size\",X.size()) X = self.embedding(X).transpose(0,1)# print(\"Xembeding.size2\",X.size()) outputs = [] for l, x in enumerate(X):# print(f\"\\n&#123;l&#125;-th token\")# print(\"x.first.size()\",x.size()) # query shape: (batch_size, 1, hidden_size) # select hidden state of the last rnn layer as query query = hidden_state[0][-1].unsqueeze(1) # np.expand_dims(hidden_state[0][-1], axis=1) # context has same shape as query# print(\"query enc_outputs, enc_outputs:\\n\",query.size(), enc_outputs.size(), enc_outputs.size()) context = self.attention_cell(query, enc_outputs, enc_outputs, enc_valid_len) # Concatenate on the feature dimension# print(\"context.size:\",context.size()) x = torch.cat((context, x.unsqueeze(1)), dim=-1) # Reshape x to (1, batch_size, embed_size+hidden_size)# print(\"rnn\",x.size(), len(hidden_state)) out, hidden_state = self.rnn(x.transpose(0,1), hidden_state) outputs.append(out) outputs = self.dense(torch.cat(outputs, dim=0)) return outputs.transpose(0, 1), [enc_outputs, hidden_state, enc_valid_len]encoder = d2l.Seq2SeqEncoder(vocab_size=10, embed_size=8, num_hiddens=16, num_layers=2)# encoder.initialize()decoder = Seq2SeqAttentionDecoder(vocab_size=10, embed_size=8, num_hiddens=16, num_layers=2)X = torch.zeros((4, 7),dtype=torch.long)print(\"batch size=4\\nseq_length=7\\nhidden dim=16\\nnum_layers=2\\n\")print('encoder output size:', encoder(X)[0].size())print('encoder hidden size:', encoder(X)[1][0].size())print('encoder memory size:', encoder(X)[1][1].size())state = decoder.init_state(encoder(X), None)out, state = decoder(X, state)out.shape, len(state), state[0].shape, len(state[1]), state[1][0].shape","categories":[{"name":"deep_learning","slug":"deep-learning","permalink":"https://shyshy903.github.io/categories/deep-learning/"}],"tags":[{"name":"DL","slug":"DL","permalink":"https://shyshy903.github.io/tags/DL/"}]},{"title":"æ¨¡å‹é€‰æ‹©ä¸è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ","slug":"Deep_learning/æ¨¡å‹é€‰æ‹©ä¸è¿‡æ‹Ÿåˆã€æ¬ æ‹Ÿåˆ","date":"2020-02-15T16:00:00.000Z","updated":"2020-02-15T16:00:00.000Z","comments":true,"path":"2020/02/16/Deep_learning/æ¨¡å‹é€‰æ‹©ä¸è¿‡æ‹Ÿåˆã€æ¬ æ‹Ÿåˆ/","link":"","permalink":"https://shyshy903.github.io/2020/02/16/Deep_learning/%E6%A8%A1%E5%9E%8B%E9%80%89%E6%8B%A9%E4%B8%8E%E8%BF%87%E6%8B%9F%E5%90%88%E3%80%81%E6%AC%A0%E6%8B%9F%E5%90%88/","excerpt":"","text":"æ¨¡å‹é€‰æ‹©ä¸è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆè®­ç»ƒè¯¯å·®ä¸æ³›åŒ–è¯¯å·®è®­ç»ƒè¯¯å·®ï¼ˆtraining errorï¼‰æŒ‡æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šè¡¨ç°å‡ºçš„è¯¯å·®ã€‚æ³›åŒ–è¯¯å·®ï¼ˆgeneralization errorï¼‰æŒ‡æ¨¡å‹åœ¨ä»»æ„ä¸€ä¸ªæµ‹è¯•æ•°æ®æ ·æœ¬ä¸Šè¡¨ç°å‡ºçš„è¯¯å·®çš„æœŸæœ›ï¼Œå¹¶å¸¸å¸¸é€šè¿‡æµ‹è¯•æ•°æ®é›†ä¸Šçš„è¯¯å·®æ¥è¿‘ä¼¼ã€‚è®¡ç®—è®­ç»ƒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®å¯ä»¥ä½¿ç”¨ä¹‹å‰ä»‹ç»è¿‡çš„æŸå¤±å‡½æ•°ï¼Œä¾‹å¦‚çº¿æ€§å›å½’ç”¨åˆ°çš„å¹³æ–¹æŸå¤±å‡½æ•°å’Œsoftmaxå›å½’ç”¨åˆ°çš„äº¤å‰ç†µæŸå¤±å‡½æ•°ã€‚æ‰€ä»¥ï¼Œè®­ç»ƒè¯¯å·®çš„æœŸæœ›å°äºæˆ–ç­‰äºæ³›åŒ–è¯¯å·®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”±è®­ç»ƒæ•°æ®é›†å­¦åˆ°çš„æ¨¡å‹å‚æ•°ä¼šä½¿æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šçš„è¡¨ç°ä¼˜äºæˆ–ç­‰äºåœ¨æµ‹è¯•æ•°æ®é›†ä¸Šçš„è¡¨ç°ã€‚ç”±äºæ— æ³•ä»è®­ç»ƒè¯¯å·®ä¼°è®¡æ³›åŒ–è¯¯å·®ï¼Œä¸€å‘³åœ°é™ä½è®­ç»ƒè¯¯å·®å¹¶ä¸æ„å‘³ç€æ³›åŒ–è¯¯å·®ä¸€å®šä¼šé™ä½ã€‚ æœºå™¨å­¦ä¹ æ¨¡å‹åº”å…³æ³¨é™ä½æ³›åŒ–è¯¯å·®ã€‚ æ¨¡å‹é€‰æ‹©éªŒè¯é›†æµ‹è¯•é›†åªèƒ½åœ¨æ‰€æœ‰è¶…å‚æ•°å’Œæ¨¡å‹å‚æ•°é€‰å®šåä½¿ç”¨ä¸€æ¬¡ã€‚ä¸å¯ä»¥ä½¿ç”¨æµ‹è¯•æ•°æ®é€‰æ‹©æ¨¡å‹ï¼Œå¦‚è°ƒå‚ã€‚é¢„ç•™ä¸€éƒ¨åˆ†åœ¨è®­ç»ƒæ•°æ®é›†å’Œæµ‹è¯•æ•°æ®é›†ä»¥å¤–çš„æ•°æ®æ¥è¿›è¡Œæ¨¡å‹é€‰æ‹©ã€‚è¿™éƒ¨åˆ†æ•°æ®è¢«ç§°ä¸ºéªŒè¯æ•°æ®é›†ï¼Œç®€ç§°éªŒè¯é›†ï¼ˆvalidation setï¼‰ KæŠ˜äº¤å‰éªŒè¯ç”±äºéªŒè¯æ•°æ®é›†ä¸å‚ä¸æ¨¡å‹è®­ç»ƒï¼Œå½“è®­ç»ƒæ•°æ®ä¸å¤Ÿç”¨æ—¶ï¼Œé¢„ç•™å¤§é‡çš„éªŒè¯æ•°æ®æ˜¾å¾—å¤ªå¥¢ä¾ˆã€‚ä¸€ç§æ”¹å–„çš„æ–¹æ³•æ˜¯$K$æŠ˜äº¤å‰éªŒè¯ï¼ˆ$K$-fold cross-validationï¼‰ã€‚åœ¨$K$æŠ˜äº¤å‰éªŒè¯ä¸­ï¼Œæˆ‘ä»¬æŠŠåŸå§‹è®­ç»ƒæ•°æ®é›†åˆ†å‰²æˆ$K$ä¸ªä¸é‡åˆçš„å­æ•°æ®é›†ï¼Œç„¶åæˆ‘ä»¬åš$K$æ¬¡æ¨¡å‹è®­ç»ƒå’ŒéªŒè¯ã€‚æ¯ä¸€æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå­æ•°æ®é›†éªŒè¯æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨å…¶ä»–$K-1$ä¸ªå­æ•°æ®é›†æ¥è®­ç»ƒæ¨¡å‹ã€‚åœ¨è¿™$K$æ¬¡è®­ç»ƒå’ŒéªŒè¯ä¸­ï¼Œæ¯æ¬¡ç”¨æ¥éªŒè¯æ¨¡å‹çš„å­æ•°æ®é›†éƒ½ä¸åŒã€‚æœ€åï¼Œæˆ‘ä»¬å¯¹è¿™$K$æ¬¡è®­ç»ƒè¯¯å·®å’ŒéªŒè¯è¯¯å·®åˆ†åˆ«æ±‚å¹³å‡ã€‚ æ¬ æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ ä¸€ç±»æ˜¯æ¨¡å‹æ— æ³•å¾—åˆ°è¾ƒä½çš„è®­ç»ƒè¯¯å·®ï¼Œæˆ‘ä»¬å°†è¿™ä¸€ç°è±¡ç§°ä½œæ¬ æ‹Ÿåˆï¼ˆunderfittingï¼‰ï¼› å¦ä¸€ç±»æ˜¯æ¨¡å‹çš„è®­ç»ƒè¯¯å·®è¿œå°äºå®ƒåœ¨æµ‹è¯•æ•°æ®é›†ä¸Šçš„è¯¯å·®ï¼Œæˆ‘ä»¬ç§°è¯¥ç°è±¡ä¸ºè¿‡æ‹Ÿåˆï¼ˆoverfittingï¼‰ã€‚ åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½åŒæ—¶åº”å¯¹æ¬ æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆã€‚è™½ç„¶æœ‰å¾ˆå¤šå› ç´ å¯èƒ½å¯¼è‡´è¿™ä¸¤ç§æ‹Ÿåˆé—®é¢˜ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é‡ç‚¹è®¨è®ºä¸¤ä¸ªå› ç´ ï¼šæ¨¡å‹å¤æ‚åº¦å’Œè®­ç»ƒæ•°æ®é›†å¤§å°ã€‚ æ¨¡å‹å¤æ‚åº¦ å›¾3.4 æ¨¡å‹å¤æ‚åº¦å¯¹æ¬ æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆçš„å½±å“ å½±å“æ¬ æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆçš„å¦ä¸€ä¸ªé‡è¦å› ç´ æ˜¯è®­ç»ƒæ•°æ®é›†çš„å¤§å°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœè®­ç»ƒæ•°æ®é›†ä¸­æ ·æœ¬æ•°è¿‡å°‘ï¼Œç‰¹åˆ«æ˜¯æ¯”æ¨¡å‹å‚æ•°æ•°é‡ï¼ˆæŒ‰å…ƒç´ è®¡ï¼‰æ›´å°‘æ—¶ï¼Œè¿‡æ‹Ÿåˆæ›´å®¹æ˜“å‘ç”Ÿã€‚æ­¤å¤–ï¼Œæ³›åŒ–è¯¯å·®ä¸ä¼šéšè®­ç»ƒæ•°æ®é›†é‡Œæ ·æœ¬æ•°é‡å¢åŠ è€Œå¢å¤§ã€‚å› æ­¤ï¼Œåœ¨è®¡ç®—èµ„æºå…è®¸çš„èŒƒå›´ä¹‹å†…ï¼Œæˆ‘ä»¬é€šå¸¸å¸Œæœ›è®­ç»ƒæ•°æ®é›†å¤§ä¸€äº›ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¨¡å‹å¤æ‚åº¦è¾ƒé«˜æ—¶ï¼Œä¾‹å¦‚å±‚æ•°è¾ƒå¤šçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚ å¤šé¡¹å¼æ‹Ÿåˆ æ­£å¸¸æ‹Ÿåˆ æ¬ æ‹Ÿåˆ è¿‡æ‹Ÿåˆ æƒé‡è¡°å‡ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬è§‚å¯Ÿäº†è¿‡æ‹Ÿåˆç°è±¡ï¼Œå³æ¨¡å‹çš„è®­ç»ƒè¯¯å·®è¿œå°äºå®ƒåœ¨æµ‹è¯•é›†ä¸Šçš„è¯¯å·®ã€‚è™½ç„¶å¢å¤§è®­ç»ƒæ•°æ®é›†å¯èƒ½ä¼šå‡è½»è¿‡æ‹Ÿåˆï¼Œä½†æ˜¯è·å–é¢å¤–çš„è®­ç»ƒæ•°æ®å¾€å¾€ä»£ä»·é«˜æ˜‚ã€‚æœ¬èŠ‚ä»‹ç»åº”å¯¹è¿‡æ‹Ÿåˆé—®é¢˜çš„å¸¸ç”¨æ–¹æ³•ï¼šæƒé‡è¡°å‡ï¼ˆweight decayï¼‰ã€‚ L2æ­£åˆ™åŒ–æƒé‡è¡°å‡ç­‰ä»·äº $L_2$ èŒƒæ•°æ­£åˆ™åŒ–ï¼ˆregularizationï¼‰ã€‚æ­£åˆ™åŒ–é€šè¿‡ä¸ºæ¨¡å‹æŸå¤±å‡½æ•°æ·»åŠ æƒ©ç½šé¡¹ä½¿å­¦å‡ºçš„æ¨¡å‹å‚æ•°å€¼è¾ƒå°ï¼Œæ˜¯åº”å¯¹è¿‡æ‹Ÿåˆçš„å¸¸ç”¨æ‰‹æ®µã€‚æˆ‘ä»¬å…ˆæè¿°$L_2$èŒƒæ•°æ­£åˆ™åŒ–ï¼Œå†è§£é‡Šå®ƒä¸ºä½•åˆç§°æƒé‡è¡°å‡ã€‚ $L_2$èŒƒæ•°æ­£åˆ™åŒ–åœ¨æ¨¡å‹åŸæŸå¤±å‡½æ•°åŸºç¡€ä¸Šæ·»åŠ $L_2$èŒƒæ•°æƒ©ç½šé¡¹ï¼Œä»è€Œå¾—åˆ°è®­ç»ƒæ‰€éœ€è¦æœ€å°åŒ–çš„å‡½æ•°ã€‚$L_2$èŒƒæ•°æƒ©ç½šé¡¹æŒ‡çš„æ˜¯æ¨¡å‹æƒé‡å‚æ•°æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹å’Œä¸ä¸€ä¸ªæ­£çš„å¸¸æ•°çš„ä¹˜ç§¯ã€‚ä»¥3.1èŠ‚ï¼ˆçº¿æ€§å›å½’ï¼‰ä¸­çš„çº¿æ€§å›å½’æŸå¤±å‡½æ•° \\ell(w_1, w_2, b) = \\frac{1}{n} \\sum_{i=1}^n \\frac{1}{2}\\left(x_1^{(i)} w_1 + x_2^{(i)} w_2 + b - y^{(i)}\\right)^2ä¸ºä¾‹ï¼Œå…¶ä¸­$w_1, w_2$æ˜¯æƒé‡å‚æ•°ï¼Œ$b$æ˜¯åå·®å‚æ•°ï¼Œæ ·æœ¬$i$çš„è¾“å…¥ä¸º$x_1^{(i)}, x_2^{(i)}$ï¼Œæ ‡ç­¾ä¸º$y^{(i)}$ï¼Œæ ·æœ¬æ•°ä¸º$n$ã€‚å°†æƒé‡å‚æ•°ç”¨å‘é‡$\\boldsymbol{w} = [w_1, w_2]$è¡¨ç¤ºï¼Œå¸¦æœ‰$L_2$èŒƒæ•°æƒ©ç½šé¡¹çš„æ–°æŸå¤±å‡½æ•°ä¸º \\ell(w_1, w_2, b) + \\frac{\\lambda}{2n} \\|\\boldsymbol{w}\\|^2,å…¶ä¸­è¶…å‚æ•°$\\lambda &gt; 0$ã€‚å½“æƒé‡å‚æ•°å‡ä¸º0æ—¶ï¼Œæƒ©ç½šé¡¹æœ€å°ã€‚å½“$\\lambda$è¾ƒå¤§æ—¶ï¼Œæƒ©ç½šé¡¹åœ¨æŸå¤±å‡½æ•°ä¸­çš„æ¯”é‡è¾ƒå¤§ï¼Œè¿™é€šå¸¸ä¼šä½¿å­¦åˆ°çš„æƒé‡å‚æ•°çš„å…ƒç´ è¾ƒæ¥è¿‘0ã€‚å½“$\\lambda$è®¾ä¸º0æ—¶ï¼Œæƒ©ç½šé¡¹å®Œå…¨ä¸èµ·ä½œç”¨ã€‚ä¸Šå¼ä¸­$L_2$èŒƒæ•°å¹³æ–¹$|\\boldsymbol{w}|^2$å±•å¼€åå¾—åˆ°$w_1^2 + w_2^2$ã€‚æœ‰äº†$L_2$èŒƒæ•°æƒ©ç½šé¡¹åï¼Œåœ¨å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ä¸­ï¼Œæˆ‘ä»¬å°†çº¿æ€§å›å½’ä¸€èŠ‚ä¸­æƒé‡$w_1$å’Œ$w_2$çš„è¿­ä»£æ–¹å¼æ›´æ”¹ä¸º \\begin{aligned} w_1 &\\leftarrow \\left(1- \\frac{\\eta\\lambda}{|\\mathcal{B}|} \\right)w_1 - \\frac{\\eta}{|\\mathcal{B}|} \\sum_{i \\in \\mathcal{B}}x_1^{(i)} \\left(x_1^{(i)} w_1 + x_2^{(i)} w_2 + b - y^{(i)}\\right),\\\\ w_2 &\\leftarrow \\left(1- \\frac{\\eta\\lambda}{|\\mathcal{B}|} \\right)w_2 - \\frac{\\eta}{|\\mathcal{B}|} \\sum_{i \\in \\mathcal{B}}x_2^{(i)} \\left(x_1^{(i)} w_1 + x_2^{(i)} w_2 + b - y^{(i)}\\right). \\end{aligned}å¯è§ï¼Œ$L_2$èŒƒæ•°æ­£åˆ™åŒ–ä»¤æƒé‡$w_1$å’Œ$w_2$å…ˆè‡ªä¹˜å°äº1çš„æ•°ï¼Œå†å‡å»ä¸å«æƒ©ç½šé¡¹çš„æ¢¯åº¦ã€‚å› æ­¤ï¼Œ$L_2$èŒƒæ•°æ­£åˆ™åŒ–åˆå«æƒé‡è¡°å‡ã€‚æƒé‡è¡°å‡é€šè¿‡æƒ©ç½šç»å¯¹å€¼è¾ƒå¤§çš„æ¨¡å‹å‚æ•°ä¸ºéœ€è¦å­¦ä¹ çš„æ¨¡å‹å¢åŠ äº†é™åˆ¶ï¼Œè¿™å¯èƒ½å¯¹è¿‡æ‹Ÿåˆæœ‰æ•ˆã€‚å®é™…åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶ä¹Ÿåœ¨æƒ©ç½šé¡¹ä¸­æ·»åŠ åå·®å…ƒç´ çš„å¹³æ–¹å’Œã€‚ æƒé‡è¡°å‡çš„pytorchå®ç°123456789%matplotlib inlineimport torchimport torch.nn as nnimport numpy as npimport syssys.path.append(\".\")import d2lzh_pytorch as d2lprint(torch.__version__) 1.3.1 12345678910111213141516171819202122232425def fit_and_plot_pytorch(wd): # å¯¹æƒé‡å‚æ•°è¡°å‡ã€‚æƒé‡åç§°ä¸€èˆ¬æ˜¯ä»¥weightç»“å°¾ net = nn.Linear(num_inputs, 1) nn.init.normal_(net.weight, mean=0, std=1) nn.init.normal_(net.bias, mean=0, std=1) optimizer_w = torch.optim.SGD(params=[net.weight], lr=lr, weight_decay=wd) # å¯¹æƒé‡å‚æ•°è¡°å‡ optimizer_b = torch.optim.SGD(params=[net.bias], lr=lr) # ä¸å¯¹åå·®å‚æ•°è¡°å‡ train_ls, test_ls = [], [] for _ in range(num_epochs): for X, y in train_iter: l = loss(net(X), y).mean() optimizer_w.zero_grad() optimizer_b.zero_grad() l.backward() # å¯¹ä¸¤ä¸ªoptimizerå®ä¾‹åˆ†åˆ«è°ƒç”¨stepå‡½æ•°ï¼Œä»è€Œåˆ†åˆ«æ›´æ–°æƒé‡å’Œåå·® optimizer_w.step() optimizer_b.step() train_ls.append(loss(net(train_features), train_labels).mean().item()) test_ls.append(loss(net(test_features), test_labels).mean().item()) d2l.semilogy(range(1, num_epochs + 1), train_ls, 'epochs', 'loss', range(1, num_epochs + 1), test_ls, ['train', 'test']) print('L2 norm of w:', net.weight.data.norm().item()) dropoutå¤šå±‚æ„ŸçŸ¥æœºçš„è®¡ç®—è¡¨è¾¾å¼ä¸º h_i = \\phi\\left(x_1 w_{1i} + x_2 w_{2i} + x_3 w_{3i} + x_4 w_{4i} + b_i\\right)è¿™é‡Œ$\\phi$æ˜¯æ¿€æ´»å‡½æ•°ï¼Œ$x_1, \\ldots, x_4$æ˜¯è¾“å…¥ï¼Œéšè—å•å…ƒ$i$çš„æƒé‡å‚æ•°ä¸º$w_{1i}, \\ldots, w_{4i}$ï¼Œåå·®å‚æ•°ä¸º$b_i$ã€‚å½“å¯¹è¯¥éšè—å±‚ä½¿ç”¨ä¸¢å¼ƒæ³•æ—¶ï¼Œè¯¥å±‚çš„éšè—å•å…ƒå°†æœ‰ä¸€å®šæ¦‚ç‡è¢«ä¸¢å¼ƒæ‰ã€‚è®¾ä¸¢å¼ƒæ¦‚ç‡ä¸º$p$ï¼Œé‚£ä¹ˆæœ‰$p$çš„æ¦‚ç‡$h_i$ä¼šè¢«æ¸…é›¶ï¼Œæœ‰$1-p$çš„æ¦‚ç‡$h_i$ä¼šé™¤ä»¥$1-p$åšæ‹‰ä¼¸ã€‚ä¸¢å¼ƒæ¦‚ç‡æ˜¯ä¸¢å¼ƒæ³•çš„è¶…å‚æ•°ã€‚å…·ä½“æ¥è¯´ï¼Œè®¾éšæœºå˜é‡$\\xi_i$ä¸º0å’Œ1çš„æ¦‚ç‡åˆ†åˆ«ä¸º$p$å’Œ$1-p$ã€‚ä½¿ç”¨ä¸¢å¼ƒæ³•æ—¶æˆ‘ä»¬è®¡ç®—æ–°çš„éšè—å•å…ƒ$h_iâ€™$ h_i' = \\frac{\\xi_i}{1-p} h_iç”±äº$E(\\xi_i) = 1-p$ï¼Œå› æ­¤ E(h_i') = \\frac{E(\\xi_i)}{1-p}h_i = h_iå³ä¸¢å¼ƒæ³•ä¸æ”¹å˜å…¶è¾“å…¥çš„æœŸæœ›å€¼ã€‚ éšè—å±‚ä½¿ç”¨äº†ä¸¢å¼ƒæ³•çš„å¤šå±‚æ„ŸçŸ¥æœº dropoutçš„pytorchå®ç°12345678910111213net = nn.Sequential( d2l.FlattenLayer(), nn.Linear(num_inputs, num_hiddens1), nn.ReLU(), nn.Dropout(drop_prob1), nn.Linear(num_hiddens1, num_hiddens2), nn.ReLU(), nn.Dropout(drop_prob2), nn.Linear(num_hiddens2, 10) )for param in net.parameters(): nn.init.normal_(param, mean=0, std=0.01) æ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸å½“ç¥ç»ç½‘ç»œçš„å±‚æ•°è¾ƒå¤šæ—¶ï¼Œæ¨¡å‹çš„æ•°å€¼ç¨³å®šæ€§å®¹æ˜“å˜å·®ã€‚å‡è®¾ä¸€ä¸ªå±‚æ•°ä¸º$L$çš„å¤šå±‚æ„ŸçŸ¥æœºçš„ç¬¬$l$å±‚$\\boldsymbol{H}^{(l)}$çš„æƒé‡å‚æ•°ä¸º$\\boldsymbol{W}^{(l)}$ï¼Œè¾“å‡ºå±‚$\\boldsymbol{H}^{(L)}$çš„æƒé‡å‚æ•°ä¸º$\\boldsymbol{W}^{(L)}$ã€‚ä¸ºäº†ä¾¿äºè®¨è®ºï¼Œä¸è€ƒè™‘åå·®å‚æ•°ï¼Œä¸”è®¾æ‰€æœ‰éšè—å±‚çš„æ¿€æ´»å‡½æ•°ä¸ºæ’ç­‰æ˜ å°„ï¼ˆidentity mappingï¼‰$\\phi(x) = x$ã€‚ç»™å®šè¾“å…¥$\\boldsymbol{X}$ï¼Œå¤šå±‚æ„ŸçŸ¥æœºçš„ç¬¬$l$å±‚çš„è¾“å‡º$\\boldsymbol{H}^{(l)} = \\boldsymbol{X} \\boldsymbol{W}^{(1)} \\boldsymbol{W}^{(2)} \\ldots \\boldsymbol{W}^{(l)}$ã€‚æ­¤æ—¶ï¼Œå¦‚æœå±‚æ•°$l$è¾ƒå¤§ï¼Œ$\\boldsymbol{H}^{(l)}$çš„è®¡ç®—å¯èƒ½ä¼šå‡ºç°è¡°å‡æˆ–çˆ†ç‚¸ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾è¾“å…¥å’Œæ‰€æœ‰å±‚çš„æƒé‡å‚æ•°éƒ½æ˜¯æ ‡é‡ï¼Œå¦‚æƒé‡å‚æ•°ä¸º0.2å’Œ5ï¼Œå¤šå±‚æ„ŸçŸ¥æœºçš„ç¬¬30å±‚è¾“å‡ºä¸ºè¾“å…¥$\\boldsymbol{X}$åˆ†åˆ«ä¸$0.2^{30} \\approx 1 \\times 10^{-21}$ï¼ˆè¡°å‡ï¼‰å’Œ$5^{30} \\approx 9 \\times 10^{20}$ï¼ˆçˆ†ç‚¸ï¼‰çš„ä¹˜ç§¯ã€‚ç±»ä¼¼åœ°ï¼Œå½“å±‚æ•°è¾ƒå¤šæ—¶ï¼Œæ¢¯åº¦çš„è®¡ç®—ä¹Ÿæ›´å®¹æ˜“å‡ºç°è¡°å‡æˆ–çˆ†ç‚¸ã€‚ éšæœºåˆå§‹åŒ–æ¨¡å‹å‚æ•°PyTorchçš„é»˜è®¤éšæœºåˆå§‹åŒ–éšæœºåˆå§‹åŒ–æ¨¡å‹å‚æ•°çš„æ–¹æ³•æœ‰å¾ˆå¤šã€‚ä½¿ç”¨torch.nn.init.normal_()ä½¿æ¨¡å‹netçš„æƒé‡å‚æ•°é‡‡ç”¨æ­£æ€åˆ†å¸ƒçš„éšæœºåˆå§‹åŒ–æ–¹å¼ã€‚ä¸è¿‡ï¼ŒPyTorchä¸­nn.Moduleçš„æ¨¡å—å‚æ•°éƒ½é‡‡å–äº†è¾ƒä¸ºåˆç†çš„åˆå§‹åŒ–ç­–ç•¥ï¼ˆä¸åŒç±»å‹çš„layerå…·ä½“é‡‡æ ·çš„å“ªä¸€ç§åˆå§‹åŒ–æ–¹æ³•çš„å¯å‚è€ƒæºä»£ç ï¼‰ï¼Œå› æ­¤ä¸€èˆ¬ä¸ç”¨æˆ‘ä»¬è€ƒè™‘ã€‚ Xavieréšæœºåˆå§‹åŒ–è¿˜æœ‰ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„éšæœºåˆå§‹åŒ–æ–¹æ³•å«ä½œXavieréšæœºåˆå§‹åŒ–[1]ã€‚å‡è®¾æŸå…¨è¿æ¥å±‚çš„è¾“å…¥ä¸ªæ•°ä¸º$a$ï¼Œè¾“å‡ºä¸ªæ•°ä¸º$b$ï¼ŒXavieréšæœºåˆå§‹åŒ–å°†ä½¿è¯¥å±‚ä¸­æƒé‡å‚æ•°çš„æ¯ä¸ªå…ƒç´ éƒ½éšæœºé‡‡æ ·äºå‡åŒ€åˆ†å¸ƒ U\\left(-\\sqrt{\\frac{6}{a+b}}, \\sqrt{\\frac{6}{a+b}}\\right).å®ƒçš„è®¾è®¡ä¸»è¦è€ƒè™‘åˆ°ï¼Œæ¨¡å‹å‚æ•°åˆå§‹åŒ–åï¼Œæ¯å±‚è¾“å‡ºçš„æ–¹å·®ä¸è¯¥å—è¯¥å±‚è¾“å…¥ä¸ªæ•°å½±å“ï¼Œä¸”æ¯å±‚æ¢¯åº¦çš„æ–¹å·®ä¹Ÿä¸è¯¥å—è¯¥å±‚è¾“å‡ºä¸ªæ•°å½±å“ã€‚ å°ç»“ æ­£åˆ™åŒ–é€šè¿‡ä¸ºæ¨¡å‹æŸå¤±å‡½æ•°æ·»åŠ æƒ©ç½šé¡¹ä½¿å­¦å‡ºçš„æ¨¡å‹å‚æ•°å€¼è¾ƒå°ï¼Œæ˜¯åº”å¯¹è¿‡æ‹Ÿåˆçš„å¸¸ç”¨æ‰‹æ®µã€‚ æƒé‡è¡°å‡ç­‰ä»·äº$L_2$èŒƒæ•°æ­£åˆ™åŒ–ï¼Œé€šå¸¸ä¼šä½¿å­¦åˆ°çš„æƒé‡å‚æ•°çš„å…ƒç´ è¾ƒæ¥è¿‘0ã€‚ æƒé‡è¡°å‡å¯ä»¥é€šè¿‡ä¼˜åŒ–å™¨ä¸­çš„weight_decayè¶…å‚æ•°æ¥æŒ‡å®šã€‚ å¯ä»¥å®šä¹‰å¤šä¸ªä¼˜åŒ–å™¨å®ä¾‹å¯¹ä¸åŒçš„æ¨¡å‹å‚æ•°ä½¿ç”¨ä¸åŒçš„è¿­ä»£æ–¹æ³•ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸¢å¼ƒæ³•åº”å¯¹è¿‡æ‹Ÿåˆã€‚ ä¸¢å¼ƒæ³•åªåœ¨è®­ç»ƒæ¨¡å‹æ—¶ä½¿ç”¨ æ·±åº¦æ¨¡å‹æœ‰å…³æ•°å€¼ç¨³å®šæ€§çš„å…¸å‹é—®é¢˜æ˜¯è¡°å‡å’Œçˆ†ç‚¸ã€‚å½“ç¥ç»ç½‘ç»œçš„å±‚æ•°è¾ƒå¤šæ—¶ï¼Œæ¨¡å‹çš„æ•°å€¼ç¨³å®šæ€§å®¹æ˜“å˜å·®ã€‚ æˆ‘ä»¬é€šå¸¸éœ€è¦éšæœºåˆå§‹åŒ–ç¥ç»ç½‘ç»œçš„æ¨¡å‹å‚æ•°ï¼Œå¦‚æƒé‡å‚æ•°ã€‚ 12","categories":[{"name":"deep_learning","slug":"deep-learning","permalink":"https://shyshy903.github.io/categories/deep-learning/"}],"tags":[{"name":"DL","slug":"DL","permalink":"https://shyshy903.github.io/tags/DL/"}]},{"title":"æœºå™¨ç¿»è¯‘åŸºç¡€","slug":"Deep_learning/æœºå™¨ç¿»è¯‘","date":"2020-02-15T16:00:00.000Z","updated":"2020-02-15T16:00:00.000Z","comments":true,"path":"2020/02/16/Deep_learning/æœºå™¨ç¿»è¯‘/","link":"","permalink":"https://shyshy903.github.io/2020/02/16/Deep_learning/%E6%9C%BA%E5%99%A8%E7%BF%BB%E8%AF%91/","excerpt":"","text":"æœºå™¨ç¿»è¯‘æœºå™¨ç¿»è¯‘æ˜¯æŒ‡å°†ä¸€æ®µæ–‡æœ¬ä»ä¸€ç§è¯­è¨€è‡ªåŠ¨ç¿»è¯‘åˆ°å¦ä¸€ç§è¯­è¨€ã€‚å› ä¸ºä¸€æ®µæ–‡æœ¬åºåˆ—åœ¨ä¸åŒè¯­è¨€ä¸­çš„é•¿åº¦ä¸ä¸€å®šç›¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨æœºå™¨ç¿»è¯‘ä¸ºä¾‹æ¥ä»‹ç»ç¼–ç å™¨â€”è§£ç å™¨å’Œæ³¨æ„åŠ›æœºåˆ¶çš„åº”ç”¨ã€‚ è¯»å–å’Œé¢„å¤„ç†æ•°æ®æ•°æ®é¢„å¤„ç†å°†æ•°æ®é›†æ¸…æ´—ã€è½¬åŒ–ä¸ºç¥ç»ç½‘ç»œçš„è¾“å…¥minbatch 12345678910111213%å¯¼å…¥æ¨¡å—import syssys.path.append('.')import collectionsimport d2lzh_pytorch as d2limport zipfileimport timeimport torchimport torch.nn as nnimport torch.nn.functional as Ffrom torch.utils import datafrom torch import optim 12345678def preprocess_raw(text): text = text.replace('\\u202f', ' ').replace('\\xa0', ' ') out = '' for i, char in enumerate(text.lower()): if char in (',', '!', '.') and i &gt; 0 and text[i-1] != ' ': out += ' ' out += char return out åˆ†è¯1234567891011num_examples = 50000source, target = [], []for i, line in enumerate(text.split('\\n')): if i &gt; num_examples: break parts = line.split('\\t') if len(parts) &gt;= 2: source.append(parts[0].split(' ')) target.append(parts[1].split(' ')) source[0:3], target[0:3] å»ºç«‹è¯å…¸ 123456def build_vocab(tokens): tokens = [token for line in tokens for token in line] return d2l.data.base.Vocab(tokens, min_freq=3, use_special_tokens=True)src_vocab = build_vocab(source)len(src_vocab) è½½å…¥æ•°æ® 123456789101112131415161718192021def pad(line, max_len, padding_token): if len(line) &gt; max_len: return line[:max_len] return line + [padding_token] * (max_len - len(line))pad(src_vocab[source[0]], 10, src_vocab.pad)def build_array(lines, vocab, max_len, is_source): lines = [vocab[line] for line in lines] if not is_source: lines = [[vocab.bos] + line + [vocab.eos] for line in lines] array = torch.tensor([pad(line, max_len, vocab.pad) for line in lines]) valid_len = (array != vocab.pad).sum(1) #ç¬¬ä¸€ä¸ªç»´åº¦ return array, valid_lendef load_data_nmt(batch_size, max_len): # This function is saved in d2l. src_vocab, tgt_vocab = build_vocab(source), build_vocab(target) src_array, src_valid_len = build_array(source, src_vocab, max_len, True) tgt_array, tgt_valid_len = build_array(target, tgt_vocab, max_len, False) train_data = data.TensorDataset(src_array, src_valid_len, tgt_array, tgt_valid_len) train_iter = data.DataLoader(train_data, batch_size, shuffle=True) return src_vocab, tgt_vocab, train_iter encoder-decoderå¯ä»¥åº”ç”¨åœ¨å¯¹è¯ç³»ç»Ÿã€ç”Ÿæˆå¼ä»»åŠ¡ä¸­ã€‚ 12345678910111213141516171819202122232425262728class Encoder(nn.Module): def __init__(self, **kwargs): super(Encoder, self).__init__(**kwargs) def forward(self, X, *args): raise NotImplementedError class Decoder(nn.Module): def __init__(self, **kwargs): super(Decoder, self).__init__(**kwargs) def init_state(self, enc_outputs, *args): raise NotImplementedError def forward(self, X, state): raise NotImplementedError class EncoderDecoder(nn.Module): def __init__(self, encoder, decoder, **kwargs): super(EncoderDecoder, self).__init__(**kwargs) self.encoder = encoder self.decoder = decoder def forward(self, enc_X, dec_X, *args): enc_outputs = self.encoder(enc_X, *args) dec_state = self.decoder.init_state(enc_outputs, *args) return self.decoder(dec_X, dec_state) Seq2Seq 123456789101112131415161718192021222324252627282930313233343536373839class Seq2SeqEncoder(d2l.Encoder): def __init__(self, vocab_size, embed_size, num_hiddens, num_layers, dropout=0, **kwargs): super(Seq2SeqEncoder, self).__init__(**kwargs) self.num_hiddens=num_hiddens self.num_layers=num_layers self.embedding = nn.Embedding(vocab_size, embed_size) self.rnn = nn.LSTM(embed_size,num_hiddens, num_layers, dropout=dropout) def begin_state(self, batch_size, device): return [torch.zeros(size=(self.num_layers, batch_size, self.num_hiddens), device=device), torch.zeros(size=(self.num_layers, batch_size, self.num_hiddens), device=device)] def forward(self, X, *args): X = self.embedding(X) # X shape: (batch_size, seq_len, embed_size) X = X.transpose(0, 1) # RNN needs first axes to be time # state = self.begin_state(X.shape[1], device=X.device) out, state = self.rnn(X) # The shape of out is (seq_len, batch_size, num_hiddens). # state contains the hidden state and the memory cell # of the last time step, the shape is (num_layers, batch_size, num_hiddens) return out, state class Seq2SeqDecoder(d2l.Decoder): def __init__(self, vocab_size, embed_size, num_hiddens, num_layers, dropout=0, **kwargs): super(Seq2SeqDecoder, self).__init__(**kwargs) self.embedding = nn.Embedding(vocab_size, embed_size) self.rnn = nn.LSTM(embed_size,num_hiddens, num_layers, dropout=dropout) self.dense = nn.Linear(num_hiddens,vocab_size) def init_state(self, enc_outputs, *args): return enc_outputs[1] def forward(self, X, state): X = self.embedding(X).transpose(0, 1) out, state = self.rnn(X, state) # Make the batch to be the first dimension to simplify loss computation. out = self.dense(out).transpose(0, 1) return out, state Beamsearch","categories":[{"name":"deep_learning","slug":"deep-learning","permalink":"https://shyshy903.github.io/categories/deep-learning/"}],"tags":[{"name":"DL","slug":"DL","permalink":"https://shyshy903.github.io/tags/DL/"}]},{"title":"æ–‡æœ¬é¢„å¤„ç†ä¸è¯­è¨€æ¨¡å‹","slug":"Deep_learning/æ–‡æœ¬é¢„å¤„ç†ä¸è¯­è¨€æ¨¡å‹","date":"2020-02-13T16:00:00.000Z","updated":"2020-02-13T16:00:00.000Z","comments":true,"path":"2020/02/14/Deep_learning/æ–‡æœ¬é¢„å¤„ç†ä¸è¯­è¨€æ¨¡å‹/","link":"","permalink":"https://shyshy903.github.io/2020/02/14/Deep_learning/%E6%96%87%E6%9C%AC%E9%A2%84%E5%A4%84%E7%90%86%E4%B8%8E%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/","excerpt":"","text":"æ–‡æœ¬é¢„å¤„ç† è¯»å…¥æ–‡æœ¬ åˆ†è¯ å»ºç«‹å­—å…¸ï¼Œå°†æ¯ä¸ªè¯æ˜ å°„åˆ°ä¸€ä¸ªå”¯ä¸€çš„ç´¢å¼•ï¼ˆindexï¼‰ å°†æ–‡æœ¬ä»è¯çš„åºåˆ—è½¬æ¢ä¸ºç´¢å¼•çš„åºåˆ—ï¼Œæ–¹ä¾¿è¾“å…¥æ¨¡å‹ è¯»å…¥æ–‡æœ¬1234567891011import collectionsimport redef read_time_machine(): with open('/home/kesci/input/timemachine7163/timemachine.txt', 'r') as f: lines = [re.sub('[^a-z]+', ' ', line.strip().lower()) for line in f] return lineslines = read_time_machine()print('# sentences %d' % len(lines)) åˆ†è¯å°†ä¸€ä¸ªå¥å­åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªtoken 1234567891011def tokenize(sentences, token='word'): \"\"\"Split sentences into word or char tokens\"\"\" if token == 'word': return [sentence.split(' ') for sentence in sentences] elif token == 'char': return [list(sentence) for sentence in sentences] else: print('ERROR: unkown token type '+token)tokens = tokenize(lines)tokens[0:2] å»ºç«‹å­—å…¸123456789101112131415161718192021222324252627282930313233343536373839class Vocab(object): def __init__(self, tokens, min_freq=0, use_special_tokens=False): counter = count_corpus(tokens) # : self.token_freqs = list(counter.items()) self.idx_to_token = [] if use_special_tokens: # padding, begin of sentence, end of sentence, unknown self.pad, self.bos, self.eos, self.unk = (0, 1, 2, 3) self.idx_to_token += ['', '', '', ''] else: self.unk = 0 self.idx_to_token += [''] self.idx_to_token += [token for token, freq in self.token_freqs if freq &gt;= min_freq and token not in self.idx_to_token] self.token_to_idx = dict() for idx, token in enumerate(self.idx_to_token): self.token_to_idx[token] = idx def __len__(self): return len(self.idx_to_token) def __getitem__(self, tokens): if not isinstance(tokens, (list, tuple)): return self.token_to_idx.get(tokens, self.unk) return [self.__getitem__(token) for token in tokens] def to_tokens(self, indices): if not isinstance(indices, (list, tuple)): return self.idx_to_token[indices] return [self.idx_to_token[index] for index in indices]def count_corpus(sentences): tokens = [tk for st in sentences for tk in st] return collections.Counter(tokens) # è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œè®°å½•æ¯ä¸ªè¯çš„å‡ºç°æ¬¡æ•°# å°†è¯è½¬åŒ–ä¸ºç´¢å¼•for i in range(8, 10): print('words:', tokens[i]) print('indices:', vocab[tokens[i]]) ç”¨ç°æœ‰å·¥å…·åŒ…åˆ†è¯NLTK123456text = \"Mr. Chen doesn't agree with my suggestion.\"from nltk.tokenize import word_tokenizefrom nltk import datadata.path.append('/home/kesci/input/nltk_data3784/nltk_data')print(word_tokenize(text)) SPACY1234import spacynlp = spacy.load('en_core_web_sm')doc = nlp(text)print([token.text for token in doc]) è¯­è¨€æ¨¡å‹ï¼ˆåŸºäºç»Ÿè®¡çš„è¯­è¨€æ¨¡å‹ï¼‰ nå…ƒè¯­æ³• ç›¸é‚»é‡‡æ ·åœ¨ç›¸é‚»é‡‡æ ·ä¸­ï¼Œç›¸é‚»çš„ä¸¤ä¸ªéšæœºå°æ‰¹é‡åœ¨åŸå§‹åºåˆ—ä¸Šçš„ä½ç½®ç›¸æ¯—é‚» éšæœºé‡‡æ ·ä¸‹é¢çš„ä»£ç æ¯æ¬¡ä»æ•°æ®é‡Œéšæœºé‡‡æ ·ä¸€ä¸ªå°æ‰¹é‡ã€‚å…¶ä¸­æ‰¹é‡å¤§å°batch_sizeæ˜¯æ¯ä¸ªå°æ‰¹é‡çš„æ ·æœ¬æ•°ï¼Œnum_stepsæ˜¯æ¯ä¸ªæ ·æœ¬æ‰€åŒ…å«çš„æ—¶é—´æ­¥æ•°ã€‚ åœ¨éšæœºé‡‡æ ·ä¸­ï¼Œæ¯ä¸ªæ ·æœ¬æ˜¯åŸå§‹åºåˆ—ä¸Šä»»æ„æˆªå–çš„ä¸€æ®µåºåˆ—ï¼Œç›¸é‚»çš„ä¸¤ä¸ªéšæœºå°æ‰¹é‡åœ¨åŸå§‹åºåˆ—ä¸Šçš„ä½ç½®ä¸ä¸€å®šç›¸æ¯—é‚»ã€‚","categories":[{"name":"deep_learning","slug":"deep-learning","permalink":"https://shyshy903.github.io/categories/deep-learning/"}],"tags":[{"name":"DL","slug":"DL","permalink":"https://shyshy903.github.io/tags/DL/"}]},{"title":"å¾ªç¯ç¥ç»ç½‘ç»œ","slug":"Deep_learning/å¾ªç¯ç¥ç»ç½‘ç»œ","date":"2020-02-13T16:00:00.000Z","updated":"2020-02-13T16:00:00.000Z","comments":true,"path":"2020/02/14/Deep_learning/å¾ªç¯ç¥ç»ç½‘ç»œ/","link":"","permalink":"https://shyshy903.github.io/2020/02/14/Deep_learning/%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/","excerpt":"","text":"å¾ªç¯ç¥ç»ç½‘ç»œç®€å•å¾ªç¯ç¥ç»ç½‘ç»œçš„æ„é€  è£å‰ªæ¢¯åº¦å¾ªç¯ç¥ç»ç½‘ç»œä¸­è¾ƒå®¹æ˜“å‡ºç°æ¢¯åº¦è¡°å‡æˆ–æ¢¯åº¦çˆ†ç‚¸ï¼Œè¿™ä¼šå¯¼è‡´ç½‘ç»œå‡ ä¹æ— æ³•è®­ç»ƒã€‚è£å‰ªæ¢¯åº¦ï¼ˆclip gradientï¼‰æ˜¯ä¸€ç§åº”å¯¹æ¢¯åº¦çˆ†ç‚¸çš„æ–¹æ³•ã€‚å‡è®¾æˆ‘ä»¬æŠŠæ‰€æœ‰æ¨¡å‹å‚æ•°çš„æ¢¯åº¦æ‹¼æ¥æˆä¸€ä¸ªå‘é‡ g ï¼Œå¹¶è®¾è£å‰ªçš„é˜ˆå€¼æ˜¯ Î¸ ã€‚è£å‰ªåçš„æ¢¯åº¦ å¾ªç¯ç¥ç»ç½‘ç»œçš„pytorchå®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import torchimport torch.nn as nnimport timeimport mathimport syssys.path.append(\"/home/kesci/input\")import d2l_jay9460 as d2l(corpus_indices, char_to_idx, idx_to_char, vocab_size) = d2l.load_data_jay_lyrics()device = torch.device('cuda' if torch.cuda.is_available() else 'cpu')rnn_layer = nn.RNN(input_size=vocab_size, hidden_size=num_hiddens)num_steps, batch_size = 35, 2X = torch.rand(num_steps, batch_size, vocab_size)state = NoneY, state_new = rnn_layer(X, state)print(Y.shape, state_new.shape)class RNNModel(nn.Module): def __init__(self, rnn_layer, vocab_size): super(RNNModel, self).__init__() self.rnn = rnn_layer self.hidden_size = rnn_layer.hidden_size * (2 if rnn_layer.bidirectional else 1) self.vocab_size = vocab_size self.dense = nn.Linear(self.hidden_size, vocab_size) def forward(self, inputs, state): # inputs.shape: (batch_size, num_steps) X = to_onehot(inputs, vocab_size) X = torch.stack(X) # X.shape: (num_steps, batch_size, vocab_size) hiddens, state = self.rnn(X, state) hiddens = hiddens.view(-1, hiddens.shape[-1]) # hiddens.shape: (num_steps * batch_size, hidden_size) output = self.dense(hiddens) return output, state def predict_rnn_pytorch(prefix, num_chars, model, vocab_size, device, idx_to_char, char_to_idx): state = None output = [char_to_idx[prefix[0]]] # outputè®°å½•prefixåŠ ä¸Šé¢„æµ‹çš„num_charsä¸ªå­—ç¬¦ for t in range(num_chars + len(prefix) - 1): X = torch.tensor([output[-1]], device=device).view(1, 1) (Y, state) = model(X, state) # å‰å‘è®¡ç®—ä¸éœ€è¦ä¼ å…¥æ¨¡å‹å‚æ•° if t &lt; len(prefix) - 1: output.append(char_to_idx[prefix[t + 1]]) else: output.append(Y.argmax(dim=1).item()) return ''.join([idx_to_char[i] for i in output]) 12model = RNNModel(rnn_layer, vocab_size).to(device)predict_rnn_pytorch('åˆ†å¼€', 10, model, vocab_size, device, idx_to_char, char_to_idx) 1234567891011121314151617181920212223242526272829303132333435363738def train_and_predict_rnn_pytorch(model, num_hiddens, vocab_size, device, corpus_indices, idx_to_char, char_to_idx, num_epochs, num_steps, lr, clipping_theta, batch_size, pred_period, pred_len, prefixes): loss = nn.CrossEntropyLoss() optimizer = torch.optim.Adam(model.parameters(), lr=lr) model.to(device) for epoch in range(num_epochs): l_sum, n, start = 0.0, 0, time.time() data_iter = d2l.data_iter_consecutive(corpus_indices, batch_size, num_steps, device) # ç›¸é‚»é‡‡æ · state = None for X, Y in data_iter: if state is not None: # ä½¿ç”¨detachå‡½æ•°ä»è®¡ç®—å›¾åˆ†ç¦»éšè—çŠ¶æ€ if isinstance (state, tuple): # LSTM, state:(h, c) state[0].detach_() state[1].detach_() else: state.detach_() (output, state) = model(X, state) # output.shape: (num_steps * batch_size, vocab_size) y = torch.flatten(Y.T) l = loss(output, y.long()) optimizer.zero_grad() l.backward() grad_clipping(model.parameters(), clipping_theta, device) optimizer.step() l_sum += l.item() * y.shape[0] n += y.shape[0] if (epoch + 1) % pred_period == 0: print('epoch %d, perplexity %f, time %.2f sec' % ( epoch + 1, math.exp(l_sum / n), time.time() - start)) for prefix in prefixes: print(' -', predict_rnn_pytorch( prefix, pred_len, model, vocab_size, device, idx_to_char, char_to_idx)) 123456num_epochs, batch_size, lr, clipping_theta = 250, 32, 1e-3, 1e-2pred_period, pred_len, prefixes = 50, 50, ['åˆ†å¼€', 'ä¸åˆ†å¼€']train_and_predict_rnn_pytorch(model, num_hiddens, vocab_size, device, corpus_indices, idx_to_char, char_to_idx, num_epochs, num_steps, lr, clipping_theta, batch_size, pred_period, pred_len, prefixes) RNNå­˜åœ¨çš„é—®é¢˜ï¼šæ¢¯åº¦è¾ƒå®¹æ˜“å‡ºç°è¡°å‡æˆ–çˆ†ç‚¸ï¼ˆBPTTï¼‰â»”æ§å¾ªç¯ç¥ç»â½¹ç»œï¼šæ•æ‰æ—¶é—´åºåˆ—ä¸­æ—¶é—´æ­¥è·ç¦»è¾ƒâ¼¤çš„ä¾èµ–å…³ç³» GRU é‡ç½®â»”æœ‰åŠ©äºæ•æ‰æ—¶é—´åºåˆ—â¾¥çŸ­æœŸçš„ä¾èµ–å…³ç³»ï¼› æ›´æ–°â»”æœ‰åŠ©äºæ•æ‰æ—¶é—´åºåˆ—â¾¥â»“æœŸçš„ä¾èµ–å…³ç³» 1234567891011num_hiddens=256num_epochs, num_steps, batch_size, lr, clipping_theta = 160, 35, 32, 1e2, 1e-2pred_period, pred_len, prefixes = 40, 50, ['åˆ†å¼€', 'ä¸åˆ†å¼€']lr = 1e-2 # æ³¨æ„è°ƒæ•´å­¦ä¹ ç‡gru_layer = nn.GRU(input_size=vocab_size, hidden_size=num_hiddens)model = d2l.RNNModel(gru_layer, vocab_size).to(device)d2l.train_and_predict_rnn_pytorch(model, num_hiddens, vocab_size, device, corpus_indices, idx_to_char, char_to_idx, num_epochs, num_steps, lr, clipping_theta, batch_size, pred_period, pred_len, prefixes) LSTM é•¿çŸ­æœŸè®°å¿†long short-term memory : é—å¿˜é—¨:æ§åˆ¶ä¸Šä¸€æ—¶é—´æ­¥çš„è®°å¿†ç»†èƒ è¾“å…¥é—¨:æ§åˆ¶å½“å‰æ—¶é—´æ­¥çš„è¾“å…¥ è¾“å‡ºé—¨:æ§åˆ¶ä»è®°å¿†ç»†èƒåˆ°éšè—çŠ¶æ€ è®°å¿†ç»†èƒï¼šâ¼€ç§ç‰¹æ®Šçš„éšè—çŠ¶æ€çš„ä¿¡æ¯çš„æµåŠ¨ 1234567891011num_hiddens=256num_epochs, num_steps, batch_size, lr, clipping_theta = 160, 35, 32, 1e2, 1e-2pred_period, pred_len, prefixes = 40, 50, ['åˆ†å¼€', 'ä¸åˆ†å¼€']lr = 1e-2 # æ³¨æ„è°ƒæ•´å­¦ä¹ ç‡lstm_layer = nn.LSTM(input_size=vocab_size, hidden_size=num_hiddens)model = d2l.RNNModel(lstm_layer, vocab_size)d2l.train_and_predict_rnn_pytorch(model, num_hiddens, vocab_size, device, corpus_indices, idx_to_char, char_to_idx, num_epochs, num_steps, lr, clipping_theta, batch_size, pred_period, pred_len, prefixes) æ·±åº¦å¾ªç¯ç½‘ç»œé€šè¿‡num_layersæ¥è¿›è¡Œæ§åˆ¶ 123456789101112num_hiddens=256num_epochs, num_steps, batch_size, lr, clipping_theta = 160, 35, 32, 1e2, 1e-2pred_period, pred_len, prefixes = 40, 50, ['åˆ†å¼€', 'ä¸åˆ†å¼€']lr = 1e-2 # æ³¨æ„è°ƒæ•´å­¦ä¹ ç‡gru_layer = nn.LSTM(input_size=vocab_size, hidden_size=num_hiddens,num_layers=2)model = d2l.RNNModel(gru_layer, vocab_size).to(device)d2l.train_and_predict_rnn_pytorch(model, num_hiddens, vocab_size, device, corpus_indices, idx_to_char, char_to_idx, num_epochs, num_steps, lr, clipping_theta, batch_size, pred_period, pred_len, prefixes) åŒå‘å¾ªç¯ç½‘ç»œ é€šè¿‡å‚æ•°bidirectional=Trueæ¥è¿›è¡Œæ§åˆ¶ 123456789101112num_hiddens=128num_epochs, num_steps, batch_size, lr, clipping_theta = 160, 35, 32, 1e-2, 1e-2pred_period, pred_len, prefixes = 40, 50, ['åˆ†å¼€', 'ä¸åˆ†å¼€']lr = 1e-2 # æ³¨æ„è°ƒæ•´å­¦ä¹ ç‡gru_layer = nn.GRU(input_size=vocab_size, hidden_size=num_hiddens,bidirectional=True)model = d2l.RNNModel(gru_layer, vocab_size).to(device)d2l.train_and_predict_rnn_pytorch(model, num_hiddens, vocab_size, device, corpus_indices, idx_to_char, char_to_idx, num_epochs, num_steps, lr, clipping_theta, batch_size, pred_period, pred_len, prefixes)","categories":[{"name":"deep_learning","slug":"deep-learning","permalink":"https://shyshy903.github.io/categories/deep-learning/"}],"tags":[{"name":"DL","slug":"DL","permalink":"https://shyshy903.github.io/tags/DL/"}]},{"title":"Softmaxä¸åˆ†ç±»æ¨¡å‹","slug":"Deep_learning/Softmaxä¸åˆ†ç±»æ¨¡å‹","date":"2020-02-12T16:00:00.000Z","updated":"2020-02-12T16:00:00.000Z","comments":true,"path":"2020/02/13/Deep_learning/Softmaxä¸åˆ†ç±»æ¨¡å‹/","link":"","permalink":"https://shyshy903.github.io/2020/02/13/Deep_learning/Softmax%E4%B8%8E%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9E%8B/","excerpt":"","text":"softmaxå›å½’å‰å‡ èŠ‚ä»‹ç»çš„çº¿æ€§å›å½’æ¨¡å‹é€‚ç”¨äºè¾“å‡ºä¸ºè¿ç»­å€¼çš„æƒ…æ™¯ã€‚åœ¨å¦ä¸€ç±»æƒ…æ™¯ä¸­ï¼Œæ¨¡å‹è¾“å‡ºå¯ä»¥æ˜¯ä¸€ä¸ªåƒå›¾åƒç±»åˆ«è¿™æ ·çš„ç¦»æ•£å€¼ã€‚å¯¹äºè¿™æ ·çš„ç¦»æ•£å€¼é¢„æµ‹é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¸å¦‚softmaxå›å½’åœ¨å†…çš„åˆ†ç±»æ¨¡å‹ã€‚å’Œçº¿æ€§å›å½’ä¸åŒï¼Œsoftmaxå›å½’çš„è¾“å‡ºå•å…ƒä»ä¸€ä¸ªå˜æˆäº†å¤šä¸ªï¼Œä¸”å¼•å…¥äº†softmaxè¿ç®—ä½¿è¾“å‡ºæ›´é€‚åˆç¦»æ•£å€¼çš„é¢„æµ‹å’Œè®­ç»ƒã€‚æœ¬èŠ‚ä»¥softmaxå›å½’æ¨¡å‹ä¸ºä¾‹ï¼Œä»‹ç»ç¥ç»ç½‘ç»œä¸­çš„åˆ†ç±»æ¨¡å‹ã€‚ åˆ†ç±»é—®é¢˜è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªç®€å•çš„å›¾åƒåˆ†ç±»é—®é¢˜ï¼Œå…¶è¾“å…¥å›¾åƒçš„é«˜å’Œå®½å‡ä¸º2åƒç´ ï¼Œä¸”è‰²å½©ä¸ºç°åº¦ã€‚è¿™æ ·æ¯ä¸ªåƒç´ å€¼éƒ½å¯ä»¥ç”¨ä¸€ä¸ªæ ‡é‡è¡¨ç¤ºã€‚æˆ‘ä»¬å°†å›¾åƒä¸­çš„4åƒç´ åˆ†åˆ«è®°ä¸º$x_1, x_2, x_3, x_4$ã€‚å‡è®¾è®­ç»ƒæ•°æ®é›†ä¸­å›¾åƒçš„çœŸå®æ ‡ç­¾ä¸ºç‹—ã€çŒ«æˆ–é¸¡ï¼ˆå‡è®¾å¯ä»¥ç”¨4åƒç´ è¡¨ç¤ºå‡ºè¿™3ç§åŠ¨ç‰©ï¼‰ï¼Œè¿™äº›æ ‡ç­¾åˆ†åˆ«å¯¹åº”ç¦»æ•£å€¼$y_1, y_2, y_3$ã€‚ æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ç¦»æ•£çš„æ•°å€¼æ¥è¡¨ç¤ºç±»åˆ«ï¼Œä¾‹å¦‚$y_1=1, y_2=2, y_3=3$ã€‚å¦‚æ­¤ï¼Œä¸€å¼ å›¾åƒçš„æ ‡ç­¾ä¸º1ã€2å’Œ3è¿™3ä¸ªæ•°å€¼ä¸­çš„ä¸€ä¸ªã€‚è™½ç„¶æˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨å›å½’æ¨¡å‹æ¥è¿›è¡Œå»ºæ¨¡ï¼Œå¹¶å°†é¢„æµ‹å€¼å°±è¿‘å®šç‚¹åŒ–åˆ°1ã€2å’Œ3è¿™3ä¸ªç¦»æ•£å€¼ä¹‹ä¸€ï¼Œä½†è¿™ç§è¿ç»­å€¼åˆ°ç¦»æ•£å€¼çš„è½¬åŒ–é€šå¸¸ä¼šå½±å“åˆ°åˆ†ç±»è´¨é‡ã€‚å› æ­¤æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨æ›´åŠ é€‚åˆç¦»æ•£å€¼è¾“å‡ºçš„æ¨¡å‹æ¥è§£å†³åˆ†ç±»é—®é¢˜ã€‚ softmaxå›å½’æ¨¡å‹softmaxå›å½’è·Ÿçº¿æ€§å›å½’ä¸€æ ·å°†è¾“å…¥ç‰¹å¾ä¸æƒé‡åšçº¿æ€§å åŠ ã€‚ä¸çº¿æ€§å›å½’çš„ä¸€ä¸ªä¸»è¦ä¸åŒåœ¨äºï¼Œsoftmaxå›å½’çš„è¾“å‡ºå€¼ä¸ªæ•°ç­‰äºæ ‡ç­¾é‡Œçš„ç±»åˆ«æ•°ã€‚å› ä¸ºä¸€å…±æœ‰4ç§ç‰¹å¾å’Œ3ç§è¾“å‡ºåŠ¨ç‰©ç±»åˆ«ï¼Œæ‰€ä»¥æƒé‡åŒ…å«12ä¸ªæ ‡é‡ï¼ˆå¸¦ä¸‹æ ‡çš„$w$ï¼‰ã€åå·®åŒ…å«3ä¸ªæ ‡é‡ï¼ˆå¸¦ä¸‹æ ‡çš„$b$ï¼‰ï¼Œä¸”å¯¹æ¯ä¸ªè¾“å…¥è®¡ç®—$o_1, o_2, o_3$è¿™3ä¸ªè¾“å‡ºï¼š \\begin{aligned} o_1 &= x_1 w_{11} + x_2 w_{21} + x_3 w_{31} + x_4 w_{41} + b_1,\\\\ o_2 &= x_1 w_{12} + x_2 w_{22} + x_3 w_{32} + x_4 w_{42} + b_2,\\\\ o_3 &= x_1 w_{13} + x_2 w_{23} + x_3 w_{33} + x_4 w_{43} + b_3. \\end{aligned}å›¾3.2ç”¨ç¥ç»ç½‘ç»œå›¾æç»˜äº†ä¸Šé¢çš„è®¡ç®—ã€‚softmaxå›å½’åŒçº¿æ€§å›å½’ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå•å±‚ç¥ç»ç½‘ç»œã€‚ç”±äºæ¯ä¸ªè¾“å‡º$o_1, o_2, o_3$çš„è®¡ç®—éƒ½è¦ä¾èµ–äºæ‰€æœ‰çš„è¾“å…¥$x_1, x_2, x_3, x_4$ï¼Œsoftmaxå›å½’çš„è¾“å‡ºå±‚ä¹Ÿæ˜¯ä¸€ä¸ªå…¨è¿æ¥å±‚ã€‚ softmaxè¿ç®—æ—¢ç„¶åˆ†ç±»é—®é¢˜éœ€è¦å¾—åˆ°ç¦»æ•£çš„é¢„æµ‹è¾“å‡ºï¼Œä¸€ä¸ªç®€å•çš„åŠæ³•æ˜¯å°†è¾“å‡ºå€¼$o_i$å½“ä½œé¢„æµ‹ç±»åˆ«æ˜¯$i$çš„ç½®ä¿¡åº¦ï¼Œå¹¶å°†å€¼æœ€å¤§çš„è¾“å‡ºæ‰€å¯¹åº”çš„ç±»ä½œä¸ºé¢„æµ‹è¾“å‡ºï¼Œå³è¾“å‡º$\\operatorname*{argmax}_i o_i$ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ$o_1,o_2,o_3$åˆ†åˆ«ä¸º$0.1,10,0.1$ï¼Œç”±äº$o_2$æœ€å¤§ï¼Œé‚£ä¹ˆé¢„æµ‹ç±»åˆ«ä¸º2ï¼Œå…¶ä»£è¡¨çŒ«ã€‚ ç„¶è€Œï¼Œç›´æ¥ä½¿ç”¨è¾“å‡ºå±‚çš„è¾“å‡ºæœ‰ä¸¤ä¸ªé—®é¢˜ã€‚ä¸€æ–¹é¢ï¼Œç”±äºè¾“å‡ºå±‚çš„è¾“å‡ºå€¼çš„èŒƒå›´ä¸ç¡®å®šï¼Œæˆ‘ä»¬éš¾ä»¥ç›´è§‚ä¸Šåˆ¤æ–­è¿™äº›å€¼çš„æ„ä¹‰ã€‚ä¾‹å¦‚ï¼Œåˆšæ‰ä¸¾çš„ä¾‹å­ä¸­çš„è¾“å‡ºå€¼10è¡¨ç¤ºâ€œå¾ˆç½®ä¿¡â€å›¾åƒç±»åˆ«ä¸ºçŒ«ï¼Œå› ä¸ºè¯¥è¾“å‡ºå€¼æ˜¯å…¶ä»–ä¸¤ç±»çš„è¾“å‡ºå€¼çš„100å€ã€‚ä½†å¦‚æœ$o_1=o_3=10^3$ï¼Œé‚£ä¹ˆè¾“å‡ºå€¼10å´åˆè¡¨ç¤ºå›¾åƒç±»åˆ«ä¸ºçŒ«çš„æ¦‚ç‡å¾ˆä½ã€‚å¦ä¸€æ–¹é¢ï¼Œç”±äºçœŸå®æ ‡ç­¾æ˜¯ç¦»æ•£å€¼ï¼Œè¿™äº›ç¦»æ•£å€¼ä¸ä¸ç¡®å®šèŒƒå›´çš„è¾“å‡ºå€¼ä¹‹é—´çš„è¯¯å·®éš¾ä»¥è¡¡é‡ã€‚ softmaxè¿ç®—ç¬¦ï¼ˆsoftmax operatorï¼‰è§£å†³äº†ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ã€‚å®ƒé€šè¿‡ä¸‹å¼å°†è¾“å‡ºå€¼å˜æ¢æˆå€¼ä¸ºæ­£ä¸”å’Œä¸º1çš„æ¦‚ç‡åˆ†å¸ƒï¼š \\hat{y}_1, \\hat{y}_2, \\hat{y}_3 = \\text{softmax}(o_1, o_2, o_3),å…¶ä¸­ \\hat{y}_1 = \\frac{ \\exp(o_1)}{\\sum_{i=1}^3 \\exp(o_i)},\\quad \\hat{y}_2 = \\frac{ \\exp(o_2)}{\\sum_{i=1}^3 \\exp(o_i)},\\quad \\hat{y}_3 = \\frac{ \\exp(o_3)}{\\sum_{i=1}^3 \\exp(o_i)}.å®¹æ˜“çœ‹å‡º$\\hat{y}_1 + \\hat{y}_2 + \\hat{y}_3 = 1$ä¸”$0 \\leq \\hat{y}_1, \\hat{y}_2, \\hat{y}_3 \\leq 1$ï¼Œå› æ­¤$\\hat{y}_1, \\hat{y}_2, \\hat{y}_3$æ˜¯ä¸€ä¸ªåˆæ³•çš„æ¦‚ç‡åˆ†å¸ƒã€‚è¿™æ—¶å€™ï¼Œå¦‚æœ$\\hat{y}_2=0.8$ï¼Œä¸ç®¡$\\hat{y}_1$å’Œ$\\hat{y}_3$çš„å€¼æ˜¯å¤šå°‘ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“å›¾åƒç±»åˆ«ä¸ºçŒ«çš„æ¦‚ç‡æ˜¯80%ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æ³¨æ„åˆ° \\operatorname*{argmax}_i o_i = \\operatorname*{argmax}_i \\hat y_i,å› æ­¤softmaxè¿ç®—ä¸æ”¹å˜é¢„æµ‹ç±»åˆ«è¾“å‡ºã€‚ å•æ ·æœ¬åˆ†ç±»çš„çŸ¢é‡è®¡ç®—è¡¨è¾¾å¼ä¸ºäº†æé«˜è®¡ç®—æ•ˆç‡ï¼Œæˆ‘ä»¬å¯ä»¥å°†å•æ ·æœ¬åˆ†ç±»é€šè¿‡çŸ¢é‡è®¡ç®—æ¥è¡¨è¾¾ã€‚åœ¨ä¸Šé¢çš„å›¾åƒåˆ†ç±»é—®é¢˜ä¸­ï¼Œå‡è®¾softmaxå›å½’çš„æƒé‡å’Œåå·®å‚æ•°åˆ†åˆ«ä¸º \\boldsymbol{W} = \\begin{bmatrix} w_{11} & w_{12} & w_{13} \\\\ w_{21} & w_{22} & w_{23} \\\\ w_{31} & w_{32} & w_{33} \\\\ w_{41} & w_{42} & w_{43} \\end{bmatrix},\\quad \\boldsymbol{b} = \\begin{bmatrix} b_1 & b_2 & b_3 \\end{bmatrix},è®¾é«˜å’Œå®½åˆ†åˆ«ä¸º2ä¸ªåƒç´ çš„å›¾åƒæ ·æœ¬$i$çš„ç‰¹å¾ä¸º \\boldsymbol{x}^{(i)} = \\begin{bmatrix}x_1^{(i)} & x_2^{(i)} & x_3^{(i)} & x_4^{(i)}\\end{bmatrix},è¾“å‡ºå±‚çš„è¾“å‡ºä¸º \\boldsymbol{o}^{(i)} = \\begin{bmatrix}o_1^{(i)} & o_2^{(i)} & o_3^{(i)}\\end{bmatrix},é¢„æµ‹ä¸ºç‹—ã€çŒ«æˆ–é¸¡çš„æ¦‚ç‡åˆ†å¸ƒä¸º \\boldsymbol{\\hat{y}}^{(i)} = \\begin{bmatrix}\\hat{y}_1^{(i)} & \\hat{y}_2^{(i)} & \\hat{y}_3^{(i)}\\end{bmatrix}.softmaxå›å½’å¯¹æ ·æœ¬$i$åˆ†ç±»çš„çŸ¢é‡è®¡ç®—è¡¨è¾¾å¼ä¸º \\begin{aligned} \\boldsymbol{o}^{(i)} &= \\boldsymbol{x}^{(i)} \\boldsymbol{W} + \\boldsymbol{b},\\\\ \\boldsymbol{\\hat{y}}^{(i)} &= \\text{softmax}(\\boldsymbol{o}^{(i)}). \\end{aligned}å°æ‰¹é‡æ ·æœ¬åˆ†ç±»çš„çŸ¢é‡è®¡ç®—è¡¨è¾¾å¼ä¸ºäº†è¿›ä¸€æ­¥æå‡è®¡ç®—æ•ˆç‡ï¼Œæˆ‘ä»¬é€šå¸¸å¯¹å°æ‰¹é‡æ•°æ®åšçŸ¢é‡è®¡ç®—ã€‚å¹¿ä¹‰ä¸Šè®²ï¼Œç»™å®šä¸€ä¸ªå°æ‰¹é‡æ ·æœ¬ï¼Œå…¶æ‰¹é‡å¤§å°ä¸º$n$ï¼Œè¾“å…¥ä¸ªæ•°ï¼ˆç‰¹å¾æ•°ï¼‰ä¸º$d$ï¼Œè¾“å‡ºä¸ªæ•°ï¼ˆç±»åˆ«æ•°ï¼‰ä¸º$q$ã€‚è®¾æ‰¹é‡ç‰¹å¾ä¸º$\\boldsymbol{X} \\in \\mathbb{R}^{n \\times d}$ã€‚å‡è®¾softmaxå›å½’çš„æƒé‡å’Œåå·®å‚æ•°åˆ†åˆ«ä¸º$\\boldsymbol{W} \\in \\mathbb{R}^{d \\times q}$å’Œ$\\boldsymbol{b} \\in \\mathbb{R}^{1 \\times q}$ã€‚softmaxå›å½’çš„çŸ¢é‡è®¡ç®—è¡¨è¾¾å¼ä¸º \\begin{aligned} \\boldsymbol{O} &= \\boldsymbol{X} \\boldsymbol{W} + \\boldsymbol{b},\\\\ \\boldsymbol{\\hat{Y}} &= \\text{softmax}(\\boldsymbol{O}), \\end{aligned}å…¶ä¸­çš„åŠ æ³•è¿ç®—ä½¿ç”¨äº†å¹¿æ’­æœºåˆ¶ï¼Œ$\\boldsymbol{O}, \\boldsymbol{\\hat{Y}} \\in \\mathbb{R}^{n \\times q}$ä¸”è¿™ä¸¤ä¸ªçŸ©é˜µçš„ç¬¬$i$è¡Œåˆ†åˆ«ä¸ºæ ·æœ¬$i$çš„è¾“å‡º$\\boldsymbol{o}^{(i)}$å’Œæ¦‚ç‡åˆ†å¸ƒ$\\boldsymbol{\\hat{y}}^{(i)}$ã€‚ äº¤å‰ç†µæŸå¤±å‡½æ•°å‰é¢æåˆ°ï¼Œä½¿ç”¨softmaxè¿ç®—åå¯ä»¥æ›´æ–¹ä¾¿åœ°ä¸ç¦»æ•£æ ‡ç­¾è®¡ç®—è¯¯å·®ã€‚æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œsoftmaxè¿ç®—å°†è¾“å‡ºå˜æ¢æˆä¸€ä¸ªåˆæ³•çš„ç±»åˆ«é¢„æµ‹åˆ†å¸ƒã€‚å®é™…ä¸Šï¼ŒçœŸå®æ ‡ç­¾ä¹Ÿå¯ä»¥ç”¨ç±»åˆ«åˆ†å¸ƒè¡¨è¾¾ï¼šå¯¹äºæ ·æœ¬$i$ï¼Œæˆ‘ä»¬æ„é€ å‘é‡$\\boldsymbol{y}^{(i)}\\in \\mathbb{R}^{q}$ ï¼Œä½¿å…¶ç¬¬$y^{(i)}$ï¼ˆæ ·æœ¬$i$ç±»åˆ«çš„ç¦»æ•£æ•°å€¼ï¼‰ä¸ªå…ƒç´ ä¸º1ï¼Œå…¶ä½™ä¸º0ã€‚è¿™æ ·æˆ‘ä»¬çš„è®­ç»ƒç›®æ ‡å¯ä»¥è®¾ä¸ºä½¿é¢„æµ‹æ¦‚ç‡åˆ†å¸ƒ$\\boldsymbol{\\hat y}^{(i)}$å°½å¯èƒ½æ¥è¿‘çœŸå®çš„æ ‡ç­¾æ¦‚ç‡åˆ†å¸ƒ$\\boldsymbol{y}^{(i)}$ã€‚ æˆ‘ä»¬å¯ä»¥åƒçº¿æ€§å›å½’é‚£æ ·ä½¿ç”¨å¹³æ–¹æŸå¤±å‡½æ•°$|\\boldsymbol{\\hat y}^{(i)}-\\boldsymbol{y}^{(i)}|^2/2$ã€‚ç„¶è€Œï¼Œæƒ³è¦é¢„æµ‹åˆ†ç±»ç»“æœæ­£ç¡®ï¼Œæˆ‘ä»¬å…¶å®å¹¶ä¸éœ€è¦é¢„æµ‹æ¦‚ç‡å®Œå…¨ç­‰äºæ ‡ç­¾æ¦‚ç‡ã€‚ä¾‹å¦‚ï¼Œåœ¨å›¾åƒåˆ†ç±»çš„ä¾‹å­é‡Œï¼Œå¦‚æœ$y^{(i)}=3$ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦$\\hat{y}^{(i)}_3$æ¯”å…¶ä»–ä¸¤ä¸ªé¢„æµ‹å€¼$\\hat{y}^{(i)}_1$å’Œ$\\hat{y}^{(i)}_2$å¤§å°±è¡Œäº†ã€‚å³ä½¿$\\hat{y}^{(i)}_3$å€¼ä¸º0.6ï¼Œä¸ç®¡å…¶ä»–ä¸¤ä¸ªé¢„æµ‹å€¼ä¸ºå¤šå°‘ï¼Œç±»åˆ«é¢„æµ‹å‡æ­£ç¡®ã€‚è€Œå¹³æ–¹æŸå¤±åˆ™è¿‡äºä¸¥æ ¼ï¼Œä¾‹å¦‚$\\hat y^{(i)}_1=\\hat y^{(i)}_2=0.2$æ¯”$\\hat y^{(i)}_1=0, \\hat y^{(i)}_2=0.4$çš„æŸå¤±è¦å°å¾ˆå¤šï¼Œè™½ç„¶ä¸¤è€…éƒ½æœ‰åŒæ ·æ­£ç¡®çš„åˆ†ç±»é¢„æµ‹ç»“æœã€‚ æ”¹å–„ä¸Šè¿°é—®é¢˜çš„ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨æ›´é€‚åˆè¡¡é‡ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒå·®å¼‚çš„æµ‹é‡å‡½æ•°ã€‚å…¶ä¸­ï¼Œäº¤å‰ç†µï¼ˆcross entropyï¼‰æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„è¡¡é‡æ–¹æ³•ï¼š H\\left(\\boldsymbol y^{(i)}, \\boldsymbol {\\hat y}^{(i)}\\right ) = -\\sum_{j=1}^q y_j^{(i)} \\log \\hat y_j^{(i)},å…¶ä¸­å¸¦ä¸‹æ ‡çš„$y_j^{(i)}$æ˜¯å‘é‡$\\boldsymbol y^{(i)}$ä¸­é0å³1çš„å…ƒç´ ï¼Œéœ€è¦æ³¨æ„å°†å®ƒä¸æ ·æœ¬$i$ç±»åˆ«çš„ç¦»æ•£æ•°å€¼ï¼Œå³ä¸å¸¦ä¸‹æ ‡çš„$y^{(i)}$åŒºåˆ†ã€‚åœ¨ä¸Šå¼ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“å‘é‡$\\boldsymbol y^{(i)}$ä¸­åªæœ‰ç¬¬$y^{(i)}$ä¸ªå…ƒç´ $y^{(i)}_{y^{(i)}}$ä¸º1ï¼Œå…¶ä½™å…¨ä¸º0ï¼Œäºæ˜¯$H(\\boldsymbol y^{(i)}, \\boldsymbol {\\hat y}^{(i)}) = -\\log \\hat y_{y^{(i)}}^{(i)}$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäº¤å‰ç†µåªå…³å¿ƒå¯¹æ­£ç¡®ç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡ï¼Œå› ä¸ºåªè¦å…¶å€¼è¶³å¤Ÿå¤§ï¼Œå°±å¯ä»¥ç¡®ä¿åˆ†ç±»ç»“æœæ­£ç¡®ã€‚å½“ç„¶ï¼Œé‡åˆ°ä¸€ä¸ªæ ·æœ¬æœ‰å¤šä¸ªæ ‡ç­¾æ—¶ï¼Œä¾‹å¦‚å›¾åƒé‡Œå«æœ‰ä¸æ­¢ä¸€ä¸ªç‰©ä½“æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½åšè¿™ä¸€æ­¥ç®€åŒ–ã€‚ä½†å³ä¾¿å¯¹äºè¿™ç§æƒ…å†µï¼Œäº¤å‰ç†µåŒæ ·åªå…³å¿ƒå¯¹å›¾åƒä¸­å‡ºç°çš„ç‰©ä½“ç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡ã€‚ å‡è®¾è®­ç»ƒæ•°æ®é›†çš„æ ·æœ¬æ•°ä¸º$n$ï¼Œäº¤å‰ç†µæŸå¤±å‡½æ•°å®šä¹‰ä¸º \\ell(\\boldsymbol{\\Theta}) = \\frac{1}{n} \\sum_{i=1}^n H\\left(\\boldsymbol y^{(i)}, \\boldsymbol {\\hat y}^{(i)}\\right ),å…¶ä¸­$\\boldsymbol{\\Theta}$ä»£è¡¨æ¨¡å‹å‚æ•°ã€‚åŒæ ·åœ°ï¼Œå¦‚æœæ¯ä¸ªæ ·æœ¬åªæœ‰ä¸€ä¸ªæ ‡ç­¾ï¼Œé‚£ä¹ˆäº¤å‰ç†µæŸå¤±å¯ä»¥ç®€å†™æˆ$\\ell(\\boldsymbol{\\Theta}) = -(1/n) \\sum_{i=1}^n \\log \\hat y_{y^{(i)}}^{(i)}$ã€‚ä»å¦ä¸€ä¸ªè§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬çŸ¥é“æœ€å°åŒ–$\\ell(\\boldsymbol{\\Theta})$ç­‰ä»·äºæœ€å¤§åŒ–$\\exp(-n\\ell(\\boldsymbol{\\Theta}))=\\prod_{i=1}^n \\hat y_{y^{(i)}}^{(i)}$ï¼Œå³æœ€å°åŒ–äº¤å‰ç†µæŸå¤±å‡½æ•°ç­‰ä»·äºæœ€å¤§åŒ–è®­ç»ƒæ•°æ®é›†æ‰€æœ‰æ ‡ç­¾ç±»åˆ«çš„è”åˆé¢„æµ‹æ¦‚ç‡ã€‚ softmaxçš„pytorchå®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253# åŠ è½½å„ç§åŒ…æˆ–è€…æ¨¡å—import torchfrom torch import nnfrom torch.nn import initimport numpy as npimport syssys.path.append(r\"D:\\Documents\\learning\")# import d2lzh as d2lprint(torch.__version__)# ç”Ÿæˆæ•°æ®é›†batch_size = 256# train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size, root='/home/kesci/input/FashionMNIST2065')# å®šä¹‰ç½‘ç»œæ¨¡å‹num_inputs = 784num_outputs = 10class LinearNet(nn.Module): def __init__(self, num_inputs, num_outputs): super(LinearNet, self).__init__() self.linear = nn.Linear(num_inputs, num_outputs) def forward(self, x): # x çš„å½¢çŠ¶: (batch, 1, 28, 28) y = self.linear(x.view(x.shape[0], -1)) return y # net = LinearNet(num_inputs, num_outputs)class FlattenLayer(nn.Module): def __init__(self): super(FlattenLayer, self).__init__() def forward(self, x): # x çš„å½¢çŠ¶: (batch, *, *, ...) return x.view(x.shape[0], -1)from collections import OrderedDictnet = nn.Sequential( # FlattenLayer(), # LinearNet(num_inputs, num_outputs) OrderedDict([ ('flatten', FlattenLayer()), ('linear', nn.Linear(num_inputs, num_outputs))]) # æˆ–è€…å†™æˆæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ LinearNet(num_inputs, num_outputs) ä¹Ÿå¯ä»¥ )# åˆå§‹åŒ–æ¨¡å‹å‚æ•°init.normal_(net.linear.weight, mean=0, std=0.01)init.constant_(net.linear.bias, val=0)# å®šä¹‰æŸå¤±å‡½æ•°loss = nn.CrossEntropyLoss() # ä¸‹é¢æ˜¯ä»–çš„å‡½æ•°åŸå‹# class torch.nn.CrossEntropyLoss(weight=None, size_average=None, ignore_index=-100, reduce=None, reduction='mean')# å®šä¹‰ä¼˜åŒ–å‡½æ•° 1.3.1 è®­ç»ƒæ¨¡å‹12345678910111213141516171819202122232425num_epochs = 5def train_ch3(net, train_iter, test_iter, loss, num_epochs, batch_size, params=None, lr=None, trainer=None): \"\"\"Train and evaluate a model with CPU.\"\"\" for epoch in range(num_epochs): train_l_sum, train_acc_sum, n = 0.0, 0.0, 0 for X, y in train_iter: with autograd.record(): y_hat = net(X) l = loss(y_hat, y).sum() l.backward() if trainer is None: sgd(params, lr, batch_size) else: trainer.step(batch_size) y = y.astype('float32') train_l_sum += l.asscalar() train_acc_sum += (y_hat.argmax(axis=1) == y).sum().asscalar() n += y.size test_acc = evaluate_accuracy(test_iter, net) print('epoch %d, loss %.4f, train acc %.3f, test acc %.3f' % (epoch + 1, train_l_sum / n, train_acc_sum / n, test_acc))train_ch3(net, train_iter, test_iter, loss, num_epochs, batch_size, None, None, optimizer)","categories":[{"name":"deep_learning","slug":"deep-learning","permalink":"https://shyshy903.github.io/categories/deep-learning/"}],"tags":[{"name":"DL","slug":"DL","permalink":"https://shyshy903.github.io/tags/DL/"}]},{"title":"å¤šå±‚æ„ŸçŸ¥æœº","slug":"Deep_learning/å¤šå±‚æ„ŸçŸ¥æœº","date":"2020-02-12T16:00:00.000Z","updated":"2020-02-12T16:00:00.000Z","comments":true,"path":"2020/02/13/Deep_learning/å¤šå±‚æ„ŸçŸ¥æœº/","link":"","permalink":"https://shyshy903.github.io/2020/02/13/Deep_learning/%E5%A4%9A%E5%B1%82%E6%84%9F%E7%9F%A5%E6%9C%BA/","excerpt":"","text":"å¤šå±‚æ„ŸçŸ¥æœºæˆ‘ä»¬å·²ç»ä»‹ç»äº†åŒ…æ‹¬çº¿æ€§å›å½’å’Œsoftmaxå›å½’åœ¨å†…çš„å•å±‚ç¥ç»ç½‘ç»œã€‚ç„¶è€Œæ·±åº¦å­¦ä¹ ä¸»è¦å…³æ³¨å¤šå±‚æ¨¡å‹ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥å¤šå±‚æ„ŸçŸ¥æœºï¼ˆmultilayer perceptronï¼ŒMLPï¼‰ä¸ºä¾‹ï¼Œä»‹ç»å¤šå±‚ç¥ç»ç½‘ç»œçš„æ¦‚å¿µã€‚ éšè—å±‚å¤šå±‚æ„ŸçŸ¥æœºåœ¨å•å±‚ç¥ç»ç½‘ç»œçš„åŸºç¡€ä¸Šå¼•å…¥äº†ä¸€åˆ°å¤šä¸ªéšè—å±‚ï¼ˆhidden layerï¼‰ã€‚éšè—å±‚ä½äºè¾“å…¥å±‚å’Œè¾“å‡ºå±‚ä¹‹é—´ã€‚å›¾3.3å±•ç¤ºäº†ä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœºçš„ç¥ç»ç½‘ç»œå›¾ã€‚ åœ¨å›¾3.3æ‰€ç¤ºçš„å¤šå±‚æ„ŸçŸ¥æœºä¸­ï¼Œè¾“å…¥å’Œè¾“å‡ºä¸ªæ•°åˆ†åˆ«ä¸º4å’Œ3ï¼Œä¸­é—´çš„éšè—å±‚ä¸­åŒ…å«äº†5ä¸ªéšè—å•å…ƒï¼ˆhidden unitï¼‰ã€‚ç”±äºè¾“å…¥å±‚ä¸æ¶‰åŠè®¡ç®—ï¼Œå›¾3.3ä¸­çš„å¤šå±‚æ„ŸçŸ¥æœºçš„å±‚æ•°ä¸º2ã€‚ç”±å›¾3.3å¯è§ï¼Œéšè—å±‚ä¸­çš„ç¥ç»å…ƒå’Œè¾“å…¥å±‚ä¸­å„ä¸ªè¾“å…¥å®Œå…¨è¿æ¥ï¼Œè¾“å‡ºå±‚ä¸­çš„ç¥ç»å…ƒå’Œéšè—å±‚ä¸­çš„å„ä¸ªç¥ç»å…ƒä¹Ÿå®Œå…¨è¿æ¥ã€‚å› æ­¤ï¼Œå¤šå±‚æ„ŸçŸ¥æœºä¸­çš„éšè—å±‚å’Œè¾“å‡ºå±‚éƒ½æ˜¯å…¨è¿æ¥å±‚ã€‚ å…·ä½“æ¥è¯´ï¼Œç»™å®šä¸€ä¸ªå°æ‰¹é‡æ ·æœ¬$\\boldsymbol{X} \\in \\mathbb{R}^{n \\times d}$ï¼Œå…¶æ‰¹é‡å¤§å°ä¸º$n$ï¼Œè¾“å…¥ä¸ªæ•°ä¸º$d$ã€‚å‡è®¾å¤šå±‚æ„ŸçŸ¥æœºåªæœ‰ä¸€ä¸ªéšè—å±‚ï¼Œå…¶ä¸­éšè—å•å…ƒä¸ªæ•°ä¸º$h$ã€‚è®°éšè—å±‚çš„è¾“å‡ºï¼ˆä¹Ÿç§°ä¸ºéšè—å±‚å˜é‡æˆ–éšè—å˜é‡ï¼‰ä¸º$\\boldsymbol{H}$ï¼Œæœ‰$\\boldsymbol{H} \\in \\mathbb{R}^{n \\times h}$ã€‚å› ä¸ºéšè—å±‚å’Œè¾“å‡ºå±‚å‡æ˜¯å…¨è¿æ¥å±‚ï¼Œå¯ä»¥è®¾éšè—å±‚çš„æƒé‡å‚æ•°å’Œåå·®å‚æ•°åˆ†åˆ«ä¸º$\\boldsymbol{W}_h \\in \\mathbb{R}^{d \\times h}$å’Œ $\\boldsymbol{b}_h \\in \\mathbb{R}^{1 \\times h}$ï¼Œè¾“å‡ºå±‚çš„æƒé‡å’Œåå·®å‚æ•°åˆ†åˆ«ä¸º$\\boldsymbol{W}_o \\in \\mathbb{R}^{h \\times q}$å’Œ$\\boldsymbol{b}_o \\in \\mathbb{R}^{1 \\times q}$ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ç§å«å•éšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºçš„è®¾è®¡ã€‚å…¶è¾“å‡º$\\boldsymbol{O} \\in \\mathbb{R}^{n \\times q}$çš„è®¡ç®—ä¸º $$\\begin{aligned}\\boldsymbol{H} &amp;= \\boldsymbol{X} \\boldsymbol{W}_h + \\boldsymbol{b}_h,\\\\boldsymbol{O} &amp;= \\boldsymbol{H} \\boldsymbol{W}_o + \\boldsymbol{b}_o,\\end{aligned}$$ ä¹Ÿå°±æ˜¯å°†éšè—å±‚çš„è¾“å‡ºç›´æ¥ä½œä¸ºè¾“å‡ºå±‚çš„è¾“å…¥ã€‚å¦‚æœå°†ä»¥ä¸Šä¸¤ä¸ªå¼å­è”ç«‹èµ·æ¥ï¼Œå¯ä»¥å¾—åˆ° $$\\boldsymbol{O} = (\\boldsymbol{X} \\boldsymbol{W}_h + \\boldsymbol{b}_h)\\boldsymbol{W}_o + \\boldsymbol{b}_o = \\boldsymbol{X} \\boldsymbol{W}_h\\boldsymbol{W}_o + \\boldsymbol{b}_h \\boldsymbol{W}_o + \\boldsymbol{b}_o.$$ ä»è”ç«‹åçš„å¼å­å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶ç¥ç»ç½‘ç»œå¼•å…¥äº†éšè—å±‚ï¼Œå´ä¾ç„¶ç­‰ä»·äºä¸€ä¸ªå•å±‚ç¥ç»ç½‘ç»œï¼šå…¶ä¸­è¾“å‡ºå±‚æƒé‡å‚æ•°ä¸º$\\boldsymbol{W}_h\\boldsymbol{W}_o$ï¼Œåå·®å‚æ•°ä¸º$\\boldsymbol{b}_h \\boldsymbol{W}_o + \\boldsymbol{b}_o$ã€‚ä¸éš¾å‘ç°ï¼Œå³ä¾¿å†æ·»åŠ æ›´å¤šçš„éšè—å±‚ï¼Œä»¥ä¸Šè®¾è®¡ä¾ç„¶åªèƒ½ä¸ä»…å«è¾“å‡ºå±‚çš„å•å±‚ç¥ç»ç½‘ç»œç­‰ä»·ã€‚ æ¿€æ´»å‡½æ•°ä¸Šè¿°é—®é¢˜çš„æ ¹æºåœ¨äºå…¨è¿æ¥å±‚åªæ˜¯å¯¹æ•°æ®åšä»¿å°„å˜æ¢ï¼ˆaffine transformationï¼‰ï¼Œè€Œå¤šä¸ªä»¿å°„å˜æ¢çš„å åŠ ä»ç„¶æ˜¯ä¸€ä¸ªä»¿å°„å˜æ¢ã€‚è§£å†³é—®é¢˜çš„ä¸€ä¸ªæ–¹æ³•æ˜¯å¼•å…¥éçº¿æ€§å˜æ¢ï¼Œä¾‹å¦‚å¯¹éšè—å˜é‡ä½¿ç”¨æŒ‰å…ƒç´ è¿ç®—çš„éçº¿æ€§å‡½æ•°è¿›è¡Œå˜æ¢ï¼Œç„¶åå†ä½œä¸ºä¸‹ä¸€ä¸ªå…¨è¿æ¥å±‚çš„è¾“å…¥ã€‚è¿™ä¸ªéçº¿æ€§å‡½æ•°è¢«ç§°ä¸ºæ¿€æ´»å‡½æ•°ï¼ˆactivation functionï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„æ¿€æ´»å‡½æ•°ã€‚ ReLUå‡½æ•°ReLUï¼ˆrectified linear unitï¼‰å‡½æ•°æä¾›äº†ä¸€ä¸ªå¾ˆç®€å•çš„éçº¿æ€§å˜æ¢ã€‚ç»™å®šå…ƒç´ $x$ï¼Œè¯¥å‡½æ•°å®šä¹‰ä¸º $$\\text{ReLU}(x) = \\max(x, 0).$$ å¯ä»¥çœ‹å‡ºï¼ŒReLUå‡½æ•°åªä¿ç•™æ­£æ•°å…ƒç´ ï¼Œå¹¶å°†è´Ÿæ•°å…ƒç´ æ¸…é›¶ã€‚ä¸ºäº†ç›´è§‚åœ°è§‚å¯Ÿè¿™ä¸€éçº¿æ€§å˜æ¢ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªç»˜å›¾å‡½æ•°xyplotã€‚ 1234567891011121314import syssys.path.insert(0, '..')import numpyimport matplotlib.pyplot as pltimport torchimport torch.nn as nnfrom torch.autograd import Variabledef xyplot(x_vals,y_vals,name): x_vals=x_vals.detach().numpy() # we can't directly use var.numpy() because varibles might y_vals=y_vals.detach().numpy() # already required grad.,thus using var.detach().numpy() plt.plot(x_vals,y_vals) plt.xlabel('x') plt.ylabel(name+'(x)') 123x=Variable(torch.arange(-8.0,8.0,0.1,dtype=torch.float32).reshape(int(16/0.1),1),requires_grad=True)y=torch.nn.functional.relu(x)xyplot(x,y,'relu') 12y.backward(torch.ones_like(x),retain_graph=True)xyplot(x,x.grad,\"grad of relu\") sigmodå‡½æ•°sigmodå‡½æ•°å¯å°†å…ƒç´ çš„å€¼å˜ä¸º0ï¼Œ1ä¹‹é—´ $$\\sigma(sigmod)= \\frac{1}{1+exp^(-x)}$$ 123x=Variable(torch.arange(-8.0,8.0,0.1,dtype=torch.float32).reshape(int(16/0.1),1),requires_grad=True)y=torch.sigmoid(x)xyplot(x,y,'sigmoid') 12y.backward(torch.ones_like(x),retain_graph=True)xyplot(x,x.grad,'grad of sigmoid') tanh å‡½æ•°tanhå‡½æ•°å¯ä»¥å°†å…ƒç´ çš„å€¼å˜ä¸º-1ï¼Œ1ä¹‹é—´$$ tanh(x) = \\frac{1-exp^(-2x)}{1+exp^(-2x)}$$ 123x=Variable(torch.arange(-8.0,8.0,0.1,dtype=torch.float32).reshape(int(16/0.1),1),requires_grad=True)y=torch.tanh(x)xyplot(x,y,\"tanh\") 12y.backward(torch.ones_like(x),retain_graph=True)xyplot(x,x.grad,\"grad of tanh\") å…³äºæ¿€æ´»å‡½æ•°çš„é€‰æ‹©ReLuå‡½æ•°æ˜¯ä¸€ä¸ªé€šç”¨çš„æ¿€æ´»å‡½æ•°ï¼Œç›®å‰åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨ã€‚ä½†æ˜¯ï¼ŒReLUå‡½æ•°åªèƒ½åœ¨éšè—å±‚ä¸­ä½¿ç”¨ã€‚ ç”¨äºåˆ†ç±»å™¨æ—¶ï¼Œsigmoidå‡½æ•°åŠå…¶ç»„åˆé€šå¸¸æ•ˆæœæ›´å¥½ã€‚ç”±äºæ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œæœ‰æ—¶è¦é¿å…ä½¿ç”¨sigmoidå’Œtanhå‡½æ•°ã€‚ åœ¨ç¥ç»ç½‘ç»œå±‚æ•°è¾ƒå¤šçš„æ—¶å€™ï¼Œæœ€å¥½ä½¿ç”¨ReLuå‡½æ•°ï¼ŒReLuå‡½æ•°æ¯”è¾ƒç®€å•è®¡ç®—é‡å°‘ï¼Œè€Œsigmoidå’Œtanhå‡½æ•°è®¡ç®—é‡å¤§å¾ˆå¤šã€‚ åœ¨é€‰æ‹©æ¿€æ´»å‡½æ•°çš„æ—¶å€™å¯ä»¥å…ˆé€‰ç”¨ReLuå‡½æ•°å¦‚æœæ•ˆæœä¸ç†æƒ³å¯ä»¥å°è¯•å…¶ä»–æ¿€æ´»å‡½æ•°ã€‚ å¤šå±‚æ„ŸçŸ¥æœºçš„pytorchå®ç°123456789import torchfrom torch import nnfrom torch.nn import initimport numpy as npimport syssys.path.append(\".\") import d2lzh_pytorch as d2lprint(torch.__version__) 1.3.11234567891011num_inputs, num_outputs, num_hiddens = 784, 10, 256 net = nn.Sequential( d2l.FlattenLayer(), nn.Linear(num_inputs, num_hiddens), nn.ReLU(), nn.Linear(num_hiddens, num_outputs), ) for params in net.parameters(): init.normal_(params, mean=0, std=0.01) 1234567891011121314151617batch_size = 256train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)loss = torch.nn.CrossEntropyLoss()optimizer = torch.optim.SGD(net.parameters(), lr=0.5)num_epochs = 5d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, batch_size, None, None, optimizer)### è¾“å‡ºå¦‚ä¸‹epoch 1, loss 0.0031, train acc 0.703, test acc 0.757epoch 2, loss 0.0019, train acc 0.824, test acc 0.822epoch 3, loss 0.0016, train acc 0.845, test acc 0.825epoch 4, loss 0.0015, train acc 0.855, test acc 0.811epoch 5, loss 0.0014, train acc 0.865, test acc 0.846","categories":[{"name":"deep_learning","slug":"deep-learning","permalink":"https://shyshy903.github.io/categories/deep-learning/"}],"tags":[{"name":"DL","slug":"DL","permalink":"https://shyshy903.github.io/tags/DL/"}]},{"title":"çº¿æ€§å›å½’","slug":"Deep_learning/çº¿æ€§å›å½’","date":"2020-02-11T16:00:00.000Z","updated":"2020-02-11T16:00:00.000Z","comments":true,"path":"2020/02/12/Deep_learning/çº¿æ€§å›å½’/","link":"","permalink":"https://shyshy903.github.io/2020/02/12/Deep_learning/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/","excerpt":"","text":"çº¿æ€§å›å½’ æ¨¡å‹$$y = wx + b$$ æŸå¤±å‡½æ•°$$\\ell(w_1, w_2, b) =\\frac{1}{n} \\sum_{i=1}^n \\ell^{(i)}(w_1, w_2, b) =\\frac{1}{n} \\sum_{i=1}^n \\frac{1}{2}\\left(x_1^{(i)} w_1 + x_2^{(i)} w_2 + b - y^{(i)}\\right)^2.$$ ä¼˜åŒ–å‡½æ•°$$\\begin{aligned}w_1 &amp;\\leftarrow w_1 - \\frac{\\eta}{|\\mathcal{B}|} \\sum_{i \\in \\mathcal{B}} \\frac{ \\partial \\ell^{(i)}(w_1, w_2, b) }{\\partial w_1} = w_1 - \\frac{\\eta}{|\\mathcal{B}|} \\sum_{i \\in \\mathcal{B}}x_1^{(i)} \\left(x_1^{(i)} w_1 + x_2^{(i)} w_2 + b - y^{(i)}\\right),\\w_2 &amp;\\leftarrow w_2 - \\frac{\\eta}{|\\mathcal{B}|} \\sum_{i \\in \\mathcal{B}} \\frac{ \\partial \\ell^{(i)}(w_1, w_2, b) }{\\partial w_2} = w_2 - \\frac{\\eta}{|\\mathcal{B}|} \\sum_{i \\in \\mathcal{B}}x_2^{(i)} \\left(x_1^{(i)} w_1 + x_2^{(i)} w_2 + b - y^{(i)}\\right),\\b &amp;\\leftarrow b - \\frac{\\eta}{|\\mathcal{B}|} \\sum_{i \\in \\mathcal{B}} \\frac{ \\partial \\ell^{(i)}(w_1, w_2, b) }{\\partial b} = b - \\frac{\\eta}{|\\mathcal{B}|} \\sum_{i \\in \\mathcal{B}}\\left(x_1^{(i)} w_1 + x_2^{(i)} w_2 + b - y^{(i)}\\right).\\end{aligned}$$ ç¥ç»ç½‘ç»œå›¾ï¼ˆå•å±‚ç¥ç»ç½‘ç»œï¼‰ çº¿æ€§å›å½’çš„pytorchå®ç°ç”Ÿæˆæ•°æ®é›†123456789import torchnum_inputs = 2num_examples = 1000true_w = [2, -3.4]true_b = 4.2features = torch.randn(num_examples, num_inputs)labels = true_w[0] * features[:, 0] + true_w[1] * features[:, 1] + true_blabels += torch.normal(mean=torch.zeros(labels.shape), std=0.01) è¯»å–æ•°æ®1234567from torch.utils import data as tdatabatch_size = 10# å°†è®­ç»ƒæ•°æ®çš„ç‰¹å¾å’Œæ ‡ç­¾ç»„åˆdataset = tdata.TensorDataset(features, labels)# éšæœºè¯»å–å°æ‰¹é‡data_iter = tdata.DataLoader(dataset, batch_size, shuffle=True) 123for X, y in data_iter: print(X, y) break tensor([[ 0.2115, 1.4861], [-0.2630, 0.8898], [ 0.8301, -2.6101], [ 1.5199, -0.5050], [-0.4478, 0.6990], [ 1.4203, 1.1574], [ 1.3185, 1.1949], [ 2.0129, 0.8379], [ 1.1585, -0.1882], [ 0.9050, 0.0398]]) tensor([-0.4229, 0.6551, 14.7292, 8.9412, 0.9225, 3.1058, 2.7778, 5.3856, 7.1542, 5.8629])å®šä¹‰æ¨¡å‹å…ˆå¯¼å…¥nnæ¨¡å—ã€‚å®é™…ä¸Šï¼Œâ€œnnâ€æ˜¯neural networksï¼ˆç¥ç»ç½‘ç»œï¼‰çš„ç¼©å†™ã€‚é¡¾åæ€ä¹‰ï¼Œè¯¥æ¨¡å—å®šä¹‰äº†å¤§é‡ç¥ç»ç½‘ç»œçš„å±‚ã€‚æˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªæ¨¡å‹å˜é‡netï¼Œå®ƒæ˜¯ä¸€ä¸ªSequentialå®ä¾‹ã€‚åœ¨nnä¸­ï¼ŒSequentialå®ä¾‹å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªä¸²è”å„ä¸ªå±‚çš„å®¹å™¨ã€‚åœ¨æ„é€ æ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬åœ¨è¯¥å®¹å™¨ä¸­ä¾æ¬¡æ·»åŠ å±‚ã€‚å½“ç»™å®šè¾“å…¥æ•°æ®æ—¶ï¼Œå®¹å™¨ä¸­çš„æ¯ä¸€å±‚å°†ä¾æ¬¡è®¡ç®—å¹¶å°†è¾“å‡ºä½œä¸ºä¸‹ä¸€å±‚çš„è¾“å…¥ã€‚ 123from torch import nnnet = nn.Sequential() 12 # å…¨è¿æ¥å±‚æ˜¯ä¸€ä¸ªçº¿æ€§å±‚ï¼Œç‰¹å¾æ•°ä¸º2ï¼Œè¾“å‡ºä¸ªæ•°ä¸º1net.add_module('linear', nn.Linear(2, 1)) åˆå§‹åŒ–æ¨¡å‹å‚æ•°è¿™é‡Œä¸»è¦æ˜¯åˆå§‹åŒ–çº¿æ€§å›å½’æ¨¡å‹ä¸­çš„æƒé‡ä¸åå·®ã€‚ä½¿ç”¨nn.initæ¨¡å—å¦‚nn.init.normal(tensor, std=0.01)æŒ‡å®šéšæœºåˆå§‹åŒ–å°†éšæœºé‡‡æ ·å‡å€¼ä¸º0ã€æ ‡å‡†å·®ä¸º0.01çš„æ­£æ€åˆ†å¸ƒã€‚åå·®åˆå§‹åŒ–é»˜è®¤ä¸º0 12345678from torch.nn import initdef params_init(model): if isinstance(model, nn.Linear): init.normal_(tensor=model.weight.data, std=0.01) init.constant_(tensor=model.bias.data, val=0) net.apply(params_init) Sequential( (linear): Linear(in_features=2, out_features=1, bias=True) )å®šä¹‰æŸå¤±å‡½æ•°ä¸ä¼˜åŒ–ç®—æ³•12345loss = nn.MSELoss() # å‡æ–¹è¯¯å·®æŸå¤±å‡½æ•°from torch import optimoptimizer = optim.SGD(net.parameters(), lr=0.03) # lrä¸ºå­¦ä¹ ç‡ è®­ç»ƒæ¨¡å‹1234567891011num_epochs = 5 # åˆå§‹åŒ–è®­ç»ƒå‘¨æœŸfor epoch in range(1, num_epochs + 1): for X, y in data_iter: net.zero_grad() l = loss(net(X), y.reshape(batch_size, -1)) # -1è¡¨ç¤ºè‡ªåŠ¨è®¡ç®—åˆ— l.backward() optimizer.step() with torch.no_grad(): l = loss(net(features), labels.reshape(num_examples, -1)) print('epoch %d, loss: %f' % (epoch, l.data.numpy())) epoch 1, loss: 0.000093 epoch 2, loss: 0.000094 epoch 3, loss: 0.000094 epoch 4, loss: 0.000093 epoch 5, loss: 0.00009312linear = net[0]true_w, linear.weight.data ([2, -3.4], tensor([[ 2.0001, -3.4001]]))1true_b, linear.bias.data (4.2, tensor([4.2001]))1net Sequential( (linear): Linear(in_features=2, out_features=1, bias=True) )","categories":[{"name":"deep_learning","slug":"deep-learning","permalink":"https://shyshy903.github.io/categories/deep-learning/"}],"tags":[{"name":"DL","slug":"DL","permalink":"https://shyshy903.github.io/tags/DL/"}]},{"title":"MYSQLå®‰è£…é…ç½®","slug":"SQL/MySQLçš„å®‰è£…ä¸é…ç½®","date":"2020-01-15T16:00:00.000Z","updated":"2020-01-15T16:00:00.000Z","comments":true,"path":"2020/01/16/SQL/MySQLçš„å®‰è£…ä¸é…ç½®/","link":"","permalink":"https://shyshy903.github.io/2020/01/16/SQL/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/","excerpt":"","text":"MySQLçš„å®‰è£…ä¸é…ç½®ä¸‹è½½è½¯ä»¶ä¸å®‰è£… åˆ°mySQLçš„å®˜ç½‘ï¼šç‚¹å‡»è¿™é‡Œï¼Œçœ‹åˆ°ä¸‹å›¾ï¼Œä¸‹è½½å³å¯ã€‚ è§£å‹ç¼©åˆ°ä½ æ‰€éœ€è¦çš„è·¯å¾„MySQLé…ç½®123456789101112131415161718192021222324252627[mysqld]# è®¾ç½®3306ç«¯å£port=3306# è®¾ç½®mysqlçš„å®‰è£…ç›®å½•basedir=&lt;ä½ çš„è·¯å¾„&gt;\\mysql-8.0.11-winx64# è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•datadir=&lt;ä½ çš„è·¯å¾„&gt;\\mysql-8.0.11-winx64\\\\data# å…è®¸æœ€å¤§è¿æ¥æ•°max_connections=200# å…è®¸è¿æ¥å¤±è´¥çš„æ¬¡æ•°ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢æœ‰äººä»è¯¥ä¸»æœºè¯•å›¾æ”»å‡»æ•°æ®åº“ç³»ç»Ÿmax_connect_errors=10000# æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸ºUTF8character-set-server=utf8# åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“default-storage-engine=INNODBwait_timeout=31536000interactive_timeout=31536000#sql_mode=ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION[mysql]# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†default-character-set=utf8[client]# è®¾ç½®mysqlå®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶é»˜è®¤ä½¿ç”¨çš„ç«¯å£port=3306default-character-set=utf8 ç¯å¢ƒå˜é‡é…ç½® ç³»ç»Ÿå˜é‡æ·»åŠ  1MYSQL_HOME : path ç¯å¢ƒå˜é‡æ·»åŠ  1%MYSQL_HOME%\\bin å¦‚æœä¸Šé¢2ä¸ªæ–¹æ³•éƒ½ä¸æƒ³ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼š MySQLåˆå§‹åŒ– CMDè¿è¡Œ1$ mysqld --initialize --user=mysql --console åŠ¡å¿…è®°ä½è¿™ä¸ªåˆå§‹å¯†ç ï¼Œä¸€ä¼šéœ€è¦ç”¨è¿™ä¸ªåˆå§‹å¯†ç ç™»å½•mysqlï¼›ä¿®æ”¹å¯†ç å¦‚æœemmä½ æŠŠä»–ç‚¹æ²¡äº† ä½ åªè¦æŠŠdatadiré…ç½®çš„é‚£ä¸ªdataçš„æ–‡ä»¶åˆ é™¤äº†ï¼Œç„¶åé‡æ–°æ‰§è¡Œåˆå§‹åŒ–å³å¯ç„¶åè¾“å…¥ï¼š1mysqld --install å†æ‰“å¼€æœåŠ¡ï¼š1net start mysql ä¿®æ”¹é»˜è®¤å¯†ç æ‰§è¡Œï¼š1mysql -u root -pç™»å½•,è¾“å…¥åˆå§‹å¯†ç ï¼Œæ¥ä¸‹æ¥ä¿®æ”¹å¯†ç ï¼š1ALTER USER \"root@\"localhost\" IDENTIFIED BY \"your password\" å…¶å®ƒå¦‚æœä½ åœ¨æ•°æ®åº“è¿æ¥å·¥å…·çš„æ—¶å€™å‡ºç°é”™è¯¯ï¼Œåˆ™å¯ä»¥å†my.iniæ–‡ä»¶ä¸­çš„mysqldä¸­åŠ å…¥ï¼š1$ default_authentication_plugin=mysql_native_password","categories":[{"name":"SQL","slug":"SQL","permalink":"https://shyshy903.github.io/categories/SQL/"}],"tags":[{"name":"SQL","slug":"SQL","permalink":"https://shyshy903.github.io/tags/SQL/"}]},{"title":"SQLè¯­è¨€åŸºç¡€","slug":"SQL/SQLè¯­è¨€ï¼ˆä¸€ï¼‰","date":"2020-01-14T16:00:00.000Z","updated":"2020-01-14T16:00:00.000Z","comments":true,"path":"2020/01/15/SQL/SQLè¯­è¨€ï¼ˆä¸€ï¼‰/","link":"","permalink":"https://shyshy903.github.io/2020/01/15/SQL/SQL%E8%AF%AD%E8%A8%80%EF%BC%88%E4%B8%80%EF%BC%89/","excerpt":"","text":"SQLè¯­è¨€ç®€å•æ¥è¯´ï¼Œä½ éœ€è¦åœ¨æ•°æ®åº“ä¸Šæ‰§è¡Œçš„æ“ä½œå¤§éƒ¨åˆ†éƒ½è¦ç”±SQLè¯­å¥å®Œæˆ1SELECT * FROM websitesä½†æ˜¯ï¼ŒSQLè¯­å¥å¹¶ä¸å¯¹å¤§å°å†™æ•æ„Ÿï¼ŒåŒæ—¶æˆ‘ä»¬åœ¨æœ¬ä¾‹æ•™ç¨‹ä¸­ï¼Œæ¯ä¸ªè¯­å¥éƒ½åŠ ä¸Šåˆ†å·1234567891011121314151617mysql&gt; use RUNOOB;Database changedmysql&gt; set names utf8;Query OK, 0 rows affected (0.00 sec)mysql&gt; SELECT * FROM Websites;+----+--------------+---------------------------+-------+---------+| id | name | url | alexa | country |+----+--------------+---------------------------+-------+---------+| 1 | Google | https://www.google.cm/ | 1 | USA || 2 | æ·˜å® | https://www.taobao.com/ | 13 | CN || 3 | èœé¸Ÿæ•™ç¨‹ | http://www.runoob.com/ | 4689 | CN || 4 | å¾®åš | http://weibo.com/ | 20 | CN || 5 | Facebook | https://www.facebook.com/ | 3 | USA |+----+--------------+---------------------------+-------+---------+5 rows in set (0.01 sec)ä¸‹é¢çš„å¤§éƒ¨åˆ†éƒ½æ˜¯åŸºäºè¿™ä¸ªè¡¨æ ¼çš„ SQL SELECT è¯­å¥SELECTè¯­å¥ç”¨äºä»æ•°æ®åº“ä¸­é€‰å–æ•°æ®ï¼Œç»“æœè¢«å­˜åœ¨ä¸€ä¸ªç»“æœè¡¨ä¸­ï¼Œç§°ä¸ºç»“æœé›† SELECT è¯­æ³•123SELECT column_name,column_name FROM table_name; # é€‰å‡ºæŒ‡å®šåˆ—SELECT * FROM table_name; # é€‰å‡ºæ‰€æœ‰çš„åˆ— SQL SELECT DISTINCT è¯­å¥åœ¨è¡¨ä¸­ï¼Œä¸€ä¸ªåˆ—å¯èƒ½ä¼šåŒ…å«å¤šä¸ªé‡å¤å€¼ï¼ŒDISTINCTå…³é”®è¯ç”¨äºè¿”å›å”¯ä¸€ä¸åŒçš„å€¼,å°±æ˜¯ä¼šåˆ æ‰é‡å¤çš„å€¼ SQL SELECT DISTINCT è¯­æ³•1SELECT DISTINCT column_name, column_name FROM table_name; SELECT WHEREå­å¥WHEREå­å¥ç”¨äºæå–é‚£äº›é˜¿ç›å°¼ç»„æŒ‡å®šæ¡ä»¶çš„è®°å½• SQL WHERE è¯­æ³•1SELECT column_name,column_name FROM table_name WHERE column_name operator value; æ–‡æœ¬å­—æ®µ vs æ•°å€¼å­—æ®µSQLä¸­ä½¿ç”¨å•å¼•å·æ¥ç¯ç»•æ–‡æœ¬æ•°å€¼ï¼Œä½†æ˜¯å¦‚æœæ˜¯æ•°å€¼å°±ä¸ç”¨ä½¿ç”¨å•å¼•å·äº†ï¼Œå¦‚ï¼š12SELECT * FROM websites WHERE id = 1;SELECT * FROM websites WHERE country = 'CN'; WHEREå­å¥çš„è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° &lt;&gt;æˆ–è€…!= ä¸ç­‰äº BETWEEN åœ¨æŸä¸ªèŒƒå›´å†… LIKE æœç´¢æŸç§æ¨¡å¼ IN æŒ‡å®šé’ˆå¯¹æŸä¸ªåˆ—çš„å¯èƒ½å€¼ SQL AND &amp; OR è¿ç®—ç¬¦AND &amp; OR è¿ç®—ç¬¦åŸºäºä¸€ä¸ªä»¥ä¸Šæ¡ä»¶å¯¹è®°å½•è¿›è¡Œè¿‡æ»¤ å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ç¬¬äºŒä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œåˆ™ADNè¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½• å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ç¬¬äºŒä¸ªæ¡ä»¶æœ‰ä¸€ä¸ªæˆç«‹ï¼Œåˆ™ORè¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½• SQL AND &amp; OR è¯­æ³•12SELECT * FROM Websites WHERE country = 'CN' AND alexa &gt; 50;SELECT * FROM websites WHERE country = 'USA' OR country = 'CN'; ç»“åˆAND å’Œ ORç”¨æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š12SELECT * FROM websites WHERE alexa &gt; 15 AND (country = 'CN' OR country = 'USA') SQL ORDER BY å…³é”®è¯ORDER BY å…³é”®è¯ç”¨äºå¯¹äºç»“æœé›†æŒ‰ç…§ä¸€ä¸ªåˆ—æˆ–è€…å¤šä¸ªåˆ—è¿›è¡Œæ’åº SQL ORDER BY çš„è¯­æ³•ORDER BYå…³é”®è¯é»˜è®¤æŒ‰ç…§å‡åºè¿›è¡Œæ’åˆ—ï¼Œå¦‚æœéœ€è¦é™åºï¼Œåˆ™å¯ä»¥ä½¿ç”¨DESCå…³é”®å­—12SELECT column_name, column_name FROM table_name ORDER BY column_name, column_name ASC|DESC; SQL ORDER BY(DESC)å®ä¾‹12SELECT * FROM websites ORDER BY alexa ;SELECT * FROM websites ORDER BY alexa DESC; ORDER BY å¤šåˆ—å½“æœ‰å¤šåˆ—è¿›è¡Œæ’åºæ—¶ï¼Œæˆ‘ä»¬ä¼˜å…ˆé€‰æ‹©ç¬¬ä¸€åˆ—1SELECT * FROM websites ORDER BY country,alexa; SQL INSERT INTOè¯­å¥INSERT INTOè¯­å¥å‘è¡¨ä¸­æ’å…¥æ–°çºªå½• SQL INSERT INTOè¯­å¥çš„è¯­æ³•INSERT è¯­å¥æœ‰ä¸¤ç§ç¼–å†™å½¢å¼ï¼š ç¬¬ä¸€é’Ÿå½¢å¼æ— éœ€æŒ‡å®šè¦æ’å…¥æ•°æ®çš„åˆ—åï¼Œåªéœ€è¦æä¾›è¢«æ’å…¥çš„å€¼å³å¯ï¼š1INSERT INTO table_name VALUES (value1,value2,value3); ç¬¬äºŒç§å½¢å¼éœ€è¦æŒ‡å®šåˆ—ååŠè¢«æ’å…¥çš„å€¼1INSERT INTO table_name (column1, column2,column3) VALUES (value1,value2,value3) INSERT INTOå®ä¾‹å‡è®¾æˆ‘ä»¬éœ€è¦å‘â€˜websitesâ€™è¡¨é’Ÿæ’å…¥ä¸€ä¸ªæ–°è¡Œ1INSERT INTO websites(name, url, alexa, country) VALUES('ç™¾åº¦â€™, 'https://www.baidu.com/','4','CN'); åœ¨æŒ‡å®šçš„åˆ—æ’å…¥æ•°æ®ä¸‹é¢çš„SQLè¯­å¥å°†æ’å…¥ä¸€ä¸ªæ–°è¡Œï¼Œä½†æ˜¯åªåœ¨â€™nameâ€™ã€â€˜urlâ€™ã€â€™countryâ€˜åˆ—æ’å…¥æ•°æ®1INSERT INTO websites(name, url, country) VALUES ('stackoverflow', 'http://stackoverflow.com/', 'IND') SQL UPDATE è¯­å¥UPDATEè¯­å¥ç”¨äºæ›´æ–°è¡¨ä¸­å·²ç»å­˜åœ¨çš„è®°å½• UPDATEè¯­å¥çš„è¯­æ³•1UPDATE table_name SET column = value1, column2 = value2,... WHERE some_column = some_value; UPDATEå®ä¾‹1UPADATE Websites SET alexa = '500', country = 'USA' WHERE name = 'èœé¸Ÿæ•™ç¨‹â€™; SQL DELETEDELETè¯­å¥ç”¨äºåˆ é™¤è¡¨ä¸­çš„è¡Œ SQL DELETEè¯­æ³•å’Œå®ä¾‹ä»è¡¨ä¸­åˆ é™¤ç½‘ç«™åæ˜¯ç™¾åº¦ä¸”å›½å®¶ä¸ºCNçš„ç½‘ç«™1DELET FROM websites WHERE name = 'ç™¾åº¦' AND country = 'CN'; åˆ é™¤æ‰€æœ‰æ•°æ®12DELETE FROM table_name;DELETE * FROM table_name; æœ€åéå¸¸æ„Ÿè°¢èœé¸Ÿæ•™ç¨‹ï¼Œæœ¬æ–‡å€Ÿé‰´äº†èœé¸Ÿæ•™ç¨‹çš„è¡¨æ ¼å’Œç›¸å…³ä»£ç ï¼šèœé¸Ÿæ•™ç¨‹: https://www.runoob.com/sql/sql-syntax.html","categories":[{"name":"SQL","slug":"SQL","permalink":"https://shyshy903.github.io/categories/SQL/"}],"tags":[{"name":"SQL","slug":"SQL","permalink":"https://shyshy903.github.io/tags/SQL/"}]},{"title":"ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ã€Šè¥¿ç“œä¹¦ã€‹ç¬”è®°ï¼ˆå…«ï¼‰- Kå‡å€¼èšç±»","slug":"Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ8-Kå‡å€¼èšç±»ï¼‰","date":"2019-11-30T11:30:00.000Z","updated":"2020-02-11T08:48:55.575Z","comments":true,"path":"2019/11/30/Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ8-Kå‡å€¼èšç±»ï¼‰/","link":"","permalink":"https://shyshy903.github.io/2019/11/30/Machine_Learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%888-K%E5%9D%87%E5%80%BC%E8%81%9A%E7%B1%BB%EF%BC%89/","excerpt":"","text":"Kå‡å€¼èšç±»ç®—æ³•ä¼ªä»£ç ï¼š 1234567åˆ›å»ºkä¸ªç‚¹ä½œä¸ºèµ·å§‹è´¨å¿ƒï¼ˆç»å¸¸æ˜¯éšæœºé€‰æ‹©ï¼‰å½“ä»»æ„ä¸€ä¸ªç‚¹çš„ç°‡åˆ†é…ç»“æœå‘ç”Ÿæ”¹å˜æ—¶ å¯¹æ•°æ®é›†ä¸­çš„æ¯ä¸ªæ•°æ®ç‚¹ å¯¹æ¯ä¸ªè´¨å¿ƒ è®¡ç®—è´¨å¿ƒä¸æ•°æ®ç‚¹ä¹‹é—´çš„è·ç¦» å°†æ•°æ®ç‚¹åˆ†é…åˆ°è·ç¦»å…¶æœ€è¿‘çš„ç°‡ å¯¹æ¯ä¸€ä¸ªç°‡ï¼Œè®¡ç®—ç°‡ä¸­æ‰€æœ‰ç‚¹çš„å‡å€¼ï¼Œå¹¶ä¸”å°†è¯¥å€¼ä½œä¸ºè´¨å¿ƒ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657\"\"\"å‡½æ•°è¯´æ˜ï¼šk-meansèšç±»ç®—æ³•Parameters: dataSet - ç”¨äºèšç±»çš„æ•°æ®é›† k - é€‰å–kä¸ªè´¨å¿ƒ distMeas - è·ç¦»è®¡ç®—æ–¹æ³•,é»˜è®¤æ¬§æ°è·ç¦»distEclud() createCent - è·å–kä¸ªè´¨å¿ƒçš„æ–¹æ³•,é»˜è®¤éšæœºè·å–randCent() Returns: centroids - kä¸ªèšç±»çš„èšç±»ç»“æœ clusterAssment - èšç±»è¯¯å·®\"\"\"def kMeans(dataSet, k, distMeas=distEclud, createCent=randCent): # è·å–æ•°æ®é›†æ ·æœ¬æ•° m = np.shape(dataSet)[0] # åˆå§‹åŒ–ä¸€ä¸ªï¼ˆm,2ï¼‰å…¨é›¶çŸ©é˜µ clusterAssment = np.mat(np.zeros((m, 2))) # åˆ›å»ºåˆå§‹çš„kä¸ªè´¨å¿ƒå‘é‡ centroids = createCent(dataSet, k) # èšç±»ç»“æœæ˜¯å¦å‘ç”Ÿå˜åŒ–çš„å¸ƒå°”ç±»å‹ clusterChanged = True # åªè¦èšç±»ç»“æœä¸€ç›´å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¸€ç›´æ‰§è¡Œèšç±»ç®—æ³•ï¼Œç›´è‡³æ‰€æœ‰æ•°æ®ç‚¹èšç±»ç»“æœä¸å‘ç”Ÿå˜åŒ– while clusterChanged: # èšç±»ç»“æœå˜åŒ–å¸ƒå°”ç±»å‹ç½®ä¸ºFalse clusterChanged = False # éå†æ•°æ®é›†æ¯ä¸€ä¸ªæ ·æœ¬å‘é‡ for i in range(m): # åˆå§‹åŒ–æœ€å°è·ç¦»ä¸ºæ­£æ— ç©·ï¼Œæœ€å°è·ç¦»å¯¹åº”çš„ç´¢å¼•ä¸º-1 minDist = float('inf') minIndex = -1 # å¾ªç¯kä¸ªç±»çš„è´¨å¿ƒ for j in range(k): # è®¡ç®—æ•°æ®ç‚¹åˆ°è´¨å¿ƒçš„æ¬§æ°è·ç¦» distJI = distMeas(centroids[j, :], dataSet[i, :]) # å¦‚æœè·ç¦»å°äºå½“å‰æœ€å°è·ç¦» if distJI &lt; minDist: # å½“å‰è·ç¦»ä¸ºæœ€å°è·ç¦»ï¼Œæœ€å°è·ç¦»å¯¹åº”ç´¢å¼•åº”ä¸ºj(ç¬¬jä¸ªç±») minDist = distJI minIndex = j # å½“å‰èšç±»ç»“æœä¸­ç¬¬iä¸ªæ ·æœ¬çš„èšç±»ç»“æœå‘ç”Ÿå˜åŒ–ï¼šå¸ƒå°”å€¼ç½®ä¸ºTrueï¼Œç»§ç»­èšç±»ç®—æ³• if clusterAssment[i, 0] != minIndex: clusterChanged = True # æ›´æ–°å½“å‰å˜åŒ–æ ·æœ¬çš„èšç±»ç»“æœå’Œå¹³æ–¹è¯¯å·® clusterAssment[i, :] = minIndex, minDist**2 # æ‰“å°k-meansèšç±»çš„è´¨å¿ƒ # print(centroids) # éå†æ¯ä¸€ä¸ªè´¨å¿ƒ for cent in range(k): # å°†æ•°æ®é›†ä¸­æ‰€æœ‰å±äºå½“å‰è´¨å¿ƒç±»çš„æ ·æœ¬é€šè¿‡æ¡ä»¶è¿‡æ»¤ç­›é€‰å‡ºæ¥ ptsInClust = dataSet[np.nonzero(clusterAssment[:, 0].A == cent)[0]] # è®¡ç®—è¿™äº›æ•°æ®çš„å‡å€¼(axis=0:æ±‚åˆ—å‡å€¼)ï¼Œä½œä¸ºè¯¥ç±»è´¨å¿ƒå‘é‡ centroids[cent, :] = np.mean(ptsInClust, axis=0) # è¿”å›kä¸ªèšç±»ï¼Œèšç±»ç»“æœåŠè¯¯å·® return centroids, clusterAssment æºä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187# -*- coding: utf-8 -*-\"\"\"Created on Thu Aug 2 21:20:03 2018@author: wzy\"\"\"import matplotlib.pyplot as pltimport numpy as np\"\"\"å‡½æ•°è¯´æ˜ï¼šå°†æ–‡æœ¬æ–‡æ¡£ä¸­çš„æ•°æ®è¯»å…¥åˆ°pythonä¸­Parameters: fileName - æ–‡ä»¶å Returns: dataMat - æ•°æ®çŸ©é˜µ\"\"\"def loadDataSet(fileName): dataMat = [] fr = open(fileName) for line in fr.readlines(): curLine = line.strip().split('\\t') fltLine = list(map(float, curLine)) dataMat.append(fltLine) return dataMat\"\"\"å‡½æ•°è¯´æ˜ï¼šæ•°æ®å‘é‡è®¡ç®—æ¬§å¼è·ç¦»Parameters: vecA - æ•°æ®å‘é‡A vecB - æ•°æ®å‘é‡B Returns: ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„æ¬§å‡ é‡Œå¾·è·ç¦»Modify: 2018-08-02\"\"\"def distEclud(vecA, vecB): return np.sqrt(np.sum(np.power(vecA - vecB, 2)))\"\"\"å‡½æ•°è¯´æ˜ï¼šéšæœºåˆå§‹åŒ–kä¸ªè´¨å¿ƒï¼ˆè´¨å¿ƒæ»¡è¶³æ•°æ®è¾¹ç•Œä¹‹å†…ï¼‰Parameters: dataSet - è¾“å…¥çš„æ•°æ®é›† k - é€‰å–kä¸ªè´¨å¿ƒ Returns: centroids - è¿”å›åˆå§‹åŒ–å¾—åˆ°çš„kä¸ªè´¨å¿ƒå‘é‡\"\"\"def randCent(dataSet, k): # å¾—åˆ°æ•°æ®æ ·æœ¬çš„ç»´åº¦ n = np.shape(dataSet)[1] # åˆå§‹åŒ–ä¸ºä¸€ä¸ª(k,n)çš„å…¨é›¶çŸ©é˜µ centroids = np.mat(np.zeros((k, n))) # éå†æ•°æ®é›†çš„æ¯ä¸€ä¸ªç»´åº¦ for j in range(n): # å¾—åˆ°è¯¥åˆ—æ•°æ®çš„æœ€å°å€¼,æœ€å¤§å€¼ minJ = np.min(dataSet[:, j]) maxJ = np.max(dataSet[:, j]) # å¾—åˆ°è¯¥åˆ—æ•°æ®çš„èŒƒå›´(æœ€å¤§å€¼-æœ€å°å€¼) rangeJ = float(maxJ - minJ) # kä¸ªè´¨å¿ƒå‘é‡çš„ç¬¬jç»´æ•°æ®å€¼éšæœºä¸ºä½äº(æœ€å°å€¼ï¼Œæœ€å¤§å€¼)å†…çš„æŸä¸€å€¼ # Create an array of the given shape and populate it with random samples from a uniform distribution over [0, 1). centroids[:, j] = minJ + rangeJ * np.random.rand(k, 1) # è¿”å›åˆå§‹åŒ–å¾—åˆ°çš„kä¸ªè´¨å¿ƒå‘é‡ return centroids\"\"\"å‡½æ•°è¯´æ˜ï¼šk-meansèšç±»ç®—æ³•Parameters: dataSet - ç”¨äºèšç±»çš„æ•°æ®é›† k - é€‰å–kä¸ªè´¨å¿ƒ distMeas - è·ç¦»è®¡ç®—æ–¹æ³•,é»˜è®¤æ¬§æ°è·ç¦»distEclud() createCent - è·å–kä¸ªè´¨å¿ƒçš„æ–¹æ³•,é»˜è®¤éšæœºè·å–randCent() Returns: centroids - kä¸ªèšç±»çš„èšç±»ç»“æœ clusterAssment - èšç±»è¯¯å·®\"\"\"def kMeans(dataSet, k, distMeas=distEclud, createCent=randCent): # è·å–æ•°æ®é›†æ ·æœ¬æ•° m = np.shape(dataSet)[0] # åˆå§‹åŒ–ä¸€ä¸ªï¼ˆm,2ï¼‰å…¨é›¶çŸ©é˜µ clusterAssment = np.mat(np.zeros((m, 2))) # åˆ›å»ºåˆå§‹çš„kä¸ªè´¨å¿ƒå‘é‡ centroids = createCent(dataSet, k) # èšç±»ç»“æœæ˜¯å¦å‘ç”Ÿå˜åŒ–çš„å¸ƒå°”ç±»å‹ clusterChanged = True # åªè¦èšç±»ç»“æœä¸€ç›´å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¸€ç›´æ‰§è¡Œèšç±»ç®—æ³•ï¼Œç›´è‡³æ‰€æœ‰æ•°æ®ç‚¹èšç±»ç»“æœä¸å‘ç”Ÿå˜åŒ– while clusterChanged: # èšç±»ç»“æœå˜åŒ–å¸ƒå°”ç±»å‹ç½®ä¸ºFalse clusterChanged = False # éå†æ•°æ®é›†æ¯ä¸€ä¸ªæ ·æœ¬å‘é‡ for i in range(m): # åˆå§‹åŒ–æœ€å°è·ç¦»ä¸ºæ­£æ— ç©·ï¼Œæœ€å°è·ç¦»å¯¹åº”çš„ç´¢å¼•ä¸º-1 minDist = float('inf') minIndex = -1 # å¾ªç¯kä¸ªç±»çš„è´¨å¿ƒ for j in range(k): # è®¡ç®—æ•°æ®ç‚¹åˆ°è´¨å¿ƒçš„æ¬§æ°è·ç¦» distJI = distMeas(centroids[j, :], dataSet[i, :]) # å¦‚æœè·ç¦»å°äºå½“å‰æœ€å°è·ç¦» if distJI &lt; minDist: # å½“å‰è·ç¦»ä¸ºæœ€å°è·ç¦»ï¼Œæœ€å°è·ç¦»å¯¹åº”ç´¢å¼•åº”ä¸ºj(ç¬¬jä¸ªç±») minDist = distJI minIndex = j # å½“å‰èšç±»ç»“æœä¸­ç¬¬iä¸ªæ ·æœ¬çš„èšç±»ç»“æœå‘ç”Ÿå˜åŒ–ï¼šå¸ƒå°”å€¼ç½®ä¸ºTrueï¼Œç»§ç»­èšç±»ç®—æ³• if clusterAssment[i, 0] != minIndex: clusterChanged = True # æ›´æ–°å½“å‰å˜åŒ–æ ·æœ¬çš„èšç±»ç»“æœå’Œå¹³æ–¹è¯¯å·® clusterAssment[i, :] = minIndex, minDist**2 # æ‰“å°k-meansèšç±»çš„è´¨å¿ƒ # print(centroids) # éå†æ¯ä¸€ä¸ªè´¨å¿ƒ for cent in range(k): # å°†æ•°æ®é›†ä¸­æ‰€æœ‰å±äºå½“å‰è´¨å¿ƒç±»çš„æ ·æœ¬é€šè¿‡æ¡ä»¶è¿‡æ»¤ç­›é€‰å‡ºæ¥ ptsInClust = dataSet[np.nonzero(clusterAssment[:, 0].A == cent)[0]] # è®¡ç®—è¿™äº›æ•°æ®çš„å‡å€¼(axis=0:æ±‚åˆ—å‡å€¼)ï¼Œä½œä¸ºè¯¥ç±»è´¨å¿ƒå‘é‡ centroids[cent, :] = np.mean(ptsInClust, axis=0) # è¿”å›kä¸ªèšç±»ï¼Œèšç±»ç»“æœåŠè¯¯å·® return centroids, clusterAssment \"\"\"å‡½æ•°è¯´æ˜ï¼šç»˜åˆ¶æ•°æ®é›†Parameters: fileName - æ–‡ä»¶å Returns: None\"\"\"def plotDataSet(filename): # å¯¼å…¥æ•°æ® datMat = np.mat(loadDataSet(filename)) # è¿›è¡Œk-meansç®—æ³•å…¶ä¸­kä¸º4 myCentroids, clustAssing = kMeans(datMat, 4) clustAssing = clustAssing.tolist() myCentroids = myCentroids.tolist() xcord = [[], [], [], []] ycord = [[], [], [], []] datMat = datMat.tolist() m = len(clustAssing) for i in range(m): if int(clustAssing[i][0]) == 0: xcord[0].append(datMat[i][0]) ycord[0].append(datMat[i][1]) elif int(clustAssing[i][0]) == 1: xcord[1].append(datMat[i][0]) ycord[1].append(datMat[i][1]) elif int(clustAssing[i][0]) == 2: xcord[2].append(datMat[i][0]) ycord[2].append(datMat[i][1]) elif int(clustAssing[i][0]) == 3: xcord[3].append(datMat[i][0]) ycord[3].append(datMat[i][1]) fig = plt.figure() ax = fig.add_subplot(111) # ç»˜åˆ¶æ ·æœ¬ç‚¹ ax.scatter(xcord[0], ycord[0], s=20, c='b', marker='*', alpha=.5) ax.scatter(xcord[1], ycord[1], s=20, c='r', marker='D', alpha=.5) ax.scatter(xcord[2], ycord[2], s=20, c='c', marker='&gt;', alpha=.5) ax.scatter(xcord[3], ycord[3], s=20, c='k', marker='o', alpha=.5) # ç»˜åˆ¶è´¨å¿ƒ ax.scatter(myCentroids[0][0], myCentroids[0][1], s=100, c='k', marker='+', alpha=.5) ax.scatter(myCentroids[1][0], myCentroids[1][1], s=100, c='k', marker='+', alpha=.5) ax.scatter(myCentroids[2][0], myCentroids[2][1], s=100, c='k', marker='+', alpha=.5) ax.scatter(myCentroids[3][0], myCentroids[3][1], s=100, c='k', marker='+', alpha=.5) plt.title('DataSet') plt.xlabel('X') plt.show()if __name__ == '__main__': plotDataSet('testSet.txt') äºŒåˆ†Kå‡å€¼èšç±»ç®—æ³•ä¼ªä»£ç ï¼š 1234567å°†æ‰€æœ‰ç‚¹çœ‹æˆä¸€ä¸ªç°‡å½“ç°‡æ•°ç›®å°äºKæ—¶ å¯¹æ¯ä¸€ä¸ªç°‡ è®¡ç®—æ€»è¯¯å·® åœ¨ç»™å®šçš„ç°‡ä¸Šé¢è¿›è¡ŒK-å‡å€¼èšç±»ï¼ˆk&#x3D;2) è®¡ç®—å°†è¯¥ç°‡ä¸€åˆ†ä¸ºäºŒä¹‹åçš„æ€»è¯¯å·® é€‰æ‹©ä½¿å¾—è¯¯å·®æœ€å°çš„é‚£ä¸ªç°‡è¿›è¡Œåˆ’åˆ†æ“ä½œ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970\"\"\"å‡½æ•°è¯´æ˜ï¼šäºŒåˆ†k-meansèšç±»ç®—æ³•Parameters: dataSet - ç”¨äºèšç±»çš„æ•°æ®é›† k - é€‰å–kä¸ªè´¨å¿ƒ distMeas - è·ç¦»è®¡ç®—æ–¹æ³•,é»˜è®¤æ¬§æ°è·ç¦»distEclud() Returns: centList - kä¸ªèšç±»çš„èšç±»ç»“æœ clusterAssment - èšç±»è¯¯å·®\"\"\"def biKmeans(dataSet, k, distMeas=distEclud): # è·å–æ•°æ®é›†çš„æ ·æœ¬æ•° m = np.shape(dataSet)[0] # åˆå§‹åŒ–ä¸€ä¸ªå…ƒç´ å‡å€¼0çš„(m, 2)çŸ©é˜µ clusterAssment = np.mat(np.zeros((m, 2))) # è·å–æ•°æ®é›†æ¯ä¸€åˆ—æ•°æ®çš„å‡å€¼ï¼Œç»„æˆä¸€ä¸ªåˆ—è¡¨ centroid0 = np.mean(dataSet, axis=0).tolist()[0] # å½“å‰èšç±»åˆ—è¡¨ä¸ºå°†æ•°æ®é›†èšä¸ºä¸€ç±» centList = [centroid0] # éå†æ¯ä¸ªæ•°æ®é›†æ ·æœ¬ for j in range(m): # è®¡ç®—å½“å‰èšä¸ºä¸€ç±»æ—¶å„ä¸ªæ•°æ®ç‚¹è·ç¦»è´¨å¿ƒçš„å¹³æ–¹è·ç¦» clusterAssment[j, 1] = distMeas(np.mat(centroid0), dataSet[j, :])**2 # å¾ªç¯ï¼Œç›´è‡³äºŒåˆ†k-Meanså€¼è¾¾åˆ°kç±»ä¸ºæ­¢ while (len(centList) &lt; k): # å°†å½“å‰æœ€å°å¹³æ–¹è¯¯å·®ç½®ä¸ºæ­£æ— ç©· lowerSSE = float('inf') # éå†å½“å‰æ¯ä¸ªèšç±» for i in range(len(centList)): # é€šè¿‡æ•°ç»„è¿‡æ»¤ç­›é€‰å‡ºå±äºç¬¬iç±»çš„æ•°æ®é›†åˆ ptsInCurrCluster = dataSet[np.nonzero(clusterAssment[:, 0].A == i)[0], :] # å¯¹è¯¥ç±»åˆ©ç”¨äºŒåˆ†k-meansç®—æ³•è¿›è¡Œåˆ’åˆ†ï¼Œè¿”å›åˆ’åˆ†åçš„ç»“æœä»¥åŠè¯¯å·® centroidMat, splitClustAss = kMeans(ptsInCurrCluster, 2, distMeas) # è®¡ç®—è¯¥ç±»åˆ’åˆ†åä¸¤ä¸ªç±»çš„è¯¯å·®å¹³æ–¹å’Œ sseSplit = np.sum(splitClustAss[:, 1]) # è®¡ç®—æ•°æ®é›†ä¸­ä¸å±äºè¯¥ç±»çš„æ•°æ®çš„è¯¯å·®å¹³æ–¹å’Œ sseNotSplit = np.sum(clusterAssment[np.nonzero(clusterAssment[:, 0].A != i)[0], 1]) # æ‰“å°è¿™ä¸¤é¡¹è¯¯å·®å€¼ print('sseSplit = %f, and notSplit = %f' % (sseSplit, sseNotSplit)) # åˆ’åˆ†ç¬¬iç±»åæ€»è¯¯å·®å°äºå½“å‰æœ€å°æ€»è¯¯å·® if (sseSplit + sseNotSplit) &lt; lowerSSE: # ç¬¬iç±»ä½œä¸ºæœ¬æ¬¡åˆ’åˆ†ç±» bestCentToSplit = i # ç¬¬iç±»åˆ’åˆ†åå¾—åˆ°çš„ä¸¤ä¸ªè´¨å¿ƒå‘é‡ bestNewCents = centroidMat # å¤åˆ¶ç¬¬iç±»ä¸­æ•°æ®ç‚¹çš„èšç±»ç»“æœå³è¯¯å·®å€¼ bestClustAss = splitClustAss.copy() # å°†åˆ’åˆ†ç¬¬iç±»åçš„æ€»è¯¯å·®ä½œä¸ºå½“å‰æœ€å°è¯¯å·® lowerSSE = sseSplit + sseNotSplit # æ•°ç»„è¿‡æ»¤é€‰å‡ºæœ¬æ¬¡2-meansèšç±»åˆ’åˆ†åç±»ç¼–å·ä¸º1æ•°æ®ç‚¹ï¼Œå°†è¿™äº›æ•°æ®ç‚¹ç±»ç¼–å·å˜ä¸º # å½“å‰ç±»ä¸ªæ•°+1ï¼Œ ä½œä¸ºæ–°çš„ä¸€ä¸ªèšç±» bestClustAss[np.nonzero(bestClustAss[:, 0].A == 1)[0], 0] = len(centList) # åŒç†ï¼Œå°†åˆ’åˆ†æ•°æ®ä¸­ç±»ç¼–å·ä¸º0çš„æ•°æ®ç‚¹çš„ç±»ç¼–å·ä»ç½®ä¸ºè¢«åˆ’åˆ†çš„ç±»ç¼–å·ï¼Œä½¿ç±»ç¼–å· # è¿ç»­ä¸å‡ºç°ç©ºç¼º bestClustAss[np.nonzero(bestClustAss[:, 0].A == 0)[0], 0] = bestCentToSplit # æ‰“å°æœ¬æ¬¡æ‰§è¡Œ2-meansèšç±»ç®—æ³•çš„ç±» print('the bestCentToSplit is %d' % bestCentToSplit) # æ‰“å°è¢«åˆ’åˆ†çš„ç±»çš„æ•°æ®ä¸ªæ•° print('the len of bestClustAss is %d' % len(bestClustAss)) # æ›´æ–°è´¨å¿ƒåˆ—è¡¨ä¸­å˜åŒ–åçš„è´¨å¿ƒå‘é‡ centList[bestCentToSplit] = bestNewCents[0, :] # æ·»åŠ æ–°çš„ç±»çš„è´¨å¿ƒå‘é‡ centList.append(bestNewCents[1, :]) # æ›´æ–°clusterAssmentåˆ—è¡¨ä¸­å‚ä¸2-meansèšç±»æ•°æ®ç‚¹å˜åŒ–åçš„åˆ†ç±»ç¼–å·ï¼ŒåŠæ•°æ®è¯¥ç±»çš„è¯¯å·®å¹³æ–¹ clusterAssment[np.nonzero(clusterAssment[:, 0].A == bestCentToSplit)[0], :] = bestClustAss # è¿”å›èšç±»ç»“æœ return centList, clusterAssment æºä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260# -*- coding: utf-8 -*-\"\"\"Created on Fri Aug 3 13:53:40 2018@author: wzy\"\"\"import matplotlib.pyplot as pltimport numpy as np\"\"\"å‡½æ•°è¯´æ˜ï¼šå°†æ–‡æœ¬æ–‡æ¡£ä¸­çš„æ•°æ®è¯»å…¥åˆ°pythonä¸­Parameters: fileName - æ–‡ä»¶å Returns: dataMat - æ•°æ®çŸ©é˜µ\"\"\"def loadDataSet(fileName): dataMat = [] fr = open(fileName) for line in fr.readlines(): curLine = line.strip().split('\\t') fltLine = list(map(float, curLine)) dataMat.append(fltLine) return dataMat\"\"\"å‡½æ•°è¯´æ˜ï¼šæ•°æ®å‘é‡è®¡ç®—æ¬§å¼è·ç¦»Parameters: vecA - æ•°æ®å‘é‡A vecB - æ•°æ®å‘é‡B Returns: ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„æ¬§å‡ é‡Œå¾·è·ç¦»\"\"\"def distEclud(vecA, vecB): return np.sqrt(np.sum(np.power(vecA - vecB, 2)))\"\"\"å‡½æ•°è¯´æ˜ï¼šéšæœºåˆå§‹åŒ–kä¸ªè´¨å¿ƒï¼ˆè´¨å¿ƒæ»¡è¶³æ•°æ®è¾¹ç•Œä¹‹å†…ï¼‰Parameters: dataSet - è¾“å…¥çš„æ•°æ®é›† k - é€‰å–kä¸ªè´¨å¿ƒ Returns: centroids - è¿”å›åˆå§‹åŒ–å¾—åˆ°çš„kä¸ªè´¨å¿ƒå‘é‡\"\"\"def randCent(dataSet, k): # å¾—åˆ°æ•°æ®æ ·æœ¬çš„ç»´åº¦ n = np.shape(dataSet)[1] # åˆå§‹åŒ–ä¸ºä¸€ä¸ª(k,n)çš„å…¨é›¶çŸ©é˜µ centroids = np.mat(np.zeros((k, n))) # éå†æ•°æ®é›†çš„æ¯ä¸€ä¸ªç»´åº¦ for j in range(n): # å¾—åˆ°è¯¥åˆ—æ•°æ®çš„æœ€å°å€¼,æœ€å¤§å€¼ minJ = np.min(dataSet[:, j]) maxJ = np.max(dataSet[:, j]) # å¾—åˆ°è¯¥åˆ—æ•°æ®çš„èŒƒå›´(æœ€å¤§å€¼-æœ€å°å€¼) rangeJ = float(maxJ - minJ) # kä¸ªè´¨å¿ƒå‘é‡çš„ç¬¬jç»´æ•°æ®å€¼éšæœºä¸ºä½äº(æœ€å°å€¼ï¼Œæœ€å¤§å€¼)å†…çš„æŸä¸€å€¼ # Create an array of the given shape and populate it with random samples from a uniform distribution over [0, 1). centroids[:, j] = minJ + rangeJ * np.random.rand(k, 1) # è¿”å›åˆå§‹åŒ–å¾—åˆ°çš„kä¸ªè´¨å¿ƒå‘é‡ return centroids\"\"\"å‡½æ•°è¯´æ˜ï¼šk-meansèšç±»ç®—æ³•Parameters: dataSet - ç”¨äºèšç±»çš„æ•°æ®é›† k - é€‰å–kä¸ªè´¨å¿ƒ distMeas - è·ç¦»è®¡ç®—æ–¹æ³•,é»˜è®¤æ¬§æ°è·ç¦»distEclud() createCent - è·å–kä¸ªè´¨å¿ƒçš„æ–¹æ³•,é»˜è®¤éšæœºè·å–randCent() Returns: centroids - kä¸ªèšç±»çš„èšç±»ç»“æœ clusterAssment - èšç±»è¯¯å·®\"\"\"def kMeans(dataSet, k, distMeas=distEclud, createCent=randCent): # è·å–æ•°æ®é›†æ ·æœ¬æ•° m = np.shape(dataSet)[0] # åˆå§‹åŒ–ä¸€ä¸ªï¼ˆm,2ï¼‰å…¨é›¶çŸ©é˜µ clusterAssment = np.mat(np.zeros((m, 2))) # åˆ›å»ºåˆå§‹çš„kä¸ªè´¨å¿ƒå‘é‡ centroids = createCent(dataSet, k) # èšç±»ç»“æœæ˜¯å¦å‘ç”Ÿå˜åŒ–çš„å¸ƒå°”ç±»å‹ clusterChanged = True # åªè¦èšç±»ç»“æœä¸€ç›´å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¸€ç›´æ‰§è¡Œèšç±»ç®—æ³•ï¼Œç›´è‡³æ‰€æœ‰æ•°æ®ç‚¹èšç±»ç»“æœä¸å‘ç”Ÿå˜åŒ– while clusterChanged: # èšç±»ç»“æœå˜åŒ–å¸ƒå°”ç±»å‹ç½®ä¸ºFalse clusterChanged = False # éå†æ•°æ®é›†æ¯ä¸€ä¸ªæ ·æœ¬å‘é‡ for i in range(m): # åˆå§‹åŒ–æœ€å°è·ç¦»ä¸ºæ­£æ— ç©·ï¼Œæœ€å°è·ç¦»å¯¹åº”çš„ç´¢å¼•ä¸º-1 minDist = float('inf') minIndex = -1 # å¾ªç¯kä¸ªç±»çš„è´¨å¿ƒ for j in range(k): # è®¡ç®—æ•°æ®ç‚¹åˆ°è´¨å¿ƒçš„æ¬§æ°è·ç¦» distJI = distMeas(centroids[j, :], dataSet[i, :]) # å¦‚æœè·ç¦»å°äºå½“å‰æœ€å°è·ç¦» if distJI &lt; minDist: # å½“å‰è·ç¦»ä¸ºæœ€å°è·ç¦»ï¼Œæœ€å°è·ç¦»å¯¹åº”ç´¢å¼•åº”ä¸ºj(ç¬¬jä¸ªç±») minDist = distJI minIndex = j # å½“å‰èšç±»ç»“æœä¸­ç¬¬iä¸ªæ ·æœ¬çš„èšç±»ç»“æœå‘ç”Ÿå˜åŒ–ï¼šå¸ƒå°”å€¼ç½®ä¸ºTrueï¼Œç»§ç»­èšç±»ç®—æ³• if clusterAssment[i, 0] != minIndex: clusterChanged = True # æ›´æ–°å½“å‰å˜åŒ–æ ·æœ¬çš„èšç±»ç»“æœå’Œå¹³æ–¹è¯¯å·® clusterAssment[i, :] = minIndex, minDist**2 # æ‰“å°k-meansèšç±»çš„è´¨å¿ƒ # print(centroids) # éå†æ¯ä¸€ä¸ªè´¨å¿ƒ for cent in range(k): # å°†æ•°æ®é›†ä¸­æ‰€æœ‰å±äºå½“å‰è´¨å¿ƒç±»çš„æ ·æœ¬é€šè¿‡æ¡ä»¶è¿‡æ»¤ç­›é€‰å‡ºæ¥ ptsInClust = dataSet[np.nonzero(clusterAssment[:, 0].A == cent)[0]] # è®¡ç®—è¿™äº›æ•°æ®çš„å‡å€¼(axis=0:æ±‚åˆ—å‡å€¼)ï¼Œä½œä¸ºè¯¥ç±»è´¨å¿ƒå‘é‡ centroids[cent, :] = np.mean(ptsInClust, axis=0) # è¿”å›kä¸ªèšç±»ï¼Œèšç±»ç»“æœåŠè¯¯å·® return centroids, clusterAssment\"\"\"å‡½æ•°è¯´æ˜ï¼šäºŒåˆ†k-meansèšç±»ç®—æ³•Parameters: dataSet - ç”¨äºèšç±»çš„æ•°æ®é›† k - é€‰å–kä¸ªè´¨å¿ƒ distMeas - è·ç¦»è®¡ç®—æ–¹æ³•,é»˜è®¤æ¬§æ°è·ç¦»distEclud() Returns: centList - kä¸ªèšç±»çš„èšç±»ç»“æœ clusterAssment - èšç±»è¯¯å·®\"\"\"def biKmeans(dataSet, k, distMeas=distEclud): # è·å–æ•°æ®é›†çš„æ ·æœ¬æ•° m = np.shape(dataSet)[0] # åˆå§‹åŒ–ä¸€ä¸ªå…ƒç´ å‡å€¼0çš„(m, 2)çŸ©é˜µ clusterAssment = np.mat(np.zeros((m, 2))) # è·å–æ•°æ®é›†æ¯ä¸€åˆ—æ•°æ®çš„å‡å€¼ï¼Œç»„æˆä¸€ä¸ªåˆ—è¡¨ centroid0 = np.mean(dataSet, axis=0).tolist()[0] # å½“å‰èšç±»åˆ—è¡¨ä¸ºå°†æ•°æ®é›†èšä¸ºä¸€ç±» centList = [centroid0] # éå†æ¯ä¸ªæ•°æ®é›†æ ·æœ¬ for j in range(m): # è®¡ç®—å½“å‰èšä¸ºä¸€ç±»æ—¶å„ä¸ªæ•°æ®ç‚¹è·ç¦»è´¨å¿ƒçš„å¹³æ–¹è·ç¦» clusterAssment[j, 1] = distMeas(np.mat(centroid0), dataSet[j, :])**2 # å¾ªç¯ï¼Œç›´è‡³äºŒåˆ†k-Meanså€¼è¾¾åˆ°kç±»ä¸ºæ­¢ while (len(centList) &lt; k): # å°†å½“å‰æœ€å°å¹³æ–¹è¯¯å·®ç½®ä¸ºæ­£æ— ç©· lowerSSE = float('inf') # éå†å½“å‰æ¯ä¸ªèšç±» for i in range(len(centList)): # é€šè¿‡æ•°ç»„è¿‡æ»¤ç­›é€‰å‡ºå±äºç¬¬iç±»çš„æ•°æ®é›†åˆ ptsInCurrCluster = dataSet[np.nonzero(clusterAssment[:, 0].A == i)[0], :] # å¯¹è¯¥ç±»åˆ©ç”¨äºŒåˆ†k-meansç®—æ³•è¿›è¡Œåˆ’åˆ†ï¼Œè¿”å›åˆ’åˆ†åçš„ç»“æœä»¥åŠè¯¯å·® centroidMat, splitClustAss = kMeans(ptsInCurrCluster, 2, distMeas) # è®¡ç®—è¯¥ç±»åˆ’åˆ†åä¸¤ä¸ªç±»çš„è¯¯å·®å¹³æ–¹å’Œ sseSplit = np.sum(splitClustAss[:, 1]) # è®¡ç®—æ•°æ®é›†ä¸­ä¸å±äºè¯¥ç±»çš„æ•°æ®çš„è¯¯å·®å¹³æ–¹å’Œ sseNotSplit = np.sum(clusterAssment[np.nonzero(clusterAssment[:, 0].A != i)[0], 1]) # æ‰“å°è¿™ä¸¤é¡¹è¯¯å·®å€¼ print('sseSplit = %f, and notSplit = %f' % (sseSplit, sseNotSplit)) # åˆ’åˆ†ç¬¬iç±»åæ€»è¯¯å·®å°äºå½“å‰æœ€å°æ€»è¯¯å·® if (sseSplit + sseNotSplit) &lt; lowerSSE: # ç¬¬iç±»ä½œä¸ºæœ¬æ¬¡åˆ’åˆ†ç±» bestCentToSplit = i # ç¬¬iç±»åˆ’åˆ†åå¾—åˆ°çš„ä¸¤ä¸ªè´¨å¿ƒå‘é‡ bestNewCents = centroidMat # å¤åˆ¶ç¬¬iç±»ä¸­æ•°æ®ç‚¹çš„èšç±»ç»“æœå³è¯¯å·®å€¼ bestClustAss = splitClustAss.copy() # å°†åˆ’åˆ†ç¬¬iç±»åçš„æ€»è¯¯å·®ä½œä¸ºå½“å‰æœ€å°è¯¯å·® lowerSSE = sseSplit + sseNotSplit # æ•°ç»„è¿‡æ»¤é€‰å‡ºæœ¬æ¬¡2-meansèšç±»åˆ’åˆ†åç±»ç¼–å·ä¸º1æ•°æ®ç‚¹ï¼Œå°†è¿™äº›æ•°æ®ç‚¹ç±»ç¼–å·å˜ä¸º # å½“å‰ç±»ä¸ªæ•°+1ï¼Œ ä½œä¸ºæ–°çš„ä¸€ä¸ªèšç±» bestClustAss[np.nonzero(bestClustAss[:, 0].A == 1)[0], 0] = len(centList) # åŒç†ï¼Œå°†åˆ’åˆ†æ•°æ®ä¸­ç±»ç¼–å·ä¸º0çš„æ•°æ®ç‚¹çš„ç±»ç¼–å·ä»ç½®ä¸ºè¢«åˆ’åˆ†çš„ç±»ç¼–å·ï¼Œä½¿ç±»ç¼–å· # è¿ç»­ä¸å‡ºç°ç©ºç¼º bestClustAss[np.nonzero(bestClustAss[:, 0].A == 0)[0], 0] = bestCentToSplit # æ‰“å°æœ¬æ¬¡æ‰§è¡Œ2-meansèšç±»ç®—æ³•çš„ç±» print('the bestCentToSplit is %d' % bestCentToSplit) # æ‰“å°è¢«åˆ’åˆ†çš„ç±»çš„æ•°æ®ä¸ªæ•° print('the len of bestClustAss is %d' % len(bestClustAss)) # æ›´æ–°è´¨å¿ƒåˆ—è¡¨ä¸­å˜åŒ–åçš„è´¨å¿ƒå‘é‡ centList[bestCentToSplit] = bestNewCents[0, :] # æ·»åŠ æ–°çš„ç±»çš„è´¨å¿ƒå‘é‡ centList.append(bestNewCents[1, :]) # æ›´æ–°clusterAssmentåˆ—è¡¨ä¸­å‚ä¸2-meansèšç±»æ•°æ®ç‚¹å˜åŒ–åçš„åˆ†ç±»ç¼–å·ï¼ŒåŠæ•°æ®è¯¥ç±»çš„è¯¯å·®å¹³æ–¹ clusterAssment[np.nonzero(clusterAssment[:, 0].A == bestCentToSplit)[0], :] = bestClustAss # è¿”å›èšç±»ç»“æœ return centList, clusterAssment\"\"\"å‡½æ•°è¯´æ˜ï¼šç»˜åˆ¶æ•°æ®é›†Parameters: fileName - æ–‡ä»¶å k - é€‰å–kä¸ªè´¨å¿ƒ Returns: None\"\"\"def plotDataSet(filename, k): # å¯¼å…¥æ•°æ® datMat = np.mat(loadDataSet(filename)) # è¿›è¡Œk-meansç®—æ³•å…¶ä¸­kä¸º4 centList, clusterAssment = biKmeans(datMat, k) clusterAssment = clusterAssment.tolist() xcord = [[], [], []] ycord = [[], [], []] datMat = datMat.tolist() m = len(clusterAssment) for i in range(m): if int(clusterAssment[i][0]) == 0: xcord[0].append(datMat[i][0]) ycord[0].append(datMat[i][1]) elif int(clusterAssment[i][0]) == 1: xcord[1].append(datMat[i][0]) ycord[1].append(datMat[i][1]) elif int(clusterAssment[i][0]) == 2: xcord[2].append(datMat[i][0]) ycord[2].append(datMat[i][1]) fig = plt.figure() ax = fig.add_subplot(111) # ç»˜åˆ¶æ ·æœ¬ç‚¹ ax.scatter(xcord[0], ycord[0], s=20, c='b', marker='*', alpha=.5) ax.scatter(xcord[1], ycord[1], s=20, c='r', marker='D', alpha=.5) ax.scatter(xcord[2], ycord[2], s=20, c='c', marker='&gt;', alpha=.5) # ç»˜åˆ¶è´¨å¿ƒ for i in range(k): ax.scatter(centList[i].tolist()[0][0], centList[i].tolist()[0][1], s=100, c='k', marker='+', alpha=.5) # ax.scatter(centList[0].tolist()[0][0], centList[0].tolist()[0][1], s=100, c='k', marker='+', alpha=.5) # ax.scatter(centList[1].tolist()[0][0], centList[1].tolist()[0][1], s=100, c='k', marker='+', alpha=.5) # ax.scatter(centList[2].tolist()[0][0], centList[2].tolist()[0][1], s=100, c='k', marker='+', alpha=.5) plt.title('DataSet') plt.xlabel('X') plt.show() if __name__ == '__main__': datMat = np.mat(loadDataSet('testSet2.txt')) centList, myNewAssments = biKmeans(datMat, 3) plotDataSet('testSet2.txt', 3)","categories":[{"name":"Machine_Learning","slug":"Machine-Learning","permalink":"https://shyshy903.github.io/categories/Machine-Learning/"}],"tags":[{"name":"ML","slug":"ML","permalink":"https://shyshy903.github.io/tags/ML/"}]},{"title":"ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ã€Šè¥¿ç“œä¹¦ã€‹ç¬”è®°ï¼ˆä¸ƒï¼‰- SVM","slug":"Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ7 -SVM)","date":"2019-11-30T07:30:00.000Z","updated":"2020-02-11T08:48:55.572Z","comments":true,"path":"2019/11/30/Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ7 -SVM)/","link":"","permalink":"https://shyshy903.github.io/2019/11/30/Machine_Learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%887%20-SVM)/","excerpt":"","text":"SVMï¼ˆæ”¯æŒå‘é‡æœºï¼‰æ”¯æŒå‘é‡ï¼ˆsupport vector)å°±æ˜¯ç¦»åˆ†éš”è¶…å¹³é¢æœ€è¿‘çš„é‚£äº›ç‚¹ã€‚æœ€å¤§åŒ–æ”¯æŒå‘é‡åˆ°åˆ†å‰²é¢çš„è·ç¦»ã€‚ æ ¸å‡½æ•°ï¼ˆkneral function)æ ¸å‡½æ•°å°±æ˜¯å°†æ•°æ®è½¬åŒ–æˆæ˜“äºåˆ†ç±»å™¨ç†è§£çš„ä¸€ç§å½¢å¼ï¼Œç›®å‰ç›¸å¯¹æµè¡Œçš„ä¸€ç§æ ¸å‡½æ•°ï¼šå¾„å‘åŸºå‡½æ•° å¾„å‘åŸºå‡½æ•°æŠŠæ•°æ®ä»ä¸€ä¸ªç‰¹å¾ç©ºé—´æ˜ å°„åˆ°å¦ä¸€ä¸ªç‰¹å¾ç©ºé—´$k(x,y)=exp(\\frac{-||x-y||^2}{2\\sigma^2})$å…¶ä¸­$\\sigma$æ˜¯ç¡®å®šåˆ°è¾¾ç‡ï¼Œæ˜¯å‡½æ•°å€¼è·Œå€’0çš„é€Ÿåº¦å‚æ•° ä»£ç ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447# -*- coding: utf-8 -*-\"\"\"Created on Wed Jul 25 11:04:01 2018k1è¶Šå¤§ä¼šè¿‡æ‹Ÿåˆ@author: wzy\"\"\"import matplotlib.pyplot as pltimport numpy as npimport random\"\"\"ç±»è¯´æ˜ï¼šç»´æŠ¤æ‰€æœ‰éœ€è¦æ“ä½œçš„å€¼Parameters: dataMatIn - æ•°æ®çŸ©é˜µ classLabels - æ•°æ®æ ‡ç­¾ C - æ¾å¼›å˜é‡ toler - å®¹é”™ç‡ kTup - åŒ…å«æ ¸å‡½æ•°ä¿¡æ¯çš„å…ƒç»„ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å­˜æ”¾è¯¥æ ¸å‡½æ•°ç±»åˆ«ï¼Œç¬¬äºŒä¸ªå‚æ•°å­˜æ”¾å¿…è¦çš„æ ¸å‡½æ•°éœ€è¦ç”¨åˆ°çš„å‚æ•° Returns: None\"\"\"class optStruct: def __init__(self, dataMatIn, classLabels, C, toler, kTup): # æ•°æ®çŸ©é˜µ self.X = dataMatIn # æ•°æ®æ ‡ç­¾ self.labelMat = classLabels # æ¾å¼›å˜é‡ self.C = C # å®¹é”™ç‡ self.tol = toler # çŸ©é˜µçš„è¡Œæ•° self.m = np.shape(dataMatIn)[0] # æ ¹æ®çŸ©é˜µè¡Œæ•°åˆå§‹åŒ–alphasçŸ©é˜µï¼Œä¸€ä¸ªmè¡Œ1åˆ—çš„å…¨é›¶åˆ—å‘é‡ self.alphas = np.mat(np.zeros((self.m, 1))) # åˆå§‹åŒ–bå‚æ•°ä¸º0 self.b = 0 # æ ¹æ®çŸ©é˜µè¡Œæ•°åˆå§‹åŒ–è¯¯å·®ç¼“å­˜çŸ©é˜µï¼Œç¬¬ä¸€åˆ—ä¸ºæ˜¯å¦æœ‰æ•ˆæ ‡å¿—ä½ï¼Œç¬¬äºŒåˆ—ä¸ºå®é™…çš„è¯¯å·®Eçš„å€¼ self.eCache = np.mat(np.zeros((self.m, 2))) # åˆå§‹åŒ–æ ¸K self.K = np.mat(np.zeros((self.m, self.m))) # è®¡ç®—æ‰€æœ‰æ•°æ®çš„æ ¸K for i in range(self.m): self.K[:, i] = kernelTrans(self.X, self.X[i, :], kTup)\"\"\"å‡½æ•°è¯´æ˜ï¼šé€šè¿‡æ ¸å‡½æ•°å°†æ•°æ®è½¬æ¢æ›´é«˜ç»´ç©ºé—´Parameters: X - æ•°æ®çŸ©é˜µ A - å•ä¸ªæ•°æ®çš„å‘é‡ kTup - åŒ…å«æ ¸å‡½æ•°ä¿¡æ¯çš„å…ƒç»„ Returns: K - è®¡ç®—çš„æ ¸K\"\"\"def kernelTrans(X, A, kTup): # è¯»å–Xçš„è¡Œåˆ—æ•° m, n = np.shape(X) # Kåˆå§‹åŒ–ä¸ºmè¡Œ1åˆ—çš„é›¶å‘é‡ K = np.mat(np.zeros((m, 1))) # çº¿æ€§æ ¸å‡½æ•°åªè¿›è¡Œå†…ç§¯ if kTup[0] == 'lin': K = X * A.T # é«˜æ–¯æ ¸å‡½æ•°ï¼Œæ ¹æ®é«˜æ–¯æ ¸å‡½æ•°å…¬å¼è®¡ç®— elif kTup[0] == 'rbf': for j in range(m): deltaRow = X[j, :] - A K[j] = deltaRow * deltaRow.T K = np.exp(K / (-1 * kTup[1] ** 2)) else: raise NameError('æ ¸å‡½æ•°æ— æ³•è¯†åˆ«') return K \"\"\"å‡½æ•°è¯´æ˜ï¼šè¯»å–æ•°æ®Parameters: fileName - æ–‡ä»¶å Returns: dataMat - æ•°æ®çŸ©é˜µ labelMat - æ•°æ®æ ‡ç­¾\"\"\"def loadDataSet(fileName): # æ•°æ®çŸ©é˜µ dataMat = [] # æ ‡ç­¾å‘é‡ labelMat = [] # æ‰“å¼€æ–‡ä»¶ fr = open(fileName) # é€è¡Œè¯»å– for line in fr.readlines(): # å»æ‰æ¯ä¸€è¡Œé¦–å°¾çš„ç©ºç™½ç¬¦ï¼Œä¾‹å¦‚'\\n','\\r','\\t',' ' # å°†æ¯ä¸€è¡Œå†…å®¹æ ¹æ®'\\t'ç¬¦è¿›è¡Œåˆ‡ç‰‡ lineArr = line.strip().split('\\t') # æ·»åŠ æ•°æ®(100ä¸ªå…ƒç´ æ’æˆä¸€è¡Œ) dataMat.append([float(lineArr[0]), float(lineArr[1])]) # æ·»åŠ æ ‡ç­¾(100ä¸ªå…ƒç´ æ’æˆä¸€è¡Œ) labelMat.append(float(lineArr[2])) return dataMat, labelMat\"\"\"å‡½æ•°è¯´æ˜ï¼šè®¡ç®—è¯¯å·®Parameters: oS - æ•°æ®ç»“æ„ k - æ ‡å·ä¸ºkçš„æ•°æ® Returns: Ek - æ ‡å·ä¸ºkçš„æ•°æ®è¯¯å·®\"\"\"def calcEk(oS, k): # multiply(a,b)å°±æ˜¯ä¸ªä¹˜æ³•ï¼Œå¦‚æœa,bæ˜¯ä¸¤ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆå¯¹åº”å…ƒç´ ç›¸ä¹˜ # .Tä¸ºè½¬ç½® fXk = float(np.multiply(oS.alphas, oS.labelMat).T * oS.K[:, k] + oS.b) # è®¡ç®—è¯¯å·®é¡¹ Ek = fXk - float(oS.labelMat[k]) # è¿”å›è¯¯å·®é¡¹ return Ek\"\"\"å‡½æ•°è¯´æ˜ï¼šéšæœºé€‰æ‹©alpha_jParameters: i - alpha_içš„ç´¢å¼•å€¼ m - alphaå‚æ•°ä¸ªæ•° Returns: j - alpha_jçš„ç´¢å¼•å€¼\"\"\"def selectJrand(i, m): j = i while(j == i): # uniform()æ–¹æ³•å°†éšæœºç”Ÿæˆä¸€ä¸ªå®æ•°ï¼Œå®ƒåœ¨[x, y)èŒƒå›´å†… j = int(random.uniform(0, m)) return j\"\"\"å‡½æ•°è¯´æ˜ï¼šå†…å¾ªç¯å¯å‘æ–¹å¼2Parameters: i - æ ‡å·ä¸ºiçš„æ•°æ®çš„ç´¢å¼•å€¼ oS - æ•°æ®ç»“æ„ Ei - æ ‡å·ä¸ºiçš„æ•°æ®è¯¯å·® Returns: j - æ ‡å·ä¸ºjçš„æ•°æ®çš„ç´¢å¼•å€¼ maxK - æ ‡å·ä¸ºmaxKçš„æ•°æ®çš„ç´¢å¼•å€¼ Ej - æ ‡å·ä¸ºjçš„æ•°æ®è¯¯å·®\"\"\"def selectJ(i, oS, Ei): # åˆå§‹åŒ– maxK = -1 maxDeltaE = 0 Ej = 0 # æ ¹æ®Eiæ›´æ–°è¯¯å·®ç¼“å­˜ oS.eCache[i] = [1, Ei] # å¯¹ä¸€ä¸ªçŸ©é˜µ.Aè½¬æ¢ä¸ºArrayç±»å‹ # è¿”å›è¯¯å·®ä¸ä¸º0çš„æ•°æ®çš„ç´¢å¼•å€¼ validEcacheList = np.nonzero(oS.eCache[:, 0].A)[0] # æœ‰ä¸ä¸º0çš„è¯¯å·® if(len(validEcacheList) &gt; 1): # éå†ï¼Œæ‰¾åˆ°æœ€å¤§çš„Ek for k in validEcacheList: # ä¸è®¡ç®—k==ièŠ‚çœæ—¶é—´ if k == i: continue # è®¡ç®—Ek Ek = calcEk(oS, k) # è®¡ç®—|Ei - Ek| deltaE = abs(Ei - Ek) # æ‰¾åˆ°maxDeltaE if(deltaE &gt; maxDeltaE): maxK = k maxDeltaE = deltaE Ej = Ek # è¿”å›maxKï¼ŒEj return maxK, Ej # æ²¡æœ‰ä¸ä¸º0çš„è¯¯å·® else: # éšæœºé€‰æ‹©alpha_jçš„ç´¢å¼•å€¼ j = selectJrand(i, oS.m) # è®¡ç®—Ej Ej = calcEk(oS, j) # è¿”å›jï¼ŒEj return j, Ej\"\"\"å‡½æ•°è¯´æ˜ï¼šè®¡ç®—Ek,å¹¶æ›´æ–°è¯¯å·®ç¼“å­˜Parameters: oS - æ•°æ®ç»“æ„ k - æ ‡å·ä¸ºkçš„æ•°æ®çš„ç´¢å¼•å€¼ Returns: None\"\"\"def updateEk(oS, k): # è®¡ç®—Ek Ek = calcEk(oS, k) # æ›´æ–°è¯¯å·®ç¼“å­˜ oS.eCache[k] = [1, Ek] \"\"\"å‡½æ•°è¯´æ˜ï¼šä¿®å‰ªalpha_jParameters: aj - alpha_jå€¼ H - alphaä¸Šé™ L - alphaä¸‹é™ Returns: aj - alpha_jå€¼Modify: 2018-07-24\"\"\"def clipAlpha(aj, H, L): if aj &gt; H: aj = H if L &gt; aj: aj = L return aj\"\"\"å‡½æ•°è¯´æ˜ï¼šä¼˜åŒ–çš„SMOç®—æ³•Parameters: i - æ ‡å·ä¸ºiçš„æ•°æ®çš„ç´¢å¼•å€¼ oS - æ•°æ®ç»“æ„ Returns: 1 - æœ‰ä»»æ„ä¸€å¯¹alphaå€¼å‘ç”Ÿå˜åŒ– 0 - æ²¡æœ‰ä»»æ„ä¸€å¯¹alphaå€¼å‘ç”Ÿå˜åŒ–æˆ–å˜åŒ–å¤ªå°\"\"\"def innerL(i, oS): # æ­¥éª¤1ï¼šè®¡ç®—è¯¯å·®Ei Ei = calcEk(oS, i) # ä¼˜åŒ–alpha,è®¾å®šä¸€å®šçš„å®¹é”™ç‡ if((oS.labelMat[i] * Ei &lt; -oS.tol) and (oS.alphas[i] &lt; oS.C)) or ((oS.labelMat[i] * Ei &gt; oS.tol) and (oS.alphas[i] &gt; 0)): # ä½¿ç”¨å†…å¾ªç¯å¯å‘æ–¹å¼2é€‰æ‹©alpha_j,å¹¶è®¡ç®—Ej j, Ej = selectJ(i, oS, Ei) # ä¿å­˜æ›´æ–°å‰çš„alphaå€¼ï¼Œä½¿ç”¨æ·±å±‚æ‹·è´ alphaIold = oS.alphas[i].copy() alphaJold = oS.alphas[j].copy() # æ­¥éª¤2ï¼šè®¡ç®—ä¸Šç•ŒHå’Œä¸‹ç•ŒL if(oS.labelMat[i] != oS.labelMat[j]): L = max(0, oS.alphas[j] - oS.alphas[i]) H = min(oS.C, oS.C + oS.alphas[j] - oS.alphas[i]) else: L = max(0, oS.alphas[j] + oS.alphas[i] - oS.C) H = min(oS.C, oS.alphas[j] + oS.alphas[i]) if L == H: print(\"L == H\") return 0 # æ­¥éª¤3ï¼šè®¡ç®—eta eta = 2.0 * oS.K[i, j] - oS.K[i, i] - oS.K[j, j] if eta &gt;= 0: print(\"eta &gt;= 0\") return 0 # æ­¥éª¤4ï¼šæ›´æ–°alpha_j oS.alphas[j] -= oS.labelMat[j] * (Ei - Ej) / eta # æ­¥éª¤5ï¼šä¿®å‰ªalpha_j oS.alphas[j] = clipAlpha(oS.alphas[j], H, L) # æ›´æ–°Ejè‡³è¯¯å·®ç¼“å­˜ updateEk(oS, j) if(abs(oS.alphas[j] - alphaJold) &lt; 0.00001): print(\"alpha_jå˜åŒ–å¤ªå°\") return 0 # æ­¥éª¤6ï¼šæ›´æ–°alpha_i oS.alphas[i] += oS.labelMat[i] * oS.labelMat[j] * (alphaJold - oS.alphas[j]) # æ›´æ–°Eiè‡³è¯¯å·®ç¼“å­˜ updateEk(oS, i) # æ­¥éª¤7ï¼šæ›´æ–°b_1å’Œb_2: b1 = oS.b - Ei - oS.labelMat[i] * (oS.alphas[i] - alphaIold) * oS.K[i, i] - oS.labelMat[j] * (oS.alphas[j] - alphaJold) * oS.K[j, i] b2 = oS.b - Ej - oS.labelMat[i] * (oS.alphas[i] - alphaIold) * oS.K[i, j] - oS.labelMat[j] * (oS.alphas[j] - alphaJold) * oS.K[j, j] # æ­¥éª¤8ï¼šæ ¹æ®b_1å’Œb_2æ›´æ–°b if(0 &lt; oS.alphas[i] &lt; oS.C): oS.b = b1 elif(0 &lt; oS.alphas[j] &lt; oS.C): oS.b = b2 else: oS.b = (b1 + b2) / 2.0 return 1 else: return 0 \"\"\"å‡½æ•°è¯´æ˜ï¼šå®Œæ•´çš„çº¿æ€§SMOç®—æ³•Parameters: dataMatIn - æ•°æ®çŸ©é˜µ classLabels - æ•°æ®æ ‡ç­¾ C - æ¾å¼›å˜é‡ toler - å®¹é”™ç‡ maxIter - æœ€å¤§è¿­ä»£æ¬¡æ•° kTup - åŒ…å«æ ¸å‡½æ•°ä¿¡æ¯çš„å…ƒç»„ Returns: oS.b - SMOç®—æ³•è®¡ç®—çš„b oS.alphas - SMOç®—æ³•è®¡ç®—çš„alphas\"\"\"def smoP(dataMatIn, classLabels, C, toler, maxIter, kTup = ('lin', 0)): # åˆå§‹åŒ–æ•°æ®ç»“æ„ oS = optStruct(np.mat(dataMatIn), np.mat(classLabels).transpose(), C, toler, kTup) # åˆå§‹åŒ–å½“å‰è¿­ä»£æ¬¡æ•° iter = 0 entrieSet = True alphaPairsChanged = 0 # éå†æ•´ä¸ªæ•°æ®é›†alphaéƒ½æ²¡æœ‰æ›´æ–°æˆ–è€…è¶…è¿‡æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œåˆ™é€€å‡ºå¾ªç¯ while(iter &lt; maxIter) and ((alphaPairsChanged &gt; 0) or (entrieSet)): alphaPairsChanged = 0 # éå†æ•´ä¸ªæ•°æ®é›† if entrieSet: for i in range(oS.m): # ä½¿ç”¨ä¼˜åŒ–çš„SMOç®—æ³• alphaPairsChanged += innerL(i, oS) print(\"å…¨æ ·æœ¬éå†:ç¬¬%dæ¬¡è¿­ä»£ æ ·æœ¬:%d, alphaä¼˜åŒ–æ¬¡æ•°:%d\" % (iter, i, alphaPairsChanged)) iter += 1 # éå†éè¾¹ç•Œå€¼ else: # éå†ä¸åœ¨è¾¹ç•Œ0å’ŒCçš„alpha nonBoundIs = np.nonzero((oS.alphas.A &gt; 0) * (oS.alphas.A &lt; C))[0] for i in nonBoundIs: alphaPairsChanged += innerL(i, oS) print(\"éè¾¹ç•Œéå†:ç¬¬%dæ¬¡è¿­ä»£ æ ·æœ¬:%d, alphaä¼˜åŒ–æ¬¡æ•°:%d\" % (iter, i, alphaPairsChanged)) iter += 1 # éå†ä¸€æ¬¡åæ”¹ä¸ºéè¾¹ç•Œéå† if entrieSet: entrieSet = False # å¦‚æœalphaæ²¡æœ‰æ›´æ–°ï¼Œè®¡ç®—å…¨æ ·æœ¬éå† elif(alphaPairsChanged == 0): entrieSet = True print(\"è¿­ä»£æ¬¡æ•°:%d\" % iter) # è¿”å›SMOç®—æ³•è®¡ç®—çš„bå’Œalphas return oS.b, oS.alphas\"\"\"å‡½æ•°è¯´æ˜ï¼šæµ‹è¯•å‡½æ•°Parameters: k1 - ä½¿ç”¨é«˜æ–¯æ ¸å‡½æ•°çš„æ—¶å€™è¡¨ç¤ºåˆ°è¾¾ç‡ Returns: None\"\"\"def testRbf(k1 = 1.3): # åŠ è½½è®­ç»ƒé›† dataArr, labelArr = loadDataSet('testSetRBF.txt') # æ ¹æ®è®­ç»ƒé›†è®¡ç®—b, alphas b, alphas = smoP(dataArr, labelArr, 200, 0.0001, 100, ('rbf', k1)) datMat = np.mat(dataArr) labelMat = np.mat(labelArr).transpose() # è·å¾—æ”¯æŒå‘é‡ svInd = np.nonzero(alphas.A &gt; 0)[0] sVs = datMat[svInd] labelSV = labelMat[svInd] print(\"æ”¯æŒå‘é‡ä¸ªæ•°:%d\" % np.shape(sVs)[0]) m, n = np.shape(datMat) errorCount = 0 for i in range(m): # è®¡ç®—å„ä¸ªç‚¹çš„æ ¸ kernelEval = kernelTrans(sVs, datMat[i, :], ('rbf', k1)) # æ ¹æ®æ”¯æŒå‘é‡çš„ç‚¹è®¡ç®—è¶…å¹³é¢ï¼Œè¿”å›é¢„æµ‹ç»“æœ predict = kernelEval.T * np.multiply(labelSV, alphas[svInd]) + b # è¿”å›æ•°ç»„ä¸­å„å…ƒç´ çš„æ­£è´Ÿå·ï¼Œç”¨1å’Œ-1è¡¨ç¤ºï¼Œå¹¶ç»Ÿè®¡é”™è¯¯ä¸ªæ•° if np.sign(predict) != np.sign(labelArr[i]): errorCount += 1 # æ‰“å°é”™è¯¯ç‡ print('è®­ç»ƒé›†é”™è¯¯ç‡:%.2f%%' % ((float(errorCount) / m) * 100)) # åŠ è½½æµ‹è¯•é›† dataArr, labelArr = loadDataSet('testSetRBF2.txt') errorCount = 0 datMat = np.mat(dataArr) labelMat = np.mat(labelArr).transpose() m, n = np.shape(datMat) for i in range(m): # è®¡ç®—å„ä¸ªç‚¹çš„æ ¸ kernelEval = kernelTrans(sVs, datMat[i, :], ('rbf', k1)) # æ ¹æ®æ”¯æŒå‘é‡çš„ç‚¹è®¡ç®—è¶…å¹³é¢ï¼Œè¿”å›é¢„æµ‹ç»“æœ predict = kernelEval.T * np.multiply(labelSV, alphas[svInd]) + b # è¿”å›æ•°ç»„ä¸­å„å…ƒç´ çš„æ­£è´Ÿå·ï¼Œç”¨1å’Œ-1è¡¨ç¤ºï¼Œå¹¶ç»Ÿè®¡é”™è¯¯ä¸ªæ•° if np.sign(predict) != np.sign(labelArr[i]): errorCount += 1 # æ‰“å°é”™è¯¯ç‡ print('è®­ç»ƒé›†é”™è¯¯ç‡:%.2f%%' % ((float(errorCount) / m) * 100)) \"\"\"å‡½æ•°è¯´æ˜ï¼šæ•°æ®å¯è§†åŒ–Parameters: dataMat - æ•°æ®çŸ©é˜µ labelMat - æ•°æ®æ ‡ç­¾ Returns: None\"\"\"def showDataSet(dataMat, labelMat): # æ­£æ ·æœ¬ data_plus = [] # è´Ÿæ ·æœ¬ data_minus = [] for i in range(len(dataMat)): if labelMat[i] &gt; 0: data_plus.append(dataMat[i]) else: data_minus.append(dataMat[i]) # è½¬æ¢ä¸ºnumpyçŸ©é˜µ data_plus_np = np.array(data_plus) # è½¬æ¢ä¸ºnumpyçŸ©é˜µ data_minus_np = np.array(data_minus) # æ­£æ ·æœ¬æ•£ç‚¹å›¾ï¼ˆscatterï¼‰ # transposeè½¬ç½® plt.scatter(np.transpose(data_plus_np)[0], np.transpose(data_plus_np)[1]) # è´Ÿæ ·æœ¬æ•£ç‚¹å›¾ï¼ˆscatterï¼‰ plt.scatter(np.transpose(data_minus_np)[0], np.transpose(data_minus_np)[1]) # æ˜¾ç¤º plt.show() if __name__ == '__main__': testRbf()","categories":[{"name":"Machine_Learning","slug":"Machine-Learning","permalink":"https://shyshy903.github.io/categories/Machine-Learning/"}],"tags":[{"name":"ML","slug":"ML","permalink":"https://shyshy903.github.io/tags/ML/"}]},{"title":"ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ã€Šè¥¿ç“œä¹¦ã€‹ç¬”è®°ï¼ˆäº”ï¼‰- æœ´ç´ è´å¶æ–¯","slug":"Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ5-æœ´ç´ è´å¶æ–¯ï¼‰","date":"2019-11-28T07:30:00.000Z","updated":"2020-02-11T08:48:55.558Z","comments":true,"path":"2019/11/28/Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ5-æœ´ç´ è´å¶æ–¯ï¼‰/","link":"","permalink":"https://shyshy903.github.io/2019/11/28/Machine_Learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%885-%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%EF%BC%89/","excerpt":"","text":"è´å¶æ–¯è´å¶æ–¯å®šç†$p(c|x) = \\frac{p(x|c)p(c)}{p(x)}$å…¶ä¸­cä¸ºç±»åˆ«ï¼Œxä¸ºå®ä¾‹å…·æœ‰ç‰¹å¾${x_1,x_2,â€¦x_i}$å¦‚æœ $p(c_1|x) &gt; p(c_2|x)$ï¼Œé‚£ä¹ˆå°±å±äºç±»åˆ«c1,åä¹‹å±äºc2 æœ´ç´ è´å¶æ–¯çš„ä¸€èˆ¬è¿‡ç¨‹ æ”¶é›†æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨RSSæº å‡†å¤‡æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨æ•°å€¼å‹æˆ–è€…å¸ƒå°”å‹ åˆ†ææ•°æ®ï¼Œå¤§é‡ç‰¹å¾æ—¶ï¼Œå¯ä»¥ç»˜åˆ¶ç›´æ–¹å›¾ è®­ç»ƒç®—æ³•ï¼Œè®¡ç®—ä¸åŒçš„ç‹¬ç«‹ç‰¹å¾çš„æ¡ä»¶æ¦‚ç‡ æµ‹è¯•ç®—æ³•ï¼Œè®¡ç®—é”™è¯¯ç‡ ä½¿ç”¨ç®—æ³•ï¼Œå°è£…è´å¶æ–¯åˆ†ç±»å™¨ æ–‡æœ¬åˆ†ç±»å‡†å¤‡æ•°æ®ï¼Œä»æ–‡æœ¬ä¸­æ„å»ºè¯å‘é‡123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172\"\"\"å‡½æ•°è¯´æ˜ï¼šåˆ›å»ºå®éªŒæ ·æœ¬Parameters: None Returns: postingList - å®éªŒæ ·æœ¬åˆ‡åˆ†çš„è¯æ¡ classVec - ç±»åˆ«æ ‡ç­¾å‘é‡\"\"\"def loadDataSet(): # åˆ‡åˆ†çš„è¯æ¡ postingList = [['my', 'dog', 'has', 'flea', 'problems', 'help', 'please'], ['maybe', 'not', 'take', 'him', 'to', 'dog', 'park', 'stupid'], ['my', 'dalmation', 'is', 'so', 'cute', 'I', 'love', 'him'], ['stop', 'posting', 'stupid', 'worthless', 'garbage'], ['mr', 'licks', 'ate', 'my', 'steak', 'how', 'to', 'stop', 'him'], ['quit', 'buying', 'worthless', 'dog', 'food', 'stupid']] # ç±»åˆ«æ ‡ç­¾å‘é‡ï¼Œ1ä»£è¡¨ä¾®è¾±æ€§è¯æ±‡ï¼Œ0ä»£è¡¨ä¸æ˜¯ classVec = [0, 1, 0, 1, 0, 1] # è¿”å›å®éªŒæ ·æœ¬åˆ‡åˆ†çš„è¯æ¡ã€ç±»åˆ«æ ‡ç­¾å‘é‡ return postingList, classVec\"\"\"å‡½æ•°è¯´æ˜ï¼šå°†åˆ‡åˆ†çš„å®éªŒæ ·æœ¬è¯æ¡æ•´ç†æˆä¸é‡å¤çš„è¯æ¡åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯è¯æ±‡è¡¨Parameters: dataSet - æ•´ç†çš„æ ·æœ¬æ•°æ®é›† Returns: vocabSet - è¿”å›ä¸é‡å¤çš„è¯æ¡åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯è¯æ±‡è¡¨\"\"\"def createVocabList(dataSet): # åˆ›å»ºä¸€ä¸ªç©ºçš„ä¸é‡å¤åˆ—è¡¨ # setæ˜¯ä¸€ä¸ªæ— åºä¸”ä¸é‡å¤çš„å…ƒç´ é›†åˆ vocabSet = set([]) for document in dataSet: # å–å¹¶é›† vocabSet = vocabSet | set(document) return list(vocabSet)\"\"\"å‡½æ•°è¯´æ˜ï¼šæ ¹æ®vocabListè¯æ±‡è¡¨ï¼Œå°†inputSetå‘é‡åŒ–ï¼Œå‘é‡çš„æ¯ä¸ªå…ƒç´ ä¸º1æˆ–0Parameters: vocabList - createVocabListè¿”å›çš„åˆ—è¡¨ inputSet - åˆ‡åˆ†çš„è¯æ¡åˆ—è¡¨ Returns: returnVec - æ–‡æ¡£å‘é‡ï¼Œè¯é›†æ¨¡å‹\"\"\"def setOfWords2Vec(vocabList, inputSet): # åˆ›å»ºä¸€ä¸ªå…¶ä¸­æ‰€å«å…ƒç´ éƒ½ä¸º0çš„å‘é‡ returnVec = [0] * len(vocabList) # éå†æ¯ä¸ªè¯æ¡ for word in inputSet: if word in vocabList: # å¦‚æœè¯æ¡å­˜åœ¨äºè¯æ±‡è¡¨ä¸­ï¼Œåˆ™ç½®1 # indexè¿”å›wordå‡ºç°åœ¨vocabListä¸­çš„ç´¢å¼• # è‹¥è¿™é‡Œæ”¹ä¸º+=åˆ™å°±æ˜¯åŸºäºè¯è¢‹çš„æ¨¡å‹ï¼Œé‡åˆ°ä¸€ä¸ªå•è¯ä¼šå¢åŠ å•è¯å‘é‡ä¸­å¾·å¯¹åº”å€¼ returnVec[vocabList.index(word)] = 1 else: print(\"the word: %s is not in my Vocabulary\" % word) # è¿”å›æ–‡æ¡£å‘é‡ return returnVec&gt;&gt; imort bayes&gt;&gt; listOposts, listClasses = bayes.loadDataSet()&gt;&gt; myVocabList = bayes.createVocabList(listOpists)&gt;&gt; bayes.setOfWords2Vec(myVocabList, listOpists)[0,0,1,0.........] è®­ç»ƒç®—æ³•ï¼Œä»è¯å‘é‡è®¡ç®—æ¦‚ç‡$p(c|w) = \\frac{p(w|c)p(c)}{p(w)}$$p(c) = \\frac{ç±»åˆ«cçš„å®ä¾‹æ•°}{æ€»çš„å®ä¾‹æ•°}$$p(w|c) = p(w_0,w_1,w_2,w_3,w_4 |c_i)$$p(w|c) = p(w_0|c_i)p(w_1|c_i)p(w_2|c_i)p(w_3|c_i)â€¦p(w_n|c_i)$ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144è®¡ç®—æ¯ä¸ªç±»åˆ«ä¸­çš„æ–‡æ¡£æ•°ç›®å¯¹æ¯ç¯‡è®­ç»ƒæ–‡æ¡£ å¯¹æ¯ä¸ªç±»è¢« å¦‚æœè¯æ¡å‡ºç°åœ¨æ–‡æ¡£ä¸­ï¼Œå¢åŠ è¯¥è¯æ¡çš„è®¡æ•°å€¼ å¢åŠ æ‰€æœ‰è¯æ¡çš„è®¡æ•°å€¼ å¯¹æ¯ä¸ªç±»åˆ« å¯¹æ¯ä¸ªè¯æ¡ï¼š å°†è¯¥è¯æ¡çš„æ•°ç›®é™¤ä»¥æ€»çš„è¯æ¡æ•°ç›®1å¾—åˆ°æ¡ä»¶æ¦‚ç‡ è¿”å›æ¯ä¸ªç±»åˆ«çš„æ¡ä»¶æ¦‚ç‡\"\"\"å‡½æ•°è¯´æ˜ï¼šæœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨è®­ç»ƒå‡½æ•°Parameters: trainMatrix - è®­ç»ƒæ–‡æ¡£çŸ©é˜µï¼Œå³setOfWords2Vecè¿”å›çš„returnVecæ„æˆçš„çŸ©é˜µ trainCategory - è®­ç»ƒç±»æ ‡ç­¾å‘é‡ï¼Œå³loadDataSetè¿”å›çš„classVec Returns: p0Vect - ä¾®è¾±ç±»çš„æ¡ä»¶æ¦‚ç‡æ•°ç»„ p1Vect - éä¾®è¾±ç±»çš„æ¡ä»¶æ¦‚ç‡æ•°ç»„ pAbusive - æ–‡æ¡£å±äºä¾®è¾±ç±»çš„æ¦‚ç‡\"\"\"def trainNB0(trainMatrix, trainCategory): # è®¡ç®—è®­ç»ƒæ–‡æ¡£æ•°ç›® numTrainDocs = len(trainMatrix) # è®¡ç®—æ¯ç¯‡æ–‡æ¡£çš„è¯æ¡æ•°ç›® numWords = len(trainMatrix[0]) # æ–‡æ¡£å±äºä¾®è¾±ç±»çš„æ¦‚ç‡ pAbusive = sum(trainCategory)/float(numTrainDocs) # åˆ›å»ºnumpy.zerosæ•°ç»„ï¼Œè¯æ¡å‡ºç°æ•°åˆå§‹åŒ–ä¸º0 # p0Num = np.zeros(numWords) # p1Num = np.zeros(numWords) # åˆ›å»ºnumpy.onesæ•°ç»„ï¼Œè¯æ¡å‡ºç°æ•°åˆå§‹åŒ–ä¸º1,æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ p0Num = np.ones(numWords) p1Num = np.ones(numWords) # åˆ†æ¯åˆå§‹åŒ–ä¸º0 # p0Denom = 0.0 # p1Denom = 0.0 # åˆ†æ¯åˆå§‹åŒ–ä¸º2ï¼Œæ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ p0Denom = 2.0 p1Denom = 2.0 for i in range(numTrainDocs): # ç»Ÿè®¡å±äºä¾®è¾±ç±»çš„æ¡ä»¶æ¦‚ç‡æ‰€éœ€çš„æ•°æ®ï¼Œå³P(w0|1),P(w1|1),P(w2|1)... if trainCategory[i] == 1: # ç»Ÿè®¡æ‰€æœ‰ä¾®è¾±ç±»æ–‡æ¡£ä¸­æ¯ä¸ªå•è¯å‡ºç°çš„ä¸ªæ•° p1Num += trainMatrix[i] # ç»Ÿè®¡ä¸€å…±å‡ºç°çš„ä¾®è¾±å•è¯çš„ä¸ªæ•° p1Denom += sum(trainMatrix[i]) # ç»Ÿè®¡å±äºéä¾®è¾±ç±»çš„æ¡ä»¶æ¦‚ç‡æ‰€éœ€çš„æ•°æ®ï¼Œå³P(w0|0),P(w1|0),P(w2|0)... else: # ç»Ÿè®¡æ‰€æœ‰éä¾®è¾±ç±»æ–‡æ¡£ä¸­æ¯ä¸ªå•è¯å‡ºç°çš„ä¸ªæ•° p0Num += trainMatrix[i] # ç»Ÿè®¡ä¸€å…±å‡ºç°çš„éä¾®è¾±å•è¯çš„ä¸ªæ•° p0Denom += sum(trainMatrix[i]) # æ¯ä¸ªä¾®è¾±ç±»å•è¯åˆ†åˆ«å‡ºç°çš„æ¦‚ç‡ # p1Vect = p1Num / p1Denom # å–å¯¹æ•°ï¼Œé˜²æ­¢ä¸‹æº¢å‡º p1Vect = np.log(p1Num / p1Denom) # æ¯ä¸ªéä¾®è¾±ç±»å•è¯åˆ†åˆ«å‡ºç°çš„æ¦‚ç‡ # p0Vect = p0Num / p0Denom # å–å¯¹æ•°ï¼Œé˜²æ­¢ä¸‹æº¢å‡º p0Vect = np.log(p0Num / p0Denom) # è¿”å›å±äºä¾®è¾±ç±»çš„æ¡ä»¶æ¦‚ç‡æ•°ç»„ã€å±äºéä¾®è¾±ç±»çš„æ¡ä»¶æ¦‚ç‡æ•°ç»„ã€æ–‡æ¡£å±äºä¾®è¾±ç±»çš„æ¦‚ç‡ return p0Vect, p1Vect, pAbusive``` ### æµ‹è¯•ç®—æ³•ï¼Œæ”¹è¿›ä¸ºäº†é¿å…$p(w|c) = p(w_0|c_i)p(w_1|c_i)p(w_2|c_i)p(w_3|c_i)...p(w_n|c_i)$ä¸­å‡ºç°æŸä¸€é¡¹ä¸º0çš„æƒ…å†µï¼Œè¿™é‡Œé‡‡ç”¨å¯¹æ•°çŸ«æ­£ï¼š$ln(a*b) = lna + lnb$```python\"\"\"å‡½æ•°è¯´æ˜ï¼šæœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨åˆ†ç±»å‡½æ•°Parameters: vec2Classify - å¾…åˆ†ç±»çš„è¯æ¡æ•°ç»„ p0Vec - ä¾®è¾±ç±»çš„æ¡ä»¶æ¦‚ç‡æ•°ç»„ p1Vec - éä¾®è¾±ç±»çš„æ¡ä»¶æ¦‚ç‡æ•°ç»„ pClass1 - æ–‡æ¡£å±äºä¾®è¾±ç±»çš„æ¦‚ç‡ Returns: 0 - å±äºéä¾®è¾±ç±» 1 - å±äºä¾®è¾±ç±»Modify: 2018-07-21\"\"\"def classifyNB(vec2Classify, p0Vec, p1Vec, pClass1): # å¯¹åº”å…ƒç´ ç›¸ä¹˜ # p1 = reduce(lambda x,y:x*y, vec2Classify * p1Vec) * pClass1 # p0 = reduce(lambda x,y:x*y, vec2Classify * p0Vec) * (1.0 - pClass1) # å¯¹åº”å…ƒç´ ç›¸ä¹˜ï¼ŒlogA*B = logA + logBæ‰€ä»¥è¿™é‡Œæ˜¯ç´¯åŠ  p1 = sum(vec2Classify * p1Vec) + np.log(pClass1) p0 = sum(vec2Classify * p0Vec) + np.log(1.0 - pClass1) # print('p0:', p0) # print('p1:', p1) if p1 &gt; p0: return 1 else: return 0\"\"\"å‡½æ•°è¯´æ˜ï¼šæµ‹è¯•æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨Parameters: None Returns: NoneModify: 2018-07-21\"\"\"def testingNB(): # åˆ›å»ºå®éªŒæ ·æœ¬ listOPosts, listclasses = loadDataSet() # åˆ›å»ºè¯æ±‡è¡¨,å°†è¾“å…¥æ–‡æœ¬ä¸­çš„ä¸é‡å¤çš„å•è¯è¿›è¡Œæå–ç»„æˆå•è¯å‘é‡ myVocabList = createVocabList(listOPosts) trainMat = [] for postinDoc in listOPosts: # å°†å®éªŒæ ·æœ¬å‘é‡åŒ–è‹¥postinDocä¸­çš„å•è¯åœ¨myVocabListå‡ºç°åˆ™å°†returnVecè¯¥ä½ç½®çš„ç´¢å¼•ç½®1 # å°†6ç»„æ•°æ®listå­˜å‚¨åœ¨trainMatä¸­ trainMat.append(setOfWords2Vec(myVocabList, postinDoc)) # è®­ç»ƒæœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ p0V, p1V, pAb = trainNB0(np.array(trainMat), np.array(listclasses)) # æµ‹è¯•æ ·æœ¬1 testEntry = ['love', 'my', 'dalmation'] # æµ‹è¯•æ ·æœ¬å‘é‡åŒ–è¿”å›è¿™ä¸‰ä¸ªå•è¯å‡ºç°ä½ç½®çš„ç´¢å¼• thisDoc = np.array(setOfWords2Vec(myVocabList, testEntry)) if classifyNB(thisDoc, p0V, p1V, pAb): # æ‰§è¡Œåˆ†ç±»å¹¶æ‰“å°ç»“æœ print(testEntry, 'å±äºä¾®è¾±ç±»') else: # æ‰§è¡Œåˆ†ç±»å¹¶æ‰“å°ç»“æœ print(testEntry, 'å±äºéä¾®è¾±ç±»') # æµ‹è¯•æ ·æœ¬2 testEntry = ['stupid', 'garbage'] # å°†å®éªŒæ ·æœ¬å‘é‡åŒ– thisDoc = np.array(setOfWords2Vec(myVocabList, testEntry)) if classifyNB(thisDoc, p0V, p1V, pAb): # æ‰§è¡Œåˆ†ç±»å¹¶æ‰“å°ç»“æœ print(testEntry, 'å±äºä¾®è¾±ç±»') else: # æ‰§è¡Œåˆ†ç±»å¹¶æ‰“å°ç»“æœ print(testEntry, 'å±äºéä¾®è¾±ç±»')","categories":[{"name":"Machine_Learning","slug":"Machine-Learning","permalink":"https://shyshy903.github.io/categories/Machine-Learning/"}],"tags":[{"name":"ML","slug":"ML","permalink":"https://shyshy903.github.io/tags/ML/"}]},{"title":"ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ã€Šè¥¿ç“œä¹¦ã€‹ç¬”è®°ï¼ˆå…­ï¼‰- logistå›å½’","slug":"Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ6- Logisticå›å½’ï¼‰","date":"2019-11-28T07:30:00.000Z","updated":"2020-02-11T08:48:55.568Z","comments":true,"path":"2019/11/28/Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ6- Logisticå›å½’ï¼‰/","link":"","permalink":"https://shyshy903.github.io/2019/11/28/Machine_Learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%886-%20Logistic%E5%9B%9E%E5%BD%92%EF%BC%89/","excerpt":"","text":"logistå›å½’æœ€ä½³å›å½’ç³»æ•°ä¸Sigmodå‡½æ•°$\\sigma = 1/(1 + e^{-z})$$z = w_0x_0+ w_1x_1+ w_2x_2+ â€¦.w_nx_n$$z = w^TX$ æ¢¯åº¦ä¸Šå‡æ³•$w = w + Î±* grad f(w)$ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778\"\"\"å‡½æ•°è¯´æ˜ï¼šæ¢¯åº¦ä¸Šå‡ç®—æ³•æµ‹è¯•å‡½æ•° æ±‚å‡½æ•°f(x) = -x^2+4xçš„æå¤§å€¼Parameters: NoneReturns: None\"\"\"def Gradient_Ascent_test(): # f(x)çš„å¯¼æ•° def f_prime(x_old): return -2 * x_old + 4 # åˆå§‹å€¼ï¼Œç»™ä¸€ä¸ªå°äºx_newçš„å€¼ x_old = -1 # æ¢¯åº¦ä¸Šå‡ç®—æ³•åˆå§‹å€¼ï¼Œå³ä»(0, 0)å¼€å§‹ x_new = 0 # æ­¥é•¿ï¼Œä¹Ÿå°±æ˜¯å­¦ä¹ é€Ÿç‡ï¼Œæ§åˆ¶æ›´æ–°çš„å¹…åº¦ alpha = 0.01 # ç²¾åº¦ï¼Œä¹Ÿå°±æ˜¯æ›´æ–°é˜ˆå€¼ presision = 0.00000001 while abs(x_new - x_old) &gt; presision: x_old = x_new # åˆ©ç”¨ä¸Šé¢çš„å…¬å¼ x_new = x_old + alpha * f_prime(x_old) # æ‰“å°æœ€ç»ˆæ±‚è§£çš„æå€¼è¿‘ä¼¼å€¼ print(x_new)\"\"\"å‡½æ•°è¯´æ˜ï¼šsigmoidå‡½æ•°Parameters: inX - æ•°æ® Returns: sigmoidå‡½æ•°\"\"\"def sigmoid(inX): return 1.0 / (1 + np.exp(-inX))\"\"\"å‡½æ•°è¯´æ˜ï¼šæ¢¯åº¦ä¸Šå‡æ³•Parameters: dataMath - æ•°æ®é›† classLabels - æ•°æ®æ ‡ç­¾ Returns: weights.getA() - æ±‚å¾—çš„æƒé‡æ•°ç»„ï¼ˆæœ€ä¼˜å‚æ•°ï¼‰ weights_array - æ¯æ¬¡æ›´æ–°çš„å›å½’ç³»æ•°\"\"\"def gradAscent(dataMath, classLabels): # è½¬æ¢æˆnumpyçš„mat(çŸ©é˜µ) dataMatrix = np.mat(dataMath) # è½¬æ¢æˆnumpyçš„mat(çŸ©é˜µ)å¹¶è¿›è¡Œè½¬ç½® labelMat = np.mat(classLabels).transpose() # è¿”å›dataMatrixçš„å¤§å°ï¼Œmä¸ºè¡Œæ•°ï¼Œnä¸ºåˆ—æ•° m, n = np.shape(dataMatrix) # ç§»åŠ¨æ­¥é•¿ï¼Œä¹Ÿå°±æ˜¯å­¦ä¹ æ•ˆç‡ï¼Œæ§åˆ¶æ›´æ–°çš„å¹…åº¦ alpha = 0.01 # æœ€å¤§è¿­ä»£æ¬¡æ•° maxCycles = 500 weights = np.ones((n, 1)) weights_array = np.array([]) for k in range(maxCycles): # æ¢¯åº¦ä¸Šå‡çŸ¢é‡åŒ–å…¬å¼ h = sigmoid(dataMatrix * weights) error = labelMat - h weights = weights + alpha * dataMatrix.transpose() * error # numpy.append(arr, values, axis=None):å°±æ˜¯arrå’Œvaluesä¼šé‡æ–°ç»„åˆæˆä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œåšä¸ºè¿”å›å€¼ã€‚ # å½“axisæ— å®šä¹‰æ—¶ï¼Œæ˜¯æ¨ªå‘åŠ æˆï¼Œè¿”å›æ€»æ˜¯ä¸ºä¸€ç»´æ•°ç»„ weights_array = np.append(weights_array, weights) weights_array = weights_array.reshape(maxCycles, n) # å°†çŸ©é˜µè½¬æ¢ä¸ºæ•°ç»„ï¼Œè¿”å›æƒé‡æ•°ç»„ # mat.getA()å°†è‡ªèº«çŸ©é˜µå˜é‡è½¬åŒ–ä¸ºndarrayç±»å‹å˜é‡ return weights.getA(), weights_array ç»˜åˆ¶å†³ç­–è¾¹ç•Œ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455\"\"\"å‡½æ•°è¯´æ˜ï¼šç»˜åˆ¶æ•°æ®é›†Parameters: weights - æƒé‡å‚æ•°æ•°ç»„ Returns: None\"\"\"def plotBestFit(weights): # åŠ è½½æ•°æ®é›† dataMat, labelMat = loadDataSet() # è½¬æ¢æˆnumpyçš„arrayæ•°ç»„ dataArr = np.array(dataMat) # æ•°æ®ä¸ªæ•° # ä¾‹å¦‚å»ºç«‹ä¸€ä¸ª4*2çš„çŸ©é˜µcï¼Œc.shape[1]ä¸ºç¬¬ä¸€ç»´çš„é•¿åº¦2ï¼Œ c.shape[0]ä¸ºç¬¬äºŒç»´çš„é•¿åº¦4 n = np.shape(dataMat)[0] # æ­£æ ·æœ¬ xcord1 = [] ycord1 = [] # è´Ÿæ ·æœ¬ xcord2 = [] ycord2 = [] # æ ¹æ®æ•°æ®é›†æ ‡ç­¾è¿›è¡Œåˆ†ç±» for i in range(n): if int(labelMat[i]) == 1: # 1ä¸ºæ­£æ ·æœ¬ xcord1.append(dataArr[i, 1]) ycord1.append(dataArr[i, 2]) else: # 0ä¸ºè´Ÿæ ·æœ¬ xcord2.append(dataArr[i, 1]) ycord2.append(dataArr[i, 2]) # æ–°å»ºå›¾æ¡† fig = plt.figure() # æ·»åŠ subplot ax = fig.add_subplot(111) # ç»˜åˆ¶æ­£æ ·æœ¬ ax.scatter(xcord1, ycord1, s=20, c='red', marker='s', alpha=.5) # ç»˜åˆ¶è´Ÿæ ·æœ¬ ax.scatter(xcord2, ycord2, s=20, c='green', alpha=.5) # xè½´åæ ‡ x = np.arange(-3.0, 3.0, 0.1) # w0*x0 + w1*x1 * w2*x2 = 0 # x0 = 1, x1 = x, x2 = y y = (-weights[0] - weights[1] * x) / weights[2] ax.plot(x, y) # ç»˜åˆ¶title plt.title('BestFit') # ç»˜åˆ¶label plt.xlabel('x1') plt.ylabel('y2') # æ˜¾ç¤º plt.show() éšæœºæ¢¯åº¦ä¸Šå‡æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113\"\"\"å‡½æ•°è¯´æ˜ï¼šæ”¹è¿›çš„éšæœºæ¢¯åº¦ä¸Šå‡æ³•Parameters: dataMatrix - æ•°æ®æ•°ç»„ classLabels - æ•°æ®æ ‡ç­¾ numIter - è¿­ä»£æ¬¡æ•° Returns: weights - æ±‚å¾—çš„å›å½’ç³»æ•°æ•°ç»„ï¼ˆæœ€ä¼˜å‚æ•°ï¼‰ weights_array - æ¯æ¬¡æ›´æ–°çš„å›å½’ç³»æ•°\"\"\"def stocGradAscent1(dataMatrix, classLabels, numIter=150): # è¿”å›dataMatrixçš„å¤§å°ï¼Œmä¸ºè¡Œæ•°ï¼Œnä¸ºåˆ—æ•° m, n = np.shape(dataMatrix) # å‚æ•°åˆå§‹åŒ– weights = np.ones(n) weights_array = np.array([]) for j in range(numIter): dataIndex = list(range(m)) for i in range(m): # æ¯æ¬¡éƒ½é™ä½alphaçš„å¤§å° alpha = 4/(1.0+j+i)+0.01 # éšæœºé€‰æ‹©æ ·æœ¬ randIndex = int(random.uniform(0, len(dataIndex))) # éšæœºé€‰æ‹©ä¸€ä¸ªæ ·æœ¬è®¡ç®—h h = sigmoid(sum(dataMatrix[randIndex] * weights)) # è®¡ç®—è¯¯å·® error = classLabels[randIndex] - h # æ›´æ–°å›å½’ç³»æ•° weights = weights + alpha * error * dataMatrix[randIndex] # æ·»åŠ è¿”å›ç³»æ•°åˆ°æ•°ç»„ä¸­å½“axisä¸º0æ—¶ï¼Œæ•°ç»„æ˜¯åŠ åœ¨ä¸‹é¢ï¼ˆåˆ—æ•°è¦ç›¸åŒï¼‰ weights_array = np.append(weights_array, weights, axis=0) # åˆ é™¤å·²ä½¿ç”¨çš„æ ·æœ¬ del(dataIndex[randIndex]) # æ”¹å˜ç»´åº¦ weights_array = weights_array.reshape(numIter*m, n) # è¿”å› return weights, weights_array\"\"\"å‡½æ•°è¯´æ˜ï¼šç»˜åˆ¶å›å½’ç³»æ•°ä¸è¿­ä»£æ¬¡æ•°çš„å…³ç³»Parameters: weights_array1 - å›å½’ç³»æ•°æ•°ç»„1 weights_array2 - å›å½’ç³»æ•°æ•°ç»„2 Returns: None\"\"\"def plotWeights(weights_array1, weights_array2): # è®¾ç½®æ±‰å­—æ ¼å¼ä¸º14å·ç®€ä½“å­— font = FontProperties(fname=r\"C:\\Windows\\Fonts\\simsun.ttc\", size=14) # å°†figç”»å¸ƒåˆ†éš”æˆ1è¡Œ1åˆ—ï¼Œä¸å…±äº«xè½´å’Œyè½´ï¼Œfigç”»å¸ƒçš„å¤§å°ä¸ºï¼ˆ20, 10ï¼‰ # å½“nrows=3ï¼Œncols=2æ—¶ï¼Œä»£è¡¨figç”»å¸ƒè¢«åˆ†ä¸º6ä¸ªåŒºåŸŸï¼Œaxs[0][0]ä»£è¡¨ç¬¬ä¸€è¡Œç¬¬ä¸€ä¸ªåŒºåŸŸ fig, axs = plt.subplots(nrows=3, ncols=2, sharex=False, sharey=False, figsize=(20, 10)) # x1åæ ‡è½´çš„èŒƒå›´ x1 = np.arange(0, len(weights_array1), 1) # ç»˜åˆ¶w0ä¸è¿­ä»£æ¬¡æ•°çš„å…³ç³» axs[0][0].plot(x1, weights_array1[:, 0]) axs0_title_text = axs[0][0].set_title(u'æ”¹è¿›çš„æ¢¯åº¦ä¸Šå‡ç®—æ³•ï¼Œå›å½’ç³»æ•°ä¸è¿­ä»£æ¬¡æ•°å…³ç³»', FontProperties=font) axs0_ylabel_text = axs[0][0].set_ylabel(u'w0', FontProperties=font) plt.setp(axs0_title_text, size=20, weight='bold', color='black') plt.setp(axs0_ylabel_text, size=20, weight='bold', color='black') # ç»˜åˆ¶w1ä¸è¿­ä»£æ¬¡æ•°çš„å…³ç³» axs[1][0].plot(x1, weights_array1[:, 1]) axs1_ylabel_text = axs[1][0].set_ylabel(u'w1', FontProperties=font) plt.setp(axs1_ylabel_text, size=20, weight='bold', color='black') # ç»˜åˆ¶w2ä¸è¿­ä»£æ¬¡æ•°çš„å…³ç³» axs[2][0].plot(x1, weights_array1[:, 2]) axs2_title_text = axs[2][0].set_title(u'è¿­ä»£æ¬¡æ•°', FontProperties=font) axs2_ylabel_text = axs[2][0].set_ylabel(u'w2', FontProperties=font) plt.setp(axs2_title_text, size=20, weight='bold', color='black') plt.setp(axs2_ylabel_text, size=20, weight='bold', color='black') # x2åæ ‡è½´çš„èŒƒå›´ x2 = np.arange(0, len(weights_array2), 1) # ç»˜åˆ¶w0ä¸è¿­ä»£æ¬¡æ•°çš„å…³ç³» axs[0][1].plot(x2, weights_array2[:, 0]) axs0_title_text = axs[0][1].set_title(u'æ¢¯åº¦ä¸Šå‡ç®—æ³•ï¼Œå›å½’ç³»æ•°ä¸è¿­ä»£æ¬¡æ•°å…³ç³»', FontProperties=font) axs0_ylabel_text = axs[0][1].set_ylabel(u'w0', FontProperties=font) plt.setp(axs0_title_text, size=20, weight='bold', color='black') plt.setp(axs0_ylabel_text, size=20, weight='bold', color='black') # ç»˜åˆ¶w1ä¸è¿­ä»£æ¬¡æ•°çš„å…³ç³» axs[1][1].plot(x2, weights_array2[:, 1]) axs1_ylabel_text = axs[1][1].set_ylabel(u'w1', FontProperties=font) plt.setp(axs1_ylabel_text, size=20, weight='bold', color='black') # ç»˜åˆ¶w2ä¸è¿­ä»£æ¬¡æ•°çš„å…³ç³» axs[2][1].plot(x2, weights_array2[:, 2]) axs2_title_text = axs[2][1].set_title(u'è¿­ä»£æ¬¡æ•°', FontProperties=font) axs2_ylabel_text = axs[2][1].set_ylabel(u'w2', FontProperties=font) plt.setp(axs2_title_text, size=20, weight='bold', color='black') plt.setp(axs2_ylabel_text, size=20, weight='bold', color='black') plt.show() if __name__ == '__main__': # æµ‹è¯•ç®€å•æ¢¯åº¦ä¸Šå‡æ³• # Gradient_Ascent_test() # åŠ è½½æ•°æ®é›† dataMat, labelMat = loadDataSet() # è®­ç»ƒæƒé‡ weights2, weights_array2 = gradAscent(dataMat, labelMat) # æ–°æ–¹æ³•è®­ç»ƒæƒé‡ weights1, weights_array1 = stocGradAscent1(np.array(dataMat), labelMat) # ç»˜åˆ¶æ•°æ®é›†ä¸­çš„yå’Œxçš„æ•£ç‚¹å›¾ # plotBestFit(weights) # print(gradAscent(dataMat, labelMat)) plotWeights(weights_array1, weights_array2) æ¢¯åº¦ä¸‹é™æ³•$w = w - Î±*gradf(w)$","categories":[{"name":"Machine_Learning","slug":"Machine-Learning","permalink":"https://shyshy903.github.io/categories/Machine-Learning/"}],"tags":[{"name":"ML","slug":"ML","permalink":"https://shyshy903.github.io/tags/ML/"}]},{"title":"ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ã€Šè¥¿ç“œä¹¦ã€‹ç¬”è®°ï¼ˆå››ï¼‰- å†³ç­–æ ‘","slug":"Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ4-DecisionTree)","date":"2019-11-27T07:30:00.000Z","updated":"2020-02-11T08:48:55.554Z","comments":true,"path":"2019/11/27/Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ4-DecisionTree)/","link":"","permalink":"https://shyshy903.github.io/2019/11/27/Machine_Learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%884-DecisionTree)/","excerpt":"","text":"å†³ç­–æ ‘å†³ç­–æ ‘æœ¬è´¨ä¸Šæ˜¯ä¸€ç§æµç¨‹å›¾ï¼Œé•¿æ–¹å½¢ä»£è¡¨åˆ¤æ–­æ¨¡å—ï¼Œæ¤­åœ†ä»£è¡¨ç»ˆæ­¢æ¨¡å—ï¼Œå·¦å³ç®­å¤´æŒ‡å¼•èŠ‚ç‚¹çš„ä¸Šä¸‹åˆ†æ”¯å†³ç­–æ ‘ç›¸æ¯”è¾ƒäºKNNï¼Œå…¶é‡è¦çš„åŸå› å°±æ˜¯å…¶æ•°æ®å½¢å¼éå¸¸å®¹æ˜“ç†è§£ï¼Œè€ŒKNNçš„æ•°æ®å½¢å¼æ‰€åŒ…å«çš„å†…åœ¨å«ä¹‰å´ä¸æ˜¯å¾ˆå®¹æ˜“ç†è§£ ä¼˜ç‚¹è®¡ç®—å¤æ‚åº¦ä¸é«˜ï¼Œå¯ä»¥å¤„ç†ä¸ç›¸å…³ç‰¹å¾æ•°æ®ï¼Œå¯¹ä¸­é—´æ•°æ®çš„ç¼ºçœå€¼ä¸æ•æ„Ÿç¼ºç‚¹ä¼šäº§ç”Ÿè¿‡åº¦åŒ¹é…é—®é¢˜ ä¿¡æ¯è®ºåˆ’åˆ†æ•°æ®é›†12345678910\"\"\"åˆ’åˆ†æ•°æ®é›†çš„ä¼ªä»£ç \"\"\"æ£€æµ‹æ•°æ®é›†æ˜¯å¦å±äºåŒä¸€ç±»ï¼š if so return ç±»æ ‡ç­¾ else: å¯»æ‰¾åˆ’åˆ†æ•°æ®é›†çš„æœ€å¥½ç‰¹å¾ åˆ’åˆ†æ•°æ®é›† åˆ›å»ºåˆ†æ”¯èŠ‚ç‚¹ for æ¯ä¸ªåˆ’åˆ†çš„å­ç±» è°ƒç”¨å‡½æ•°createBranchå¹¶å¢åŠ è¿”å›èŠ‚ç‚¹åˆ°ç»“æœä¸Š return åˆ†æ”¯èŠ‚ç‚¹ å†³ç­–æ ‘çš„æµç¨‹ æ”¶é›†æ•°æ®ï¼šå¯ä»¥ä½¿ç”¨ä»»ä½•æ–¹æ³• å‡†å¤‡æ•°æ®ï¼šæ ‘æ„é€ ç®—æ³•é€‚ç”¨äºæ ‡ç§°å‹æ•°æ®ï¼Œå¦‚æœæ•°æ®æ˜¯æ•°å€¼å‹æ•°æ®ï¼Œéœ€è¦å…ˆæŠŠæ•°æ®è¿›è¡Œç¦»æ•£åŒ– åˆ†ææ•°æ®ï¼šæ„é€ æ ‘å®Œæˆï¼Œè¿›è¡Œæ£€æŸ¥ è®­ç»ƒç®—æ³•ï¼šæ„é€ æ ‘çš„æ•°æ®ç»“æ„ æµ‹è¯•ç®—æ³•ï¼šä½¿ç”¨ç»éªŒæ ‘è®¡ç®—é”™è¯¯ç‡ ä½¿ç”¨ç®—æ³• ä¿¡æ¯å¢ç›Šä¸ä¿¡æ¯ç†µåˆ’åˆ†æ•°æ®é›†çš„æœ€å¤§åŸåˆ™æ˜¯ï¼Œå°†æ— åºçš„æ•°æ®å˜å¾—æ›´åŠ æœ‰åºä¿¡æ¯å¢ç›Šï¼šåˆ’åˆ†æ•°æ®é›†å‰åä¿¡æ¯å‘ç”Ÿçš„å˜åŒ–ç§°ä¸ºä¿¡æ¯å¢ç›Šè®¡ç®—æ¯ä¸ªç‰¹å¾åˆ’åˆ†æ•°æ®é›†è·å¾—çš„ä¿¡æ¯å¢ç›Šï¼Œè·å¾—ä¿¡æ¯å¢ç›Šæœ€é«˜çš„ç‰¹å¾å°±æ˜¯æœ€å¥½çš„é€‰æ‹©å¦‚ä½•è®¡ç®—ä¿¡æ¯å¢ç›Šï¼Ÿé›†åˆä¿¡æ¯çš„åº¦é‡æ–¹å¼ç§°ä¸ºé¦™å†œç†µç†µå®šä¹‰ä¸ºä¿¡æ¯çš„æœŸæœ›å€¼ï¼šç¬¦å·$x_i$çš„ä¿¡æ¯å®šä¹‰ä¸º$l(x_i) = -log_2p(x_i)$ï¼Œp(x_i)æ˜¯é€‰æ‹©è¯¥åˆ†ç±»çš„æ¦‚ç‡åˆ™ä¿¡æ¯ç†µä¸ºï¼š$H = -\\sum\\nolimits_{i=1}^{n}p(x_i)log_2p(x_i)$,å…¶ä¸­næ˜¯åˆ†ç±»çš„æ•°ç›® è®¡ç®—ä¿¡æ¯ç†µçš„æºä»£ç 123456789101112131415161718192021222324252627282930313233343536373839\"\"\"ç”¨äºè®¡ç®—ç»™å®šçš„ä¿¡æ¯ç†µ\"\"\"\"\"\"å‡½æ•°è¯´æ˜ï¼šè®¡ç®—ç»™å®šæ•°æ®é›†çš„ç»éªŒç†µï¼ˆé¦™å†œç†µï¼‰ H = -SUMï¼ˆkp*Log2ï¼ˆkpï¼‰ï¼‰Parameters: dataSet - æ•°æ®é›† Returns: shannonEnt - ç»éªŒç†µï¼ˆé¦™å†œç†µï¼‰\"\"\"def calcShannonEnt(dataSet): # è¿”å›æ•°æ®é›†çš„è¡Œæ•° numEntires = len(dataSet) # ä¿å­˜æ¯ä¸ªæ ‡ç­¾ï¼ˆLabelï¼‰å‡ºç°æ¬¡æ•°çš„â€œå­—å…¸â€ labelCounts = &#123;&#125; # å¯¹æ¯ç»„ç‰¹å¾å‘é‡è¿›è¡Œç»Ÿè®¡ for featVec in dataSet: # æŒ‰è¡Œè¿›è¡Œéå† # æå–æ ‡ç­¾ï¼ˆLabelï¼‰ä¿¡æ¯ currentLabel = featVec[-1] # å–æ¯ä¸€è¡Œæœ€åä¸€åˆ—ç‰¹å¾å€¼ # å¦‚æœæ ‡ç­¾ï¼ˆLabelï¼‰æ²¡æœ‰æ”¾å…¥ç»Ÿè®¡æ¬¡æ•°çš„å­—å…¸ï¼Œæ·»åŠ è¿›å» if currentLabel not in labelCounts.keys(): # åˆ›å»ºä¸€ä¸ªæ–°çš„é”®å€¼å¯¹ï¼Œé”®ä¸ºcurrentLabelå€¼ä¸º0 labelCounts[currentLabel] = 0 # Labelè®¡æ•° labelCounts[currentLabel] += 1 # ç»éªŒç†µï¼ˆé¦™å†œç†µï¼‰ shannonEnt = 0.0 # è®¡ç®—é¦™å†œç†µ for key in labelCounts: # é€‰æ‹©è¯¥æ ‡ç­¾ï¼ˆLabelï¼‰çš„æ¦‚ç‡ prob = float(labelCounts[key]) / numEntires # åˆ©ç”¨å…¬å¼è®¡ç®— shannonEnt -= prob*log(prob, 2) # è¿”å›ç»éªŒç†µï¼ˆé¦™å†œç†µï¼‰ return shannonEnt åˆ›å»ºæ•°æ®é›† 12345678def createDataSet()ï¼š dataSet = [[1, ,1 , 'yes'],[1, 1, 'yes'],[1, 0, 'no'],[0, 1, 'no'],[0, 1, 'no']] labels = ['no surfacing', 'flippers'] return dataSet, labels&gt;&gt; reload(trees.py)&gt;&gt; myDat, labels = trees.createDataSet()&gt;&gt; trees.calcShannonEnt(mydata) åˆ’åˆ†æ•°æ®é›†çš„ç®—æ³•ä¸ä»£ç ä¸€èˆ¬å¯ç”¨äºŒåˆ†æ³•åˆ’åˆ†æ•°æ®é›†ï¼Œè¿™é‡Œé‡‡ç”¨ID3ç®—æ³•è¿›è¡Œåˆ’åˆ†æ•°æ®é›†é¦™å†œç†µå¯ç”¨æ¥åº¦é‡æ•°æ®é›†çš„æ— åºåº¦ï¼Œæ•°æ®æ— åºåº¦è¶Šå¤§ï¼Œé¦™å†œç†µå€¼è¶Šå¤§ã€‚åˆ†ç±»ç®—æ³•é™¤äº†éœ€è¦æµ‹é‡ä¿¡æ¯ç†µè¿˜éœ€è¦ä¸€ä¸ªåº¦é‡æ•°æ®åˆ’åˆ†å‡†ç¡®åº¦çš„ç†µå€¼ï¼Œè¿™å°±åƒåœ¨äºŒç»´åæ ‡ä¸­ç”»ç›´çº¿è¿›è¡Œåˆ’åˆ†å¹³é¢åæ ‡ç³»ã€ æŒ‰ç…§ç»™å®šç‰¹å¾åˆ’åˆ†æ•°æ®é›†1234567891011121314151617181920212223\"\"\"å‡½æ•°ï¼šæŒ‰ç…§ç»™å®šçš„ç‰¹å¾åˆ’åˆ†æ•°æ®é›†è¾“å…¥ï¼š dataSet,æ•°æ®é›† axis, åˆ’åˆ†æ•°æ®é›†çš„ç‰¹å¾ value, éœ€è¦è¿”å›çš„ç‰¹å¾å€¼Return: retDataSet,åˆ’åˆ†çš„æ•°æ®é›†\"\"\"def splitDataSet(dataSet, axis, value): retDataSet = [] for featVec in dataSet: # æŒ‰è¡Œéå†æ•°æ®é›† if featVec[axis] == value: # å»æ‰ç‰¹å¾ä¸ºaxisçš„æ•°æ®é›† reducedFeatVec = featVec[:axis] reducedFeatVec.extend(featVec[axis+1:]) # æ‰©å±•åˆ—è¡¨å…ƒç´  retDataSet.append(reducedFeatVec) # æ·»åŠ åµŒå¥—åˆ—è¡¨ return retDataSet&gt;&gt; import DecisionTree as DT&gt;&gt; mydat, labels = DT.createDataSet()&gt;&gt; DT.splitDataSet(mydat, 0, 0)&gt;&gt; DT.splitDataSet(mydat, 0, 1) é€‰æ‹©æœ€å¥½çš„æ•°æ®é›†åˆ’åˆ†æ–¹å¼1234567891011121314151617181920212223242526272829\"\"\"å‡½æ•°ï¼šé€‰æ‹©æœ€å¥½çš„æ•°æ®é›†åˆ’åˆ†æ–¹å¼Para: dataSet:æ•°æ®é›†return: bestFeature:æœ€å¥½çš„ç‰¹å¾çš„ç´¢å¼•å€¼\"\"\"def chooseBestFeatureToSplit(dataSet): numFeatures = len(dataSet[0]) - 1 # ç‰¹å¾çš„ä¸ªæ•°-1 baseEntropy = calcShannonEnt(dataSet) # è®¡ç®—æ•°æ®é›†çš„é¦™å†œç†µ bestInfoGain = 0.0 ; bestFeature = -1 # æœ€å¤§ä¿¡æ¯å¢ç›Šå’Œæœ€ä¼˜åˆ’åˆ†ç‰¹å¾çš„ç´¢å¼•å€¼ for i in range(numFeatures): # éå†ç‰¹å¾ featList = [example[i] for example in dataSet] # åˆ—è¡¨ç”Ÿæˆå¼ç”Ÿæˆç‰¹å¾æ‰€æœ‰çš„å–å€¼ uniqueVals = set(featList) # åˆ å»é‡å¤å€¼ newEntropy = 0.0 # é¦™å†œç†µ for values in uniqueVals: # éå†ç‰¹å¾å€¼ subDataSet = splitDataSet(dataset, i , value) # åˆ’åˆ†æ•°æ®é›† prob = len(subDataSet) / float(len(dataSet)) # è®¡ç®—æ¦‚ç‡ newEntropy += prob * calcShannonEnt(subDataSet) # è®¡ç®—ç»éªŒæ¡ä»¶ç†µ infoGain = baseEntropy - newEntropy # ä¿¡æ¯å¢ç›Šå€¼ print(\"ç¬¬%dä¸ªç‰¹å¾çš„å¢ç›Šä¸º%.3f\" % (i, infoGain)) # æ‰“å°æ¯ä¸ªç‰¹å¾çš„ä¿¡æ¯å¢ç›Šï¼Œå–æ­£ if(infoGain &gt; baseEntropy): # æ‰¾åˆ°å¯¹åº”æœ€å¤§ä¿¡æ¯å¢ç›Šçš„ç‰¹å¾ baseInfoGain = infoGain bestFeature = i return bestFeature&gt;&gt; DecisionTree.chooseBestFeaturToSplit(mydat) é€’å½’æ„å»ºå†³ç­–æ ‘ å½“ç‰¹å¾å€¼å¤šä¸ä¸¤ä¸ªçš„æ—¶å€™ï¼Œå°±å¯èƒ½å­˜åœ¨å¤§äºä¸¤ä¸ªåˆ†æ”¯çš„æ•°æ®é›†åˆ’åˆ†ï¼Œè¿™æ—¶æˆ‘ä»¬å°±é€šè¿‡é€’å½’è°ƒç”¨æ¥å®ç°å®ƒï¼é€’å½’ç»“æŸçš„æ¡ä»¶ç¨‹åºéå†å®Œæ‰€æœ‰åˆ’åˆ†æ•°æ®çš„å±æ€§ï¼Œæˆ–è€…æ¯ä¸ªåˆ†æ”¯ä¸‹çš„æ‰€æœ‰å®ä¾‹éƒ½å…·æœ‰ç›¸åŒçš„åˆ†ç±»ã€‚å¦‚æœæ‰€æœ‰å®ä¾‹éƒ½å…·æœ‰ç›¸åŒçš„åˆ†ç±»ï¼Œåˆ™å¾—åˆ°ä¸€ä¸ªå¶å­èŠ‚ç‚¹æˆ–è€…ç»ˆæ­¢å¿«ã€‚ä»»ä½•åˆ°è¾¾å¶å­ç»“ç‚¹æ‰€å±çš„åˆ†ç±»å¿…ç„¶å±äºå¶å­èŠ‚ç‚¹çš„ç±»ã€‚ 12345678910111213141516171819202122\"\"\"å‡½æ•°è¯´æ˜ï¼šç»Ÿè®¡classListä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ ï¼ˆç±»æ ‡ç­¾ï¼‰Parameters: classList - ç±»æ ‡ç­¾åˆ—è¡¨ Returns: sortedClassCount[0][0] - å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ ï¼ˆç±»æ ‡ç­¾ï¼‰ \"\"\" def majorityCnt(classList): classCount = &#123;&#125; # ç»Ÿè®¡classListä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•° for vote in classList: if vote not in classCount.keys(): classCount[vote] = 0 classCount[vote] += 1 # æ ¹æ®å­—å…¸çš„å€¼é™åºæ’åº # operator.itemgetter(1)è·å–å¯¹è±¡çš„ç¬¬1åˆ—çš„å€¼ sortedClassCount = sorted(classCount.items(), key = operator.itemgetter(1), reverse = True) # è¿”å›classListä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´  return sortedClassCount[0][0] åˆ›å»ºå†³ç­–æ ‘çš„ä»£ç  1234567891011121314151617181920212223242526272829303132\"\"\"å‡½æ•°è¯´æ˜ï¼šåˆ›å»ºå†³ç­–æ ‘ï¼ˆID3ç®—æ³•ï¼‰ é€’å½’æœ‰ä¸¤ä¸ªç»ˆæ­¢æ¡ä»¶ï¼š1ã€æ‰€æœ‰çš„ç±»æ ‡ç­¾å®Œå…¨ç›¸åŒï¼Œç›´æ¥è¿”å›ç±»æ ‡ç­¾ 2ã€ç”¨å®Œæ‰€æœ‰æ ‡ç­¾ä½†æ˜¯å¾—ä¸åˆ°å”¯ä¸€ç±»åˆ«çš„åˆ†ç»„ï¼Œå³ç‰¹å¾ä¸å¤Ÿç”¨ï¼ŒæŒ‘é€‰å‡ºç°æ•°é‡æœ€å¤šçš„ç±»åˆ«ä½œä¸ºè¿”å›Parameters: dataSet - è®­ç»ƒæ•°æ®é›† labels - åˆ†ç±»å±æ€§æ ‡ç­¾ featLabels - å­˜å‚¨é€‰æ‹©çš„æœ€ä¼˜ç‰¹å¾æ ‡ç­¾ Returns: myTree - å†³ç­–æ ‘\"\"\"def createTree(dataSet, labels, featLabels): classList = [example[-1] for example in dataSet] # å–åˆ†ç±»æ ‡ç­¾ï¼ˆæ˜¯å¦æ”¾è´·ï¼šyes or noï¼‰ if classList.count(classList[0]) == len(classList): # å¦‚æœç±»åˆ«å®Œå…¨ç›¸åŒåˆ™åœæ­¢ç»§ç»­åˆ’åˆ† return classList[0] if len(dataSet[0]) == 1: # éå†å®Œæ‰€æœ‰ç‰¹å¾æ—¶è¿”å›å‡ºç°æ¬¡æ•°æœ€å¤šçš„ç±»æ ‡ç­¾ return majorityCnt(classList) bestFeat = chooseBestFeatureToSplit(dataSet) # é€‰æ‹©æœ€ä¼˜ç‰¹å¾ bestFeatLabel = labels[bestFeat] # æœ€ä¼˜ç‰¹å¾çš„æ ‡ç­¾ featLabels.append(bestFeatLabel) myTree = &#123;bestFeatLabel:&#123;&#125;&#125; # æ ¹æ®æœ€ä¼˜ç‰¹å¾çš„æ ‡ç­¾ç”Ÿæˆæ ‘ del(labels[bestFeat]) # åˆ é™¤å·²ç»ä½¿ç”¨çš„ç‰¹å¾æ ‡ç­¾ featValues = [example[bestFeat] for example in dataSet] # å¾—åˆ°è®­ç»ƒé›†ä¸­æ‰€æœ‰æœ€ä¼˜è§£ç‰¹å¾çš„å±æ€§å€¼ uniqueVals = set(featValues) # å»æ‰é‡å¤çš„å±æ€§å€¼ for value in uniqueVals: # éå†ç‰¹å¾ï¼Œåˆ›å»ºå†³ç­–æ ‘ myTree[bestFeatLabel][value] = createTree(splitDataSet(dataSet, bestFeat, value), labels, featLabels) return myTree&gt;&gt; my tree = DecisionTree.createTree(mydata,labels)&gt;&gt; my tree æµ‹è¯•ç®—æ³•ä¸åˆ†ç±»å™¨æµ‹è¯•ç®—æ³•æ„é€ åˆ†ç±»å™¨12345678910111213141516171819202122\"\"\"å‡½æ•°ï¼šä½¿ç”¨å†³ç­–æ ‘çš„åˆ†ç±»å‡½æ•°para: inputree, featLabels, testVecreturn: classlabel,åˆ†ç±»å™¨\"\"\"def classify(inputTree, featLabels, testVec): # è·å–å†³ç­–æ ‘ç»“ç‚¹ firstStr = next(iter(inputTree)) # ä¸‹ä¸€ä¸ªå­—å…¸ secondDict = inputTree[firstStr] featIndex = featLabels.index(firstStr) for key in secondDict.keys(): if testVec[featIndex] == key: if type(secondDict[key]).__name__ == 'dict': classLabel = classify(secondDict[key], featLabels, testVec) else: classLabel = secondDict[key] return classLabel ä½¿ç”¨ç®—æ³•12345678910111213141516171819202122232425262728\"\"\"å‡½æ•°è¯´æ˜ï¼šå­˜å‚¨å†³ç­–æ ‘Parameters: inputTree - å·²ç»ç”Ÿæˆçš„å†³ç­–æ ‘ filename - å†³ç­–æ ‘çš„å­˜å‚¨æ–‡ä»¶å Returns: None\"\"\" def storeTree(inputTree, filename): with open(filename, 'wb') as fw: pickle.dump(inputTree, fw)\"\"\"å‡½æ•°è¯´æ˜ï¼šè¯»å–å†³ç­–æ ‘Parameters: filename - å†³ç­–æ ‘çš„å­˜å‚¨æ–‡ä»¶å Returns: pickle.load(fr) - å†³ç­–æ ‘å­—å…¸\"\"\" def grabTree(filename): fr = open(filename, 'rb') return pickle.load(fr)","categories":[{"name":"Machine_Learning","slug":"Machine-Learning","permalink":"https://shyshy903.github.io/categories/Machine-Learning/"}],"tags":[{"name":"ML","slug":"ML","permalink":"https://shyshy903.github.io/tags/ML/"}]},{"title":"è‰²å½©æ­é…ä¸è®¾è®¡","slug":"è®¾è®¡/å…³äºé¢œè‰²","date":"2019-11-26T15:30:00.000Z","updated":"2019-11-26T15:30:00.000Z","comments":true,"path":"2019/11/26/è®¾è®¡/å…³äºé¢œè‰²/","link":"","permalink":"https://shyshy903.github.io/2019/11/26/%E8%AE%BE%E8%AE%A1/%E5%85%B3%E4%BA%8E%E9%A2%9C%E8%89%B2/","excerpt":"","text":"ColorMaterial designä¸­çš„color 123456789101112131415161718192021222324&lt;!--Material Colors--&gt; &lt;color name=\"materialColorRed\"&gt;#f44336&lt;/color&gt; &lt;color name=\"materialColorPink\"&gt;#e91e63&lt;/color&gt; &lt;color name=\"materialColorPurple\"&gt;#9c27b0&lt;/color&gt; &lt;color name=\"materialColorDeepPurple\"&gt;#673ab7&lt;/color&gt; &lt;color name=\"materialColorIndigo\"&gt;#3f51b5&lt;/color&gt; &lt;color name=\"materialColorBlue\"&gt;#2196f3&lt;/color&gt; &lt;color name=\"materialColorLightBlue\"&gt;#03a9f4&lt;/color&gt; &lt;color name=\"materialColorCyan\"&gt;#00bcd4&lt;/color&gt; &lt;color name=\"materialColorTeal\"&gt;#009688&lt;/color&gt; &lt;color name=\"materialColorGreen\"&gt;#4caf50&lt;/color&gt; &lt;color name=\"materialColorLightGreen\"&gt;#8bc34a&lt;/color&gt; &lt;color name=\"materialColorLime\"&gt;#cddc39&lt;/color&gt; &lt;color name=\"materialColorYellow\"&gt;#FFeb3b&lt;/color&gt; &lt;color name=\"materialColorAmber\"&gt;#FFc107&lt;/color&gt; &lt;color name=\"materialColorOrange\"&gt;#FF9800&lt;/color&gt; &lt;color name=\"materialColorDeepOrange\"&gt;#FF5722&lt;/color&gt; &lt;color name=\"materialColorBrown\"&gt;#795548&lt;/color&gt; &lt;color name=\"materialColorGrey\"&gt;#9e9e9e&lt;/color&gt; &lt;color name=\"materialColorBlueGrey\"&gt;#607d8b&lt;/color&gt; &lt;!--Text Colors--&gt; &lt;color name=\"primaryText\"&gt;#212121&lt;/color&gt; &lt;color name=\"secondaryText\"&gt;#757575&lt;/color&gt; &lt;color name=\"dividerColor\"&gt;#bdbdbd&lt;/color&gt; è‰²å½©çš„å·§å¦™æ­é… å‡ ä¸ªè‰²å½©ç½‘ç«™æ¨è æ‹¼è‰²ç½‘ç«™1ï¼š https://colordrop.io/æ‹¼è‰²ç½‘ç«™2ï¼šhttp://www.peise.net/tools/web/#RGBè‰²å€¼å¯¹ç…§è¡¨ ï¼šhttps://tool.oschina.net/commons?type=3 ä¸€ä¸ªå…è´¹å›¾ç‰‡ç½‘ç«™https://unsplash.com/","categories":[{"name":"è®¾è®¡","slug":"è®¾è®¡","permalink":"https://shyshy903.github.io/categories/%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"color","slug":"color","permalink":"https://shyshy903.github.io/tags/color/"}]},{"title":"ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ã€Šè¥¿ç“œä¹¦ã€‹ç¬”è®°ï¼ˆäºŒï¼‰- æ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©","slug":"Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰","date":"2019-11-26T07:30:00.000Z","updated":"2020-02-11T08:48:55.547Z","comments":true,"path":"2019/11/26/Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰/","link":"","permalink":"https://shyshy903.github.io/2019/11/26/Machine_Learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%882%EF%BC%89/","excerpt":"","text":"ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ã€Šè¥¿ç“œä¹¦ã€‹ç¬”è®°ï¼ˆäºŒï¼‰- æ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©ç»éªŒè¯¯å·®ä¸è¿‡æ‹Ÿåˆ é”™è¯¯ç‡ä¸ç²¾åº¦é”™è¯¯ç‡æ˜¯åˆ†ç±»é”™è¯¯çš„æ ·æœ¬æ•°å æ ·æœ¬æ€»æ•°çš„æ¯”ä¾‹ï¼Œç²¾åº¦æ˜¯åˆ†ç±»æ­£ç¡®çš„æ ·æœ¬æ•°å æ ·æœ¬æ€»æ•°çš„æ¯”ä¾‹ã€‚ è¯¯å·®ä¸ç»éªŒè¯¯å·®å­¦ä¹ å™¨çš„å®é™…é¢„æµ‹è¾“å‡ºä¸æ ·æœ¬çš„çœŸå®è¾“å‡ºä¹‹é—´çš„å·®å¼‚ç§°ä¸ºâ€œè¯¯å·®â€ï¼Œå­¦ä¹ å™¨åœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯å·®ç§°ä¸ºè®­ç»ƒè¯¯å·®/ç»éªŒè¯¯å·®ï¼Œåœ¨æ–°æ ·æœ¬ä¸Šçš„è¯¯å·®ç§°ä¸ºâ€œæ³›åŒ–è¯¯å·®â€ã€‚ è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆç„¶è€Œï¼Œå½“å­¦ä¹ å™¨æŠŠè®­ç»ƒæ ·æœ¬å­¦å¾—â€å¤ª å¥½â€äº†çš„æ—¶å€™ï¼Œå¾ˆå¯èƒ½å·³ç»æŠŠè®­ç»ƒæ ·æœ¬è‡ªèº«çš„ä¸€äº›ç‰¹ç‚¹å½“ä½œäº†æ‰€æœ‰æ½œåœ¨æ ·æœ¬éƒ½ ä¼šå…·æœ‰çš„ä¸€èˆ¬æ€§è´¨ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´æ³›åŒ–æ€§èƒ½ä¸‹é™ï¼Œå«åš è¿‡æ‹Ÿåˆï¼ˆoverfitting)è®­ç»ƒæ ·æœ¬çš„ä¸€èˆ¬æ€§è´¨å°šæœªå­¦å¥½å«åš æ¬ æ‹Ÿåˆ è¯„ä¼°æ–¹æ³•é€šå¸¸æˆ‘ä»¬ä½¿ç”¨æµ‹è¯•é›†ä¸Šæ ·æœ¬äº§ç”Ÿçš„æ³›åŒ–è¯¯å·®ä½œä¸ºè¯„ä¼°æ ‡å‡†ï¼Œå°±æ˜¯ä»¥â€œæµ‹è¯•è¯¯å·®â€æ¥ä»£è¡¨å­¦ä¹ å™¨çš„â€œæ³›åŒ–è¯¯å·®â€ åˆ’åˆ†æ•°æ®é›†(D)ä¸æµ‹è¯•æœº(T)çš„å¸¸ç”¨æ–¹æ³•ç•™å‡ºæ³•â€œç•™å‡ºæ³•â€ç›´æ¥å°†æ•°æ®é›†Dåˆ’åˆ†ä¸ºä¸¤ä¸ªäº’æ–¥çš„é›†åˆï¼Œå…¶ä¸­ä¸€ä¸ªé›†åˆä½œä¸ºè®­ç»ƒé›†Sï¼Œå¦ä¸€ä¸ªä½œä¸ºè®­ç»ƒé›†Tã€‚è®­ç»ƒ/æµ‹è¯•é›†çš„åˆ’åˆ†è¦å°½å¯èƒ½ä¿æŒæ•°æ®åˆ†å¸ƒçš„ä¸€è‡´æ€§ï¼Œä¾‹å¦‚åœ¨åˆ†ç±»ä»»åŠ¡ä¸­è‡³å°‘è¦ä¿æŒæ ·æœ¬çš„ç±»åˆ«æ¯”ä¾‹ç›¸ä¼¼ã€‚å¦‚æœä»é‡‡æ ·çš„è§’åº¦æ¥çœ‹å¾…æ•°æ®é›†çš„åˆ’åˆ†è¿‡ç¨‹ï¼Œåˆ™ä¿ç•™ç±»åˆ«æ¯”ä¾‹çš„é‡‡æ ·æ–¹å¼é€šå¸¸ç§°ä¸ºâ€œåˆ†å±‚é‡‡æ ·â€ã€‚å•æ¬¡ä½¿ç”¨ç•™å‡ºæ³•å¾—åˆ°çš„ä¼°è®¡ç»“æœå¾€å¾€ä¸å¤Ÿç¨³å®šå¯é ï¼Œåœ¨ä½¿ç”¨ç•™å‡ºæ³•æ—¶ï¼Œä¸€èˆ¬è¦é‡‡ç”¨è‹¥å¹²æ¬¡éšæœºåˆ’åˆ†ï¼Œé‡å¤è¿›è¡Œå®éªŒè¯„ä¼°åå–å¹³å‡å€¼ä½œä¸ºç•™å‡ºæ³•çš„è¯„ä¼°ç»“æœã€‚é€šå¸¸å°†2/3~4/5çš„æ ·æœ¬ç”¨äºè®­ç»ƒï¼Œå‰©ä½™æ ·æœ¬ç”¨äºæµ‹è¯•ã€‚ äº¤å‰éªŒè¯æ³•å…ˆå°†æ•°æ®é›†Dåˆ’åˆ†ä¸ºkä¸ªå¤§å°ç›¸ä¼¼çš„äº’æ–¥å­é›†ï¼Œæ¯ä¸ªå­é›†éƒ½å°½å¯èƒ½ä¿æŒæ•°æ®åˆ†å¸ƒçš„ä¸€è‡´æ€§ï¼Œå³ä»Dä¸­é€šè¿‡åˆ†å±‚é‡‡æ ·å¾—åˆ°ï¼Œç„¶åï¼Œæ¯æ¬¡ç”¨k-1ä¸ªå­é›†çš„å¹¶é›†ä½œä¸ºè®­ç»ƒé›†ï¼Œä½™ä¸‹çš„é‚£ä¸ªå­é›†ä½œä¸ºæµ‹è¯•é›†ï¼›è¿™æ ·å°±å¯è·å¾—kç»„è®­ç»ƒ/æµ‹è¯•é›†ï¼Œä»è€Œå¯è¿›è¡Œkæ¬¡è®­ç»ƒå’Œæµ‹è¯•ï¼Œæœ€ç»ˆè¿”å›çš„æ˜¯è¿™kä¸ªæµ‹è¯•ç»“æœçš„å‡å€¼ã€‚äº¤å‰éªŒè¯æ³•è¯„ä¼°ç»“æœçš„ç¨³å®šæ€§å’Œä¿çœŸæ€§åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºkçš„å–å€¼ï¼Œé€šå¸¸åˆç§°ä¸ºâ€œkæŠ˜äº¤å‰éªŒè¯â€ã€‚ä¸ç•™å‡ºæ³•ç›¸ä¼¼ï¼Œå°†æ•°æ®é›†åˆ’åˆ†ä¸ºkä¸ªå­é›†åŒæ ·å­˜åœ¨å¤šç§åˆ’åˆ†æ–¹å¼ï¼Œä¸ºå‡å°‘å› æ ·æœ¬åˆ’åˆ†ä¸åŒè€Œå¼•å…¥çš„å·®åˆ«ï¼ŒkæŠ˜äº¤å‰éªŒè¯é€šå¸¸è¦éšæœºä½¿ç”¨ä¸åŒçš„åˆ’åˆ†é‡å¤pæ¬¡ï¼Œæœ€ç»ˆçš„è¯„ä¼°ç»“æœæ˜¯è¿™pæ¬¡kæŠ˜äº¤å‰éªŒè¯ç»“æœçš„å‡å€¼ã€‚å‡å®šæ•°æ®é›†ä¸­åŒ…å«mä¸ªæ ·æœ¬ï¼Œè‹¥ä»¤k=mï¼Œåˆ™å¾—åˆ°äº†äº¤å‰éªŒè¯æ³•çš„ä¸€ä¸ªç‰¹ä¾‹ï¼šç•™ä¸€æ³•ã€‚ è‡ªåŠ©æ³•ä¸ºå‡å°‘è®­ç»ƒæ ·æœ¬è§„æ¨¡ä¸åŒé€ æˆçš„å½±å“ï¼ŒåŒæ—¶æ¯”è¾ƒé«˜æ•ˆåœ°è¿›è¡Œå®éªŒä¼°è®¡ã€‚è‡ªåŠ©æ³•ï¼ˆbootstrappingï¼‰ä»¥è‡ªåŠ©é‡‡æ ·æ³•ä¸ºåŸºç¡€ã€‚ç»™å®šåŒ…å«mä¸ªæ ·æœ¬çš„æ•°æ®é›†Dï¼Œæˆ‘ä»¬å¯¹å®ƒè¿›è¡Œé‡‡æ ·äº§ç”Ÿæ•°æ®é›†Dâ€™ï¼šæ¯æ¬¡éšæœºä»Dä¸­æŒ‘é€‰ä¸€ä¸ªæ ·æœ¬ï¼Œå°†å…¶æ‹·è´æ”¾å…¥Dâ€™ï¼Œç„¶åå†å°†è¯¥æ ·æœ¬æ”¾å›åˆå§‹æ•°æ®é›†ä¸­ï¼Œä½¿å¾—è¯¥æ ·æœ¬åœ¨ä¸‹æ¬¡é‡‡æ ·æ—¶ä»æœ‰å¯èƒ½è¢«é‡‡åˆ°ï¼›è¿™ä¸ªè¿‡ç¨‹é‡å¤æ‰§è¡Œmæ¬¡åï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†åŒ…å«mä¸ªæ ·æœ¬çš„æ•°æ®é›†Dâ€™ã€‚æ˜¾ç„¶ï¼ŒDä¸­æœ‰ä¸€éƒ¨åˆ†æ ·æœ¬åœ¨Dâ€™ä¸­å¤šæ¬¡å‡ºç°ï¼Œè€Œä¸€éƒ¨åˆ†æ ·æœ¬ä¸å‡ºç°ã€‚é€šè¿‡è‡ªåŠ©é‡‡æ ·ï¼Œåˆå§‹æ•°æ®é›†Dä¸­çº¦æœ‰36.8%çš„æ ·æœ¬æœªå‡ºç°åœ¨é‡‡æ ·æ•°æ®é›†Dâ€™ä¸­ã€‚äºæ˜¯å°†Dâ€™ç”¨ä½œè®­ç»ƒé›†ï¼ŒD/Dâ€™ç”¨ä½œæµ‹è¯•é›†ã€‚è¿™æ ·çš„æµ‹è¯•ç»“æœï¼Œäº¦ç§°â€œåŒ…å¤–ä¼°è®¡â€ã€‚æ²¡æœ‰ç•™å‡ºæ³•ï¼Œå’Œäº¤å‰éªŒè¯æ³•å¸¸ç”¨ è°ƒå‚ä¸æœ€ç»ˆæ¨¡å‹å¤§å¤šæ•°å­¦ä¹ ç®—æ³•éƒ½æœ‰äº›å‚æ•°(parameter)éœ€è¦è®¾å®šï¼Œå‚æ•°é…ç½®ä¸åŒï¼Œå­¦å¾—æ¨¡ å‹çš„æ€§èƒ½å¾€å¾€æœ‰æ˜¾è‘—å·®åˆ«.å› æ­¤ï¼Œåœ¨è¿›è¡Œæ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©æ—¶ï¼Œé™¤äº†è¦å¯¹é€‚ç”¨å­¦ä¹  ç®—æ³•è¿›è¡Œé€‰æ‹©ï¼Œè¿˜éœ€å¯¹ç®—æ³•å‚æ•°è¿›è¡Œè®¾å®šï¼Œè¿™å°±æ˜¯é€šå¸¸æ‰€è¯´çš„â€å‚æ•°è°ƒèŠ‚â€æˆ– ç®€ç§°â€è°ƒå‚â€ (parameter tuning).ç°å®ä¸­å¸¸ç”¨çš„åšæ³•?æ˜¯å¯¹æ¯ä¸ªå‚æ•°é€‰å®šä¸€ä¸ª èŒƒå›´å’Œå˜åŒ–æ­¥é•¿ï¼Œä¾‹å¦‚åœ¨ [0 ï¼Œ0.2] èŒƒå›´å†…ä»¥ 0.05 ä¸ºæ­¥é•¿ï¼Œåˆ™å®é™…è¦è¯„ä¼°çš„å€™é€‰å‚ æ•°å€¼æœ‰ 5 ä¸ªï¼Œæœ€ç»ˆæ˜¯ä»è¿™ 5 ä¸ªå€™é€‰å€¼ä¸­äº§ç”Ÿé€‰å®šå€¼.æ˜¾ç„¶ï¼Œè¿™æ ·é€‰å®šçš„å‚æ•°å€¼å¾€ å¾€ä¸æ˜¯â€æœ€ä½³â€å€¼ï¼Œä½†è¿™æ˜¯åœ¨è®¡ç®—å¼€é”€å’Œæ€§èƒ½ä¼°è®¡ä¹‹é—´è¿›è¡ŒæŠ˜ä¸­çš„ç»“æœï¼Œé€šè¿‡ è¿™ä¸ªæŠ˜ä¸­ï¼Œå­¦ä¹ è¿‡ç¨‹æ‰å˜å¾—å¯è¡Œ.äº‹å®ä¸Šï¼Œå³ä¾¿åœ¨è¿›è¡Œè¿™æ ·çš„æŠ˜ä¸­åï¼Œè°ƒå‚å¾€å¾€ ä»å¾ˆå›°éš¾.å¯ä»¥ç®€å•ä¼°ç®—ä¸€ä¸‹:å‡å®šç®—æ³•æœ‰ 3 ä¸ªå‚æ•°ï¼Œæ¯ä¸ªå‚æ•°ä»…è€ƒè™‘ 5 ä¸ªå€™é€‰ å€¼ï¼Œè¿™æ ·å¯¹æ¯ä¸€ç»„è®­ç»ƒ/æµ‹è¯•é›†å°±æœ‰ 53 = 125 ä¸ªæ¨¡å‹éœ€è€ƒå¯Ÿå¦å¤–ï¼Œéœ€æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠå­¦å¾—æ¨¡å‹åœ¨å®é™…ä½¿ç”¨ä¸­é‡åˆ°çš„æ•°æ®ç§°ä¸ºæµ‹ è¯•æ•°æ®ï¼Œä¸ºäº†åŠ ä»¥åŒºåˆ†ï¼Œæ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©ä¸­ç”¨äºè¯„ä¼°æµ‹è¯•çš„æ•°æ®é›†å¸¸ç§°ä¸ºâ€éªŒ è¯é›†â€ (validation set). ä¾‹å¦‚ï¼Œåœ¨ç ”ç©¶å¯¹æ¯”ä¸åŒç®—æ³•çš„æ³›åŒ–æ€§èƒ½æ—¶ï¼Œæˆ‘ä»¬ç”¨æµ‹è¯• é›†ä¸Šçš„åˆ¤åˆ«æ•ˆæœæ¥ä¼°è®¡æ¨¡å‹åœ¨å®é™…ä½¿ç”¨æ—¶çš„æ³›åŒ–èƒ½åŠ›ï¼Œè€ŒæŠŠè®­ç»ƒæ•°æ®å¦å¤–åˆ’åˆ† ä¸ºè®­ç»ƒé›†å’ŒéªŒè¯é›†ï¼ŒåŸºäºéªŒè¯é›†ä¸Šçš„æ€§èƒ½æ¥è¿›è¡Œæ¨¡å‹é€‰æ‹©å’Œè°ƒå‚. æ€§èƒ½åº¦é‡å¯¹å­¦ä¹ å™¨çš„æ³›åŒ–æ€§èƒ½è¿›è¡Œè¯„ä¼°ï¼Œä¸ä»…éœ€è¦æœ‰æ•ˆå¯è¡Œçš„å®éªŒä¼°è®¡æ–¹æ³•ï¼Œè¿˜éœ€ è¦æœ‰è¡¡é‡æ¨¡å‹æ³›åŒ–èƒ½åŠ›çš„è¯„ä»·æ ‡å‡†ï¼Œè¿™å°±æ˜¯æ€§èƒ½åº¦é‡(performance measure). é”™è¯¯ç‡ä¸ç²¾åº¦é”™è¯¯ç‡æ˜¯åˆ†ç±»é”™è¯¯çš„æ ·æœ¬æ•°å æ ·æœ¬æ€»æ•°çš„æ¯”ä¾‹ï¼Œç²¾åº¦æ˜¯åˆ†ç±»æ­£ç¡®çš„æ ·æœ¬æ•°å æ ·æœ¬æ€»æ•°çš„æ¯”ä¾‹ã€‚ æŸ¥å‡†ç‡ã€æŸ¥å…¨ç‡ã€F1å¯¹äºäºŒåˆ†ç±»é—®é¢˜ï¼Œå¯å°†æ ·ä¾‹æ ¹æ®å…¶çœŸå®ç±»åˆ«ä¸å­¦ä¹ å™¨é¢„æµ‹ç±»åˆ«çš„ç»„åˆåˆ’åˆ†ä¸ºçœŸæ­£ä¾‹(true positive)ã€å‡æ­£ä¾‹(false positive)ã€çœŸåå€’(true negative) ã€ å‡åä¾‹(false negative)å››ç§æƒ…å½¢ï¼Œä»¤ TPã€ FPã€ TNã€ FN åˆ†åˆ«è¡¨ç¤ºå…¶å¯¹åº”çš„ æ ·ä¾‹æ•°ï¼Œåˆ™æ˜¾ç„¶æœ‰ TP+FP+TN+FN=æ ·ä¾‹æ€»æ•°.åˆ†ç±»ç»“æœçš„â€æ³ªæ·†çŸ© é˜µâ€ (coæ—¶usion matrix),å¦‚ä¸‹è¡¨æ‰€ç¤º å‡†ç‡å’ŒæŸ¥å…¨ç‡æ˜¯ä¸€å¯¹çŸ›ç›¾çš„åº¦é‡ã€‚æŸ¥å‡†ç‡-æŸ¥å…¨ç‡æ›²çº¿ï¼Œç®€ç§°â€œP-Ræ›²çº¿â€ã€‚åœ¨è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œè‹¥ä¸€ä¸ªå­¦ä¹ å™¨çš„P-Ræ›²çº¿è¢«å¦ä¸€ä¸ªå­¦ä¹ å™¨çš„æ›²çº¿å®Œå…¨â€œåŒ…ä½â€ï¼Œåˆ™å¯æ–­è¨€åè€…çš„æ€§èƒ½ä¼˜äºå‰è€…ã€‚å¦‚æœä¸¤ä¸ªå­¦ä¹ å™¨çš„P-Ræ›²çº¿äº¤å‰ï¼Œéš¾ä»¥ä¸€èˆ¬æ€§æ–­è¨€ä¸¤è€…å­°ä¼˜å­°åŠ£ã€‚æ¯”è¾ƒåˆç†çš„åˆ¤æ®æ˜¯æ¯”è¾ƒP-Ræ›²çº¿ä¸‹é¢ç§¯çš„å¤§å°ã€‚ ä¸ºç»¼åˆè€ƒè™‘æŸ¥å‡†ç‡ã€æŸ¥å…¨ç‡çš„æ€§èƒ½åº¦é‡ï¼Œâ€œå¹³è¡¡ç‚¹â€å³â€œæŸ¥å‡†ç‡=æŸ¥å…¨ç‡â€æ—¶çš„å–å€¼ï¼Œæ›´å¸¸ç”¨çš„æ˜¯F1åº¦é‡ã€‚ å½“å¯¹æŸ¥å‡†ç‡å’ŒæŸ¥å…¨ç‡çš„é‡è§†ç¨‹åº¦æœ‰æ‰€ä¸åŒï¼ŒF1åº¦é‡çš„ä¸€èˆ¬å½¢å¼FÎ². Î²>0åº¦é‡äº†æŸ¥å…¨ç‡å¯¹æŸ¥å‡†ç‡çš„ç›¸å¯¹é‡è¦æ€§ã€‚Î²=1æ—¶é€€åŒ–ä¸ºæ ‡å‡†çš„F1ï¼ŒÎ²>1æ—¶æŸ¥å…¨ç‡æœ‰æ›´å¤§å½±å“ï¼ŒÎ²","categories":[{"name":"Machine_Learning","slug":"Machine-Learning","permalink":"https://shyshy903.github.io/categories/Machine-Learning/"}],"tags":[{"name":"ML","slug":"ML","permalink":"https://shyshy903.github.io/tags/ML/"}]},{"title":"ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ã€Šè¥¿ç“œä¹¦ã€‹ç¬”è®°ï¼ˆä¸‰ï¼‰- KNN","slug":"Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ3-KNN)","date":"2019-11-26T07:30:00.000Z","updated":"2020-02-11T08:48:55.551Z","comments":true,"path":"2019/11/26/Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆ3-KNN)/","link":"","permalink":"https://shyshy903.github.io/2019/11/26/Machine_Learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%883-KNN)/","excerpt":"","text":"ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ã€Šè¥¿ç“œä¹¦ã€‹ç¬”è®°ï¼ˆä¸‰ï¼‰- KNNKNNåŸç† è¾“å…¥å¸¦æœ‰æ ‡ç­¾çš„è®­ç»ƒé›† è¾“å…¥æ²¡æœ‰æ ‡ç­¾çš„æ–°æ•°æ® ç®—æ³•å°†è¾“å…¥æ•°æ®çš„ç‰¹å¾ä¸è®­ç»ƒé›†çš„æ•°æ®çš„ç‰¹å¾è¿›è¡Œæ¯”è¾ƒ æ±‚æ–°æ•°æ®ä¸æ ·æœ¬é›†ä¸­æ•°æ®çš„è·ç¦» ç®—æ³•æå–æ ·æœ¬é›†ä¸­æœ€ç›¸ä¼¼æ•°æ®ï¼ˆæœ€è¿‘é‚»ï¼‰çš„åˆ†ç±»æ ‡ç­¾ï¼Œåªé€‰æ‹©å‰Kä¸ªæœ€ç›¸ä¼¼çš„æ•°æ® é€‰å–kä¸ªç›¸ä¼¼æ•°æ®é¢‘ç‡æœ€å¤šçš„åˆ†ç±»å±æ€§ä½œä¸ºæ–°æ•°æ®çš„åˆ†ç±»å±æ€§ KNNä¼ªä»£ç  è®¡ç®—å·²çŸ¥ç±»åˆ«æ•°æ®é›†ä¸­ç‚¹ä¸å½“å‰ç‚¹çš„è·ç¦» æŒ‰ç…§è·ç¦»ä»å°åˆ°å¤§é€’å¢æ’åº é€‰å–ä¸å½“å‰ç‚¹è·ç¦»æœ€å°çš„kä¸ªç‚¹ ç¡®å®šå‰kä¸ªç‚¹æ‰€åœ¨ç±»åˆ«å‡ºç°çš„é¢‘ç‡ è¿”å›å‰kä¸ªç‚¹å‡ºç°é¢‘ç‡æœ€é«˜çš„ç±»åˆ«ä½œä¸ºå½“å‰ç‚¹çš„é¢„æµ‹åˆ†ç±» KNNæºä»£ç 123456789101112131415161718192021222324252627282930def classify0(inX, dataSet, labels, k): # numpyå‡½æ•°shape[0]è¿”å›dataSetçš„è¡Œæ•° dataSetSize = dataSet.shape[0] # å°†inXé‡å¤dataSetSizeæ¬¡å¹¶æ’æˆä¸€åˆ— diffMat = np.tile(inX, (dataSetSize, 1)) - dataSet # äºŒç»´ç‰¹å¾ç›¸å‡åå¹³æ–¹ï¼ˆç”¨diffMatçš„è½¬ç½®ä¹˜diffMatï¼‰ sqDiffMat = diffMat**2 # sum()æ‰€æœ‰å…ƒç´ ç›¸åŠ ï¼Œsum(0)åˆ—ç›¸åŠ ï¼Œsum(1)è¡Œç›¸åŠ  sqDistances = sqDiffMat.sum(axis=1) # å¼€æ–¹ï¼Œè®¡ç®—å‡ºè·ç¦» distances = sqDistances**0.5 # argsortå‡½æ•°è¿”å›çš„æ˜¯distanceså€¼ä»å°åˆ°å¤§çš„--ç´¢å¼•å€¼ sortedDistIndicies = distances.argsort() # å®šä¹‰ä¸€ä¸ªè®°å½•ç±»åˆ«æ¬¡æ•°çš„å­—å…¸ classCount = &#123;&#125; # é€‰æ‹©è·ç¦»æœ€å°çš„kä¸ªç‚¹ for i in range(k): # å–å‡ºå‰kä¸ªå…ƒç´ çš„ç±»åˆ« voteIlabel = labels[sortedDistIndicies[i]] # å­—å…¸çš„get()æ–¹æ³•ï¼Œè¿”å›æŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœå€¼ä¸åœ¨å­—å…¸ä¸­è¿”å›0 # è®¡ç®—ç±»åˆ«æ¬¡æ•° classCount[voteIlabel] = classCount.get(voteIlabel, 0) + 1 # python3ä¸­ç”¨items()æ›¿æ¢python2ä¸­çš„iteritems() # key = operator.itemgetter(1)æ ¹æ®å­—å…¸çš„å€¼è¿›è¡Œæ’åº # key = operator.itemgetter(0)æ ¹æ®å­—å…¸çš„é”®è¿›è¡Œæ’åº # reverseé™åºæ’åºå­—å…¸ sortedClassCount = sorted(classCount.items(),\\ key = operator.itemgetter(1), reverse = True) # è¿”å›æ¬¡æ•°æœ€å¤šçš„ç±»åˆ«ï¼Œå³æ‰€è¦åˆ†ç±»çš„ç±»åˆ« return sortedClassCount[0][0] è¶Šé¢„æµ‹æ•°æ®æ‰€åœ¨çš„åˆ†ç±»åœ¨ç»ˆç«¯ä¸­çš„äº¤äº’è§£é‡Šå™¨æ‰§è¡Œï¼š 1&gt;&gt; classify([1.0, 1.0], group, lables, 5) å³å¯æµ‹è¯•å¾—åˆ°ä¸€ä¸ªç»“æœ ç®€å•çš„ä¸€ä¸ªç¤ºä¾‹æ•°æ®çš„å‡†å¤‡åœ¨KNNçš„æ¨¡å—ä¸­æ·»åŠ ä¸€ä¸ªå®ç°æ•°æ®æ ·æœ¬çš„å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 123456import numpy as npimport operatordef creatDataSet(): group = np.array([1, 1], [1, 1.1], [0, 0], [0, 0.1]) labels = ['A', 'A', 'B', 'B'] return group, labels åœ¨äº¤äº’è§£é‡Šå™¨ä¸­æ‰§è¡Œ: 1234&gt;&gt; import KNN&gt;&gt; group, lables = KNN.creatDataSet()&gt;&gt; KNN.classify0([0,0], group, labels, 3)&gt;&gt; B å¯ç”Ÿæˆä¸€ä¸ªåˆæ­¥åº”ç”¨äºKNNçš„4ç»´2åˆ—çš„æ•°æ®é›† å¦‚ä½•æµ‹è¯•åˆ†ç±»å™¨ä½¿ç”¨åˆ†ç±»å™¨çš„é”™è¯¯ç‡ï¼Œå³åˆ†ç±»å™¨ç»™å‡ºçš„é”™è¯¯ç»“æœé™¤ä»¥æµ‹è¯•æ‰§è¡Œçš„ç»¼è¿°æ¥åˆ¤æ–­åˆ†ç±»å™¨çš„å¥½å ç¤ºä¾‹1 KNNè¿›è¡Œçº¦ä¼šåŒ¹é…æ‰§è¡Œæµç¨‹ æ”¶é›†æ•°æ® ï¼š å¯¼å…¥æ–‡æœ¬æ–‡ä»¶ å‡†å¤‡æ•°æ®: ä½¿ç”¨pythonè§£æ åˆ†ææ•°æ®ï¼š matplotlibç»˜å›¾ è®­ç»ƒç®—æ³•ï¼šk-è¿‘é‚»ä¸é€‚ç”¨ æµ‹è¯•ç®—æ³• ä½¿ç”¨ç®—æ³•å‡†å¤‡æ•°æ®123456789101112131415161718192021222324252627282930313233343536373839404142\"\"\"å‡½æ•°è¯´æ˜ï¼šæ‰“å¼€è§£ææ–‡ä»¶ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†ç±»ï¼Œ1ä»£è¡¨ä¸å–œæ¬¢ï¼Œ2ä»£è¡¨é­…åŠ›ä¸€èˆ¬ï¼Œ3ä»£è¡¨æå…·é­…åŠ›Parameters: filename - æ–‡ä»¶å Returns: returnMat - ç‰¹å¾çŸ©é˜µ classLabelVector - åˆ†ç±»labelå‘é‡\"\"\"def file2matrix(filename): # æ‰“å¼€æ–‡ä»¶ fr = open(filename) # è¯»å–æ–‡ä»¶æ‰€æœ‰å†…å®¹ arrayOlines = fr.readlines() # å¾—åˆ°æ–‡ä»¶è¡Œæ•° numberOfLines = len(arrayOlines) # è¿”å›çš„NumPyçŸ©é˜µnumberOfLinesè¡Œï¼Œ3åˆ— returnMat = np.zeros((numberOfLines, 3)) # åˆ›å»ºåˆ†ç±»æ ‡ç­¾å‘é‡ classLabelVector = [] # è¡Œçš„ç´¢å¼•å€¼ index = 0 # è¯»å–æ¯ä¸€è¡Œ for line in arrayOlines: # å»æ‰æ¯ä¸€è¡Œé¦–å°¾çš„ç©ºç™½ç¬¦ï¼Œä¾‹å¦‚'\\n','\\r','\\t',' ' line = line.strip() # å°†æ¯ä¸€è¡Œå†…å®¹æ ¹æ®'\\t'ç¬¦è¿›è¡Œåˆ‡ç‰‡,æœ¬ä¾‹ä¸­ä¸€å…±æœ‰4åˆ— listFromLine = line.split('\\t') # å°†æ•°æ®çš„å‰3åˆ—è¿›è¡Œæå–ä¿å­˜åœ¨returnMatçŸ©é˜µä¸­ï¼Œä¹Ÿå°±æ˜¯ç‰¹å¾çŸ©é˜µ returnMat[index,:] = listFromLine[0:3] # æ ¹æ®æ–‡æœ¬å†…å®¹è¿›è¡Œåˆ†ç±»1ï¼šä¸å–œæ¬¢ï¼›2ï¼šä¸€èˆ¬ï¼›3ï¼šå–œæ¬¢ if listFromLine[-1] == 'didntLike': classLabelVector.append(1) elif listFromLine[-1] == 'smallDoses': classLabelVector.append(2) elif listFromLine[-1] == 'largeDoses': classLabelVector.append(3) index += 1 # è¿”å›æ ‡ç­¾åˆ—å‘é‡ä»¥åŠç‰¹å¾çŸ©é˜µ return returnMat, classLabelVector åˆ†ææ•°æ®ï¼Œä½¿ç”¨matplotlibè¿›è¡Œç”»å›¾12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970\"\"\"å‡½æ•°è¯´æ˜ï¼šå¯è§†åŒ–æ•°æ®Parameters: datingDataMat - ç‰¹å¾çŸ©é˜µ datingLabels - åˆ†ç±»Label Returns: None Modify: 2018-07-13\"\"\"def showdatas(datingDataMat, datingLabels): # è®¾ç½®æ±‰å­—æ ¼å¼ä¸º14å·ç®€ä½“å­— font = FontProperties(fname=r\"C:\\Windows\\Fonts\\simsun.ttc\", size=14) # å°†figç”»å¸ƒåˆ†éš”æˆ1è¡Œ1åˆ—ï¼Œä¸å…±äº«xè½´å’Œyè½´ï¼Œfigç”»å¸ƒçš„å¤§å°ä¸ºï¼ˆ13ï¼Œ8ï¼‰ # å½“nrows=2ï¼Œncols=2æ—¶ï¼Œä»£è¡¨figç”»å¸ƒè¢«åˆ†ä¸º4ä¸ªåŒºåŸŸï¼Œaxs[0][0]ä»£è¡¨ç¬¬ä¸€è¡Œç¬¬ä¸€ä¸ªåŒºåŸŸ fig, axs = plt.subplots(nrows=2, ncols=2, sharex=False, sharey=False, figsize=(13, 8)) # è·å–datingLabelsçš„è¡Œæ•°ä½œä¸ºlabelçš„ä¸ªæ•° # numberOfLabels = len(datingLabels) # labelçš„é¢œè‰²é…ç½®çŸ©é˜µ LabelsColors = [] for i in datingLabels: # didntLike if i == 1: LabelsColors.append('black') # smallDoses if i == 2: LabelsColors.append('orange') # largeDoses if i == 3: LabelsColors.append('red') # ç”»å‡ºæ•£ç‚¹å›¾ï¼Œä»¥datingDataMatçŸ©é˜µç¬¬ä¸€åˆ—ä¸ºxï¼Œç¬¬äºŒåˆ—ä¸ºyï¼Œæ•£ç‚¹å¤§å°ä¸º15, é€æ˜åº¦ä¸º0.5 axs[0][0].scatter(x=datingDataMat[:,0], y=datingDataMat[:,1], color=LabelsColors, s=15, alpha=.5) # è®¾ç½®æ ‡é¢˜ï¼Œxè½´labelï¼Œ yè½´label axs0_title_text = axs[0][0].set_title(u'æ¯å¹´è·å¾—çš„é£è¡Œå¸¸å®¢é‡Œç¨‹æ•°ä¸ç©è§†é¢‘æ¸¸æˆæ‰€æ¶ˆè€—æ—¶é—´å æ¯”', FontProperties=font) axs0_xlabel_text = axs[0][0].set_xlabel(u'æ¯å¹´è·å¾—çš„é£è¡Œå¸¸å®¢é‡Œç¨‹æ•°', FontProperties=font) axs0_ylabel_text = axs[0][0].set_ylabel(u'ç©è§†é¢‘æ¸¸æˆæ‰€æ¶ˆè€—æ—¶é—´å æ¯”', FontProperties=font) plt.setp(axs0_title_text, size=9, weight='bold', color='red') plt.setp(axs0_xlabel_text, size=7, weight='bold', color='black') plt.setp(axs0_ylabel_text, size=7, weight='bold', color='black') # ç”»å‡ºæ•£ç‚¹å›¾ï¼Œä»¥datingDataMatçŸ©é˜µç¬¬ä¸€åˆ—ä¸ºxï¼Œç¬¬ä¸‰åˆ—ä¸ºyï¼Œæ•£ç‚¹å¤§å°ä¸º15, é€æ˜åº¦ä¸º0.5 axs[0][1].scatter(x=datingDataMat[:,0], y=datingDataMat[:,2], color=LabelsColors, s=15, alpha=.5) # è®¾ç½®æ ‡é¢˜ï¼Œxè½´labelï¼Œ yè½´label axs1_title_text = axs[0][1].set_title(u'æ¯å¹´è·å¾—çš„é£è¡Œå¸¸å®¢é‡Œç¨‹æ•°ä¸æ¯å‘¨æ¶ˆè´¹çš„å†°æ·‡æ·‹å…¬å‡æ•°', FontProperties=font) axs1_xlabel_text = axs[0][1].set_xlabel(u'æ¯å¹´è·å¾—çš„é£è¡Œå¸¸å®¢é‡Œç¨‹æ•°', FontProperties=font) axs1_ylabel_text = axs[0][1].set_ylabel(u'æ¯å‘¨æ¶ˆè´¹çš„å†°æ·‡æ·‹å…¬å‡æ•°', FontProperties=font) plt.setp(axs1_title_text, size=9, weight='bold', color='red') plt.setp(axs1_xlabel_text, size=7, weight='bold', color='black') plt.setp(axs1_ylabel_text, size=7, weight='bold', color='black') # ç”»å‡ºæ•£ç‚¹å›¾ï¼Œä»¥datingDataMatçŸ©é˜µç¬¬äºŒåˆ—ä¸ºxï¼Œç¬¬ä¸‰åˆ—ä¸ºyï¼Œæ•£ç‚¹å¤§å°ä¸º15, é€æ˜åº¦ä¸º0.5 axs[1][0].scatter(x=datingDataMat[:,1], y=datingDataMat[:,2], color=LabelsColors, s=15, alpha=.5) # è®¾ç½®æ ‡é¢˜ï¼Œxè½´labelï¼Œ yè½´label axs2_title_text = axs[1][0].set_title(u'ç©è§†é¢‘æ¸¸æˆæ‰€æ¶ˆè€—æ—¶é—´å æ¯”ä¸æ¯å‘¨æ¶ˆè´¹çš„å†°æ·‡æ·‹å…¬å‡æ•°', FontProperties=font) axs2_xlabel_text = axs[1][0].set_xlabel(u'ç©è§†é¢‘æ¸¸æˆæ‰€æ¶ˆè€—æ—¶é—´å æ¯”', FontProperties=font) axs2_ylabel_text = axs[1][0].set_ylabel(u'æ¯å‘¨æ¶ˆè´¹çš„å†°æ·‡æ·‹å…¬å‡æ•°', FontProperties=font) plt.setp(axs2_title_text, size=9, weight='bold', color='red') plt.setp(axs2_xlabel_text, size=7, weight='bold', color='black') plt.setp(axs2_ylabel_text, size=7, weight='bold', color='black') # è®¾ç½®å›¾ä¾‹ didntLike = mlines.Line2D([], [], color='black', marker='.', markersize=6, label='didntLike') smallDoses = mlines.Line2D([], [], color='orange', marker='.', markersize=6, label='smallDoses') largeDoses = mlines.Line2D([], [], color='red', marker='.', markersize=6, label='largeDoses') # æ·»åŠ å›¾ä¾‹ axs[0][0].legend(handles=[didntLike, smallDoses, largeDoses]) axs[0][1].legend(handles=[didntLike, smallDoses, largeDoses]) axs[1][0].legend(handles=[didntLike, smallDoses, largeDoses]) # æ˜¾ç¤ºå›¾ç‰‡ plt.show() å‡†å¤‡æ•°æ®ï¼Œå½’ä¸€åŒ–12345678910111213141516171819202122232425262728293031\"\"\"å‡½æ•°è¯´æ˜ï¼šå¯¹æ•°æ®è¿›è¡Œå½’ä¸€åŒ–Parameters: dataSet - ç‰¹å¾çŸ©é˜µ Returns: normDataSet - å½’ä¸€åŒ–åçš„ç‰¹å¾çŸ©é˜µ ranges - æ•°æ®èŒƒå›´ minVals - æ•°æ®æœ€å°å€¼ Modify: 2018-07-13\"\"\"def autoNorm(dataSet): # è·å–æ•°æ®çš„æœ€å°å€¼ minVals = dataSet.min(0) # è·å–æ•°æ®çš„æœ€å¤§å€¼ maxVals = dataSet.max(0) # æœ€å¤§å€¼å’Œæœ€å°å€¼çš„èŒƒå›´ ranges = maxVals - minVals # shape(dataSet)è¿”å›dataSetçš„çŸ©é˜µè¡Œåˆ—æ•° normDataSet = np.zeros(np.shape(dataSet)) # numpyå‡½æ•°shape[0]è¿”å›dataSetçš„è¡Œæ•° m = dataSet.shape[0] # åŸå§‹å€¼å‡å»æœ€å°å€¼ï¼ˆx-xminï¼‰ normDataSet = dataSet - np.tile(minVals, (m, 1)) # å·®å€¼å¤„ä»¥æœ€å¤§å€¼å’Œæœ€å°å€¼çš„å·®å€¼ï¼ˆx-xminï¼‰/ï¼ˆxmax-xminï¼‰ normDataSet = normDataSet / np.tile(ranges, (m, 1)) # å½’ä¸€åŒ–æ•°æ®ç»“æœï¼Œæ•°æ®èŒƒå›´ï¼Œæœ€å°å€¼ return normDataSet, ranges, minVals æµ‹è¯•ç®—æ³•ï¼Œä½œä¸ºå®Œæ•´ç¨‹åºéªŒè¯åˆ†ç±»å™¨1234567891011121314151617181920212223242526272829303132333435363738\"\"\"å‡½æ•°è¯´æ˜ï¼šåˆ†ç±»å™¨æµ‹è¯•å‡½æ•°Parameters: None Returns: normDataSet - å½’ä¸€åŒ–åçš„ç‰¹å¾çŸ©é˜µ ranges - æ•°æ®èŒƒå›´ minVals - æ•°æ®æœ€å°å€¼ Modify: 2018-07-13\"\"\"def datingClassTest(): # æ‰“å¼€æ–‡ä»¶å filename = \"datingTestSet.txt\" # å°†è¿”å›çš„ç‰¹å¾çŸ©é˜µå’Œåˆ†ç±»å‘é‡åˆ†åˆ«å­˜å‚¨åˆ°datingDataMatå’ŒdatingLabelsä¸­ datingDataMat, datingLabels = file2matrix(filename) # å–æ‰€æœ‰æ•°æ®çš„10% hoRatioè¶Šå°ï¼Œé”™è¯¯ç‡è¶Šä½ hoRatio = 0.10 # æ•°æ®å½’ä¸€åŒ–ï¼Œè¿”å›å½’ä¸€åŒ–æ•°æ®ç»“æœï¼Œæ•°æ®èŒƒå›´ï¼Œæœ€å°å€¼ normMat, ranges, minVals = autoNorm(datingDataMat) # è·å–normMatçš„è¡Œæ•° m = normMat.shape[0] # 10%çš„æµ‹è¯•æ•°æ®çš„ä¸ªæ•° numTestVecs = int(m * hoRatio) # åˆ†ç±»é”™è¯¯è®¡æ•° errorCount = 0.0 for i in range(numTestVecs): # å‰numTestVecsä¸ªæ•°æ®ä½œä¸ºæµ‹è¯•é›†ï¼Œåm-numTestVecsä¸ªæ•°æ®ä½œä¸ºè®­ç»ƒé›† # ké€‰æ‹©labelæ•°+1ï¼ˆç»“æœæ¯”è¾ƒå¥½ï¼‰ classifierResult = classify0(normMat[i,:], normMat[numTestVecs:m,:],\\ datingLabels[numTestVecs:m], 4) print(\"åˆ†ç±»ç»“æœ:%d\\tçœŸå®ç±»åˆ«:%d\" % (classifierResult, datingLabels[i])) if classifierResult != datingLabels[i]: errorCount += 1.0 print(\"é”™è¯¯ç‡:%f%%\" % (errorCount/float(numTestVecs)*100)) ä½¿ç”¨ç®—æ³•123456789101112131415161718192021222324252627282930313233\"\"\"å‡½æ•°è¯´æ˜ï¼šé€šè¿‡è¾“å…¥ä¸€ä¸ªäººçš„ä¸‰å›´ç‰¹å¾ï¼Œè¿›è¡Œåˆ†ç±»è¾“å‡ºParameters: None Returns: None Modify: 2018-07-14\"\"\"def classifyPerson(): # è¾“å‡ºç»“æœ resultList = ['è®¨åŒ', 'æœ‰äº›å–œæ¬¢', 'éå¸¸å–œæ¬¢'] # ä¸‰ç»´ç‰¹å¾ç”¨æˆ·è¾“å…¥ percentTats = float(input(\"ç©è§†é¢‘æ¸¸æˆæ‰€æ¶ˆè€—æ—¶é—´ç™¾åˆ†æ¯”ï¼š\")) ffMiles = float(input(\"æ¯å¹´è·å¾—çš„é£è¡Œå¸¸å®¢é‡Œç¨‹æ•°ï¼š\")) iceCream = float(input(\"æ¯å‘¨æ¶ˆè´¹çš„å†°æ·‡æ·‹å…¬å‡æ•°ï¼š\")) # æ‰“å¼€çš„æ–‡ä»¶å filename = \"datingTestSet.txt\" # æ‰“å¼€å¹¶å¤„ç†æ•°æ® datingDataMat, datingLabels = file2matrix(filename) # è®­ç»ƒé›†å½’ä¸€åŒ– normMat, ranges, minVals = autoNorm(datingDataMat) # ç”ŸæˆNumPyæ•°ç»„ï¼Œæµ‹è¯•é›† inArr = np.array([percentTats, ffMiles, iceCream]) # æµ‹è¯•é›†å½’ä¸€åŒ– norminArr = (inArr - minVals) / ranges # è¿”å›åˆ†ç±»ç»“æœ classifierResult = classify0(norminArr, normMat, datingLabels, 4) # æ‰“å°ç»“æœ print(\"ä½ å¯èƒ½%sè¿™ä¸ªäºº\" % (resultList[classifierResult - 1]))","categories":[{"name":"Machine_Learning","slug":"Machine-Learning","permalink":"https://shyshy903.github.io/categories/Machine-Learning/"}],"tags":[{"name":"ML","slug":"ML","permalink":"https://shyshy903.github.io/tags/ML/"}]},{"title":"ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ã€Šè¥¿ç“œä¹¦ã€‹ç¬”è®°ï¼ˆä¸€ï¼‰","slug":"Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°(1)","date":"2019-11-26T07:00:00.000Z","updated":"2020-02-11T08:48:55.543Z","comments":true,"path":"2019/11/26/Machine_Learning/æœºå™¨å­¦ä¹ ç¬”è®°(1)/","link":"","permalink":"https://shyshy903.github.io/2019/11/26/Machine_Learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(1)/","excerpt":"","text":"ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ã€Šè¥¿ç“œä¹¦ã€‹ç¬”è®°ï¼ˆä¸€ï¼‰æœºå™¨å­¦ä¹ çš„ç›¸å…³æ¦‚å¿µæˆ‘ä»¬è¦åšçš„å…¶å®æ˜¯è®©æœºå™¨ä»–æœ‰è‡ªå·±å­¦ä¹ çš„èƒ½åŠ›ï¼Œä¹Ÿå°±æˆ‘ä»¬è¦åšçš„åº”è¯¥machine learningçš„æ–¹å‘ã€‚è®²çš„æ¯”è¾ƒæ‹ŸäººåŒ–ä¸€ç‚¹ï¼Œæ‰€è°“machine learningçš„æ–¹å‘ï¼Œå°±æ˜¯ä½ å°±å†™æ®µç¨‹åºï¼Œç„¶åè®©æœºå™¨äººå˜å¾—äº†å¾ˆèªæ˜ï¼Œä»–å°±èƒ½å¤Ÿæœ‰å­¦ä¹ çš„èƒ½åŠ›ã€‚æ¥ä¸‹æ¥ï¼Œä½ å°±åƒæ•™ä¸€ä¸ªå©´å„¿ã€æ•™ä¸€ä¸ªå°å­©ä¸€æ ·çš„æ•™ä»–ï¼Œä½ å¹¶ä¸æ˜¯å†™ç¨‹åºè®©ä»–åšåˆ°è¿™ä»¶äº‹ï¼Œä½ æ˜¯å†™ç¨‹åºè®©å®ƒå…·æœ‰å­¦ä¹ çš„èƒ½åŠ›ã€‚ç„¶åæ¥ä¸‹æ¥ï¼Œä½ å°±å¯ä»¥ç”¨åƒæ•™å°å­©çš„æ–¹å¼å‘Šè¯‰å®ƒã€‚å‡è®¾ä½ è¦å«ä»–å­¦ä¼šåšè¯­éŸ³è¾¨è¯†ï¼Œä½ å°±å‘Šè¯‰å®ƒè¿™æ®µå£°éŸ³æ˜¯â€œHiâ€ï¼Œè¿™æ®µå£°éŸ³å°±æ˜¯â€œHow are youâ€ï¼Œè¿™æ®µå£°éŸ³æ˜¯â€œGood byeâ€ã€‚å¸Œæœ›æ¥ä¸‹æ¥å®ƒå°±å­¦ä¼šäº†ï¼Œä½ ç»™å®ƒä¸€ä¸ªæ–°çš„å£°éŸ³ï¼Œå®ƒå°±å¯ä»¥å¸®ä½ äº§ç”Ÿè¯­éŸ³è¾¨è¯†çš„ç»“æœã€‚ç”¨æ•°å­¦çš„è¯­ä¹‰å»ç†è§£ï¼Œæœºå™¨éœ€è¦ä¸€ä¸ªå‡½æ•°å¯¹è¾“å…¥è¿›è¡Œè‡ªä¸»åˆ¤æ–­è¾“å‡ºï¼Œä»¥å®Œæˆå›å½’é¢„æµ‹ã€åˆ†ç±»ã€èšç±»ç­‰å®é™…ä»»åŠ¡ ç›‘ç£å­¦ä¹ ä»ç»™å®šçš„è®­ç»ƒæ•°æ®é›†ä¸­å­¦ä¹ å‡ºä¸€ä¸ªå‡½æ•°ï¼Œå½“æ–°çš„æ•°æ®åˆ°æ¥æ—¶ï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªå‡½æ•°é¢„æµ‹ç»“æœã€‚ç›‘ç£å­¦ä¹ çš„è®­ç»ƒé›†è¦æ±‚æ˜¯åŒ…æ‹¬è¾“å…¥å’Œè¾“å‡ºï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ç‰¹å¾å’Œç›®æ ‡ã€‚è®­ç»ƒé›†ä¸­çš„ç›®æ ‡æ˜¯ç”±äººæ ‡æ³¨çš„ã€‚å¸¸è§çš„ç›‘ç£å­¦ä¹ ç®—æ³•åŒ…æ‹¬å›å½’åˆ†æå’Œç»Ÿè®¡åˆ†ç±»ã€‚ æ— ç›‘ç£å­¦ä¹ ä¸ç›‘ç£å­¦ä¹ ç›¸æ¯”ï¼Œè®­ç»ƒé›†æ²¡æœ‰äººä¸ºæ ‡æ³¨çš„ç»“æœã€‚å¸¸è§çš„æ— ç›‘ç£å­¦ä¹ ç®—æ³•æœ‰ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰ã€èšç±» åŠç›‘ç£å­¦ä¹ ä»‹äºç›‘ç£å­¦ä¹ ä¸æ— ç›‘ç£å­¦ä¹ ä¹‹é—´ å¢å¼ºå­¦ä¹ æœºå™¨ä¸ºäº†è¾¾æˆç›®æ ‡ï¼Œéšç€ç¯å¢ƒçš„å˜åŠ¨ï¼Œè€Œé€æ­¥è°ƒæ•´å…¶è¡Œä¸ºï¼Œå¹¶è¯„ä¼°æ¯ä¸€ä¸ªè¡ŒåŠ¨ä¹‹åæ‰€åˆ°çš„å›é¦ˆæ˜¯æ­£å‘çš„æˆ–è´Ÿå‘çš„ å¼€å‘æœºå™¨å­¦ä¹ åº”ç”¨ç¨‹åºçš„ä¸»è¦æ­¥éª¤ æ”¶é›†æ•°æ® å‡†å¤‡è¾“å…¥æ•°æ®ï¼ˆPythonè¯­è¨€ï¼‰ åˆ†æè¾“å…¥æ•°æ®ï¼ˆæ•°æ®å¤„ç†ã€é™ç»´ç­‰æ–¹æ³•ï¼‰ è®­ç»ƒç®—æ³•ï¼ˆæ— ç›‘ç£å­¦ä¹ ä¸éœ€è¦è®­ç»ƒç®—æ³•ï¼‰ æµ‹è¯•ç®—æ³• æ‰§è¡Œç®—æ³• æœºå™¨å­¦ä¹ çš„åŸºæœ¬æœ¯è¯­è¿™ç»„è®°å½•çš„é›†åˆç§°ä¸ºä¸€ä¸ª â€œæ•°æ®é›†â€ (data set)å…¶ä¸­æ¯æ¡è®°å½•æ˜¯å…³äºä¸€ä¸ªäº‹ä»¶æˆ–å¯¹è±¡(è¿™é‡Œæ˜¯ä¸€ä¸ªè¥¿ç“œ)çš„æè¿°ï¼Œç§°ä¸ºä¸€ä¸ª â€œç¤ºä¾‹â€ (instance) æˆ–â€æ ·æœ¬â€ (sample)åæ˜ äº‹ä»¶æˆ–å¯¹è±¡åœ¨æŸæ–¹é¢çš„è¡¨ç°æˆ–æ€§è´¨çš„äº‹é¡¹ï¼Œä¾‹å¦‚â€è‰²æ³½â€ â€œæ ¹è’‚â€ â€œæ•²å£°â€ï¼Œç§°ä¸ºâ€)å‰¯ä¸»â€ (attribute) æˆ– â€œç‰¹å¾â€(feature)å±æ€§ä¸Šçš„å–å€¼ï¼Œä¾‹å¦‚â€é’ç»¿â€ â€œä¹Œé»‘â€ï¼Œç§°ä¸ºâ€)å‰¯ä¸»å€¼â€ (attribute va1ue)å±æ€§å¼ æˆçš„ç©ºé—´ç§°ä¸ºâ€å±æ€§ç©ºé—´â€ (attribute space)â€æ ·æœ¬ç©ºé—´â€ (samp1e space)æˆ–â€è¾“å…¥ç©ºé—´â€ä¾‹å¦‚æˆ‘ä»¬æŠŠâ€è‰²æ³½â€ â€œæ ¹è’‚â€ â€œæ•²å£°â€ä½œä¸ºä¸‰ä¸ªåæ ‡è½´ï¼Œåˆ™å®ƒä»¬å¼ æˆä¸€ä¸ªç”¨äºæè¿°è¥¿ç“œçš„ä¸‰ç»´ç©ºé—´ï¼Œæ¯ä¸ªè¥¿ç“œéƒ½å¯åœ¨è¿™ä¸ªç©ºé—´ä¸­æ‰¾åˆ°è‡ªå·±çš„åæ ‡ä½ç½®.ç”±äºç©ºé—´ä¸­çš„æ¯ä¸ªç‚¹å¯¹åº”ä¸€ä¸ªåæ ‡å‘é‡ï¼Œå› æ­¤æˆ‘ä»¬ä¹ŸæŠŠâ€¦ä¸ªç¤ºä¾‹ç§°ä¸ºä¸€ä¸ª â€œç‰¹å¾å‘é‡â€ (feature vector).eg:$D = {x_1,x_2,â€¦.x_m} $ æ ·æœ¬åŒ…å«mä¸ªå®ä¾‹$x_i = {x_{i1}â€¦..x_{id}}$ æ˜¯dç»´æ ·æœ¬ç©ºé—´çš„ä¸€ä¸ªå‘é‡((è‰²æ³½:é’ç»¿;æ ¹è’‚äºŒèœ·ç¼©; æ•²å£°=æµŠå“)ï¼Œå¥½ç“œ)â€ .è¿™é‡Œå…³äºç¤ºä¾‹ç»“æœçš„ä¿¡æ¯ï¼Œä¾‹å¦‚â€å¥½ç“œâ€ï¼Œç§°ä¸º â€œæ ‡è®°â€ (labe1); æ‹¥æœ‰äº†æ ‡è®°ä¿¡æ¯çš„ç¤ºä¾‹ï¼Œåˆ™ç§°ä¸ºâ€æ ·ä¾‹â€ (examp1e). å‡è®¾ç©ºé—´å½’çº³æ˜¯ä»ç‰¹æ®Šåˆ°ä¸€èˆ¬çš„â€œæ³›åŒ–â€è¿‡ç¨‹ï¼Œæ¼”ç»æ˜¯ä»ä¸€èˆ¬åˆ°ç‰¹æ®Šçš„â€œç‰¹åŒ–â€è¿‡ç¨‹ã€‚å­¦ä¹ çš„ç›®çš„æ˜¯â€œæ³›åŒ–â€ï¼Œå³é€šè¿‡å¯¹è®­ç»ƒé›†ä¸­ç“œçš„å­¦ä¹ å·²è·å¾—å¯¹æ²¡è§è¿‡çš„ç“œè¿›è¡Œåˆ¤æ–­çš„èƒ½åŠ›ã€‚å­¦ä¹ è¿‡ç¨‹çœ‹ä½œä¸€ä¸ªåœ¨æ‰€ä»¥å‡è®¾ç»„æˆçš„ç©ºé—´ä¸­è¿›è¡Œæœç´¢çš„è¿‡ç¨‹ï¼Œæœç´¢ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸è®­ç»ƒé›†â€œåŒ¹é…â€çš„å‡è®¾ï¼Œå³èƒ½å¤Ÿå°†è®­ç»ƒé›†ä¸­çš„ç“œåˆ¤æ–­æ­£ç¡®çš„å‡è®¾ã€‚å‡è®¾çš„è¡¨ç¤ºä¸€æ—¦ç¡®å®ï¼Œå‡è®¾ç©ºé—´åŠå…¶è§„æ¨¡å¤§å°å°±å´ç¡®å®šäº†ã€‚ æˆ‘ä»¬ç”¨ m è¡¨ç¤ºè¿™ ä¸ªå‡è®¾.è¿™æ ·ï¼Œè‹¥â€è‰²æ³½â€ â€œæ ¹è’‚â€ â€œæ•²å£°â€åˆ†åˆ«æœ‰3ã€ 2ã€ 2 ç§å¯èƒ½å–å€¼ï¼Œåˆ™æˆ‘ ä»¬é¢ä¸´çš„å‡è®¾ç©ºé—´è§„æ¨¡å¤§å°ä¸º 4 x 3 x 3 + 1 = 37. å½’çº³åå¥½ç°åœ¨æœ‰ä¸‰ä¸ªä¸è®­ç»ƒé›†ä¸€è‡´çš„å‡è®¾ï¼Œä½†ä¸ä»–ä»¬å¯¹åº”çš„æ¨¡å‹åœ¨é¢ä¸´æ–°æ ·æœ¬çš„æ—¶å€™ï¼Œå´ä¼šäº§ç”Ÿä¸åŒçš„è¾“å‡ºã€‚æ ¹æ®ä»…æœ‰çš„è®­ç»ƒæ ·æœ¬æ— æ³•åˆ¤æ–­ä¸‰ä¸ªå‡è®¾ä¸­å“ªä¸ªâ€œæ›´å¥½â€ã€‚å¯¹äºä¸€ä¸ªå…·ä½“çš„å­¦ä¹ ç®—æ³•è€Œè¨€ï¼Œå®ƒå¿…é¡»è¦äº§ç”Ÿä¸€ä¸ªæ¨¡å‹ï¼Œè¿™æ—¶ï¼Œå­¦ä¹ ç®—æ³•æœ¬èº«çš„â€œåå¥½â€èµ·åˆ°å…³é”®å·¦å³ã€‚ä¾‹å¦‚ï¼Œè‹¥ç®—æ³•å–œæ¬¢â€œå°½å¯èƒ½ç‰¹æ®Šâ€çš„æ¨¡å‹ï¼Œåˆ™ä¼šæœ‰ç›¸åº”çš„æ¨¡å‹äº§ç”Ÿã€‚æœºå™¨å­¦ä¹ ç®—æ³•åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å¯¹æŸç§ç±»å‹å‡è®¾çš„åå¥½ï¼Œç§°ä¸ºâ€œå½’çº³åå¥½â€ã€‚ä»»ä½•ä¸€ä¸ªæœ‰æ•ˆçš„æœºå™¨å­¦ä¹ ç®—æ³•å¿…æœ‰å…¶å½’çº³åå¥½ï¼Œå¦åˆ™äº§ç”Ÿçš„æ¨¡å‹æ¯æ¬¡åœ¨è¿›è¡Œé¢„æµ‹æ—¶éšæœºæŠ½é€‰è®­ç»ƒé›†ä¸Šçš„ç­‰æ•ˆå‡è®¾ï¼Œå­¦å¾—æ¨¡å‹ç»“æœä¸ä¸€ï¼Œæ˜¾ç„¶æ²¡æœ‰æ„ä¹‰ã€‚ å½’çº³åå¥½å¯çœ‹ä½œå­¦ä¹ ç®—æ³•è‡ªèº«åœ¨ä¸€ä¸ªå¯èƒ½å¾ˆåºå¤§çš„å‡è®¾ç©ºé—´ä¸­å¯¹å‡è®¾è¿› è¡Œé€‰æ‹©çš„å¯å‘å¼æˆ–â€ä»·å€¼è§‚â€é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€èˆ¬æ€§çš„åŸåˆ™æ¥å¼•å¯¼ç®—æ³•ç¡®ç«‹ â€œæ­£ç¡®çš„â€åå¥½å‘¢? â€œå¥¥å¡å§†å‰ƒåˆ€â€ (Occamâ€™s razor)æ˜¯ä¸€ç§å¸¸ç”¨çš„ã€è‡ªç„¶ç§‘å­¦ ç ”ç©¶ä¸­æœ€åŸºæœ¬çš„åŸåˆ™ï¼Œå³â€è‹¥æœ‰å¤šä¸ªå‡è®¾ä¸è§‚å¯Ÿä¸€è‡´ï¼Œåˆ™é€‰æœ€ç®€å•çš„é‚£ä¸ªâ€å¦‚ æœé‡‡ç”¨è¿™ä¸ªåŸåˆ™ï¼Œå¹¶ä¸”å‡è®¾æˆ‘ä»¬è®¤ä¸ºâ€æ›´å¹³æ»‘â€æ„å‘³ç€â€æ›´ç®€å•â€ (ä¾‹å¦‚æ›²çº¿ A æ›´æ˜“äºæè¿°ï¼Œå…¶æ–¹ç¨‹å¼æ˜¯ $y = x2+ 6x + 1$ ï¼Œè€Œæ›²çº¿ B åˆ™è¦å¤æ‚å¾—å¤š)ï¼Œåˆ™åœ¨ å›¾1.3 ä¸­æˆ‘ä»¬ä¼šè‡ªç„¶åœ°åå¥½â€å¹³æ»‘â€çš„æ›²çº¿ A. ç”Ÿæˆå¼æ¨¡å‹ä¸åˆ¤åˆ«å¼æ¨¡å‹ äº§ç”Ÿå¼æ¨¡å‹ä»ç»Ÿè®¡çš„è§’åº¦è¡¨ç¤ºæ•°æ®çš„åˆ†å¸ƒæƒ…å†µï¼Œèƒ½å¤Ÿåæ˜ åŒç±»æ•°æ®æœ¬èº«çš„ç›¸ä¼¼åº¦ï¼Œä¸å…³å¿ƒåˆ¤åˆ«è¾¹ç•Œã€‚ åˆ¤åˆ«å¼æ¨¡å‹å¯»æ‰¾ä¸åŒç±»åˆ«ä¹‹é—´çš„æœ€ä¼˜åˆ†ç±»é¢ï¼Œåæ˜ çš„æ˜¯å¼‚ç±»æ•°æ®ä¹‹é—´çš„å·®å¼‚ã€‚ åŒºåˆ«ï¼š å‡è®¾æœ‰æ ·æœ¬è¾“å…¥å€¼ï¼ˆæˆ–è€…è§‚å¯Ÿå€¼ï¼‰xï¼Œç±»åˆ«æ ‡ç­¾ï¼ˆæˆ–è€…è¾“å‡ºå€¼ï¼‰y åˆ¤åˆ«å¼æ¨¡å‹è¯„ä¼°å¯¹è±¡æ˜¯æœ€å¤§åŒ–æ¡ä»¶æ¦‚ç‡p(y|x)å¹¶ç›´æ¥å¯¹å…¶å»ºæ¨¡ï¼Œ ç”Ÿæˆå¼æ¨¡å‹è¯„ä¼°å¯¹è±¡æ˜¯æœ€å¤§åŒ–è”åˆæ¦‚ç‡p(x,y)å¹¶å¯¹å…¶å»ºæ¨¡ã€‚ å…¶å®ä¸¤è€…çš„è¯„ä¼°ç›®æ ‡éƒ½æ˜¯è¦å¾—åˆ°æœ€ç»ˆçš„ç±»åˆ«æ ‡ç­¾Yï¼Œ è€ŒY=argmax p(y|x)ï¼Œä¸åŒçš„æ˜¯åˆ¤åˆ«å¼æ¨¡å‹ç›´æ¥é€šè¿‡è§£åœ¨æ»¡è¶³è®­ç»ƒæ ·æœ¬åˆ†å¸ƒä¸‹çš„æœ€ä¼˜åŒ–é—®é¢˜å¾—åˆ°æ¨¡å‹å‚æ•°ï¼Œä¸»è¦ç”¨åˆ°æ‹‰æ ¼æœ—æ—¥ä¹˜ç®—æ³•ã€æ¢¯åº¦ä¸‹é™æ³•ï¼Œå¸¸è§çš„åˆ¤åˆ«å¼æ¨¡å‹å¦‚æœ€å¤§ç†µæ¨¡å‹ã€CRFã€LRã€SVMç­‰ï¼› è€Œç”Ÿæˆå¼æ¨¡å‹å…ˆç»è¿‡è´å¶æ–¯è½¬æ¢æˆY = argmax p(y|x) = argmax p(x|y)*p(y)ï¼Œç„¶ååˆ†åˆ«å­¦ä¹ p(y)å’Œp(x|y)çš„æ¦‚ç‡åˆ†å¸ƒï¼Œä¸»è¦é€šè¿‡æå¤§ä¼¼ç„¶ä¼°è®¡çš„æ–¹æ³•å­¦ä¹ å‚æ•°ï¼Œå¦‚NGramã€HMMã€Naive Bayesã€‚ ä¼˜ç¼ºç‚¹ï¼š ç”Ÿæˆæ¨¡å‹ï¼š ä¼˜ç‚¹ï¼š1ï¼‰å®é™…ä¸Šå¸¦çš„ä¿¡æ¯è¦æ¯”åˆ¤åˆ«æ¨¡å‹ä¸°å¯Œï¼Œç ”ç©¶å•ç±»é—®é¢˜æ¯”åˆ¤åˆ«æ¨¡å‹çµæ´»æ€§å¼º2ï¼‰æ¨¡å‹å¯ä»¥é€šè¿‡å¢é‡å­¦ä¹ å¾—åˆ°3ï¼‰ç”Ÿæˆæ¨¡å‹èƒ½å¤Ÿåº”ä»˜å­˜åœ¨éšå˜é‡çš„æƒ…å†µï¼Œæ¯”å¦‚æ··åˆé«˜æ–¯æ¨¡å‹å°±æ˜¯å«æœ‰éšå˜é‡çš„ç”Ÿæˆæ–¹æ³•ã€‚ ç¼ºç‚¹ï¼š1ï¼‰å­¦ä¹ è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ã€‚2ï¼‰å®è·µä¸­å¤šæ•°æƒ…å†µä¸‹åˆ¤åˆ«æ¨¡å‹æ•ˆæœæ›´å¥½ã€‚ åˆ¤åˆ«æ¨¡å‹ï¼š ä¼˜ç‚¹ï¼š1ï¼‰åˆ†ç±»è¾¹ç•Œæ›´çµæ´»ï¼Œæ¯”ä½¿ç”¨çº¯æ¦‚ç‡æ–¹æ³•æˆ–ç”Ÿäº§æ¨¡å‹å¾—åˆ°çš„æ›´é«˜çº§.2ï¼‰å‡†ç¡®ç‡å¾€å¾€è¾ƒç”Ÿæˆæ¨¡å‹é«˜ã€‚3ï¼‰ä¸éœ€è¦æ±‚è§£ç±»åˆ«æ¡ä»¶æ¦‚ç‡ï¼Œæ‰€ä»¥å…è®¸æˆ‘ä»¬å¯¹è¾“å…¥è¿›è¡ŒæŠ½è±¡ï¼ˆæ¯”å¦‚é™ç»´ã€æ„é€ ç­‰ï¼‰ï¼Œä»è€Œèƒ½å¤Ÿç®€åŒ–å­¦ä¹ é—®é¢˜ã€‚ ç¼ºç‚¹ï¼š1ï¼‰ä¸èƒ½åæ˜ è®­ç»ƒæ•°æ®æœ¬èº«çš„ç‰¹æ€§ã€‚","categories":[{"name":"Machine_Learning","slug":"Machine-Learning","permalink":"https://shyshy903.github.io/categories/Machine-Learning/"}],"tags":[{"name":"ML","slug":"ML","permalink":"https://shyshy903.github.io/tags/ML/"}]},{"title":"JavaåŸºç¡€ï¼ˆ5ï¼‰","slug":"java/shyjava(5)","date":"2019-11-25T16:00:00.000Z","updated":"2019-11-25T16:00:00.000Z","comments":true,"path":"2019/11/26/java/shyjava(5)/","link":"","permalink":"https://shyshy903.github.io/2019/11/26/java/shyjava(5)/","excerpt":"","text":"æ–¹æ³•æ–¹æ³•çš„å®šä¹‰12345678910111213141516171819202122MethodDeclaration: MethodHeader MethodBodyMethodHeader: Modifiersopt ResultType Identifier(FormalParameterListopt) ThrowsoptModifiers: public protected private static abstract final synchronized native strictfpResultType: Type voidMethodBody: &#123; statements &#125;public static int max(int num1, int num2) &#123; int result = 0; if(num1 &gt; num2) result = num1; else result = num2; return result;&#125; æ–¹æ³•ç­¾å(Method Signature)æŒ‡æ–¹æ³•åç§°ã€å‚æ•°ç±»å‹ã€å‚æ•°æ•°é‡å’Œè¿”å›ç±»å‹ã€‚ä¸€ä¸ªç±»ä¸­ä¸èƒ½åŒ…å«ç­¾åç›¸åŒæˆ–ä»…è¿”å›ç±»å‹ä¸åŒçš„å¤šä¸ªæ–¹æ³•ã€‚ æ–¹æ³•å¤´ä¸­å£°æ˜çš„å˜é‡ç§°ä¸ºå½¢å‚(formal parameter)ã€‚å½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œå¯å‘å½¢å‚ä¼ é€’ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼ç§°ä¸ºå®å‚(actual parameter / argument)ã€‚å½¢å‚å¯ä»¥ä½¿ç”¨finalè¿›è¡Œä¿®é¥°ï¼Œè¡¨ç¤ºæ–¹æ³•å†…éƒ¨ä¸å…è®¸ä¿®æ”¹è¯¥å‚æ•°ã€‚ å½¢å‚ä¸å…è®¸æœ‰é»˜è®¤å€¼ï¼Œæœ€åä¸€ä¸ªå¯ä¸ºå˜é•¿å‚æ•°ï¼ˆå¯ç”¨â€¦æˆ–æ•°ç»„å®šä¹‰ï¼Œå‚è§ç¬¬7ç« æ•°ç»„ï¼‰ã€‚æ–¹æ³•ä¸å…è®¸staticå±€éƒ¨å˜é‡ã€‚ æ–¹æ³•å¯ä»¥æœ‰ä¸€ä¸ªè¿”å›å€¼(return value)ã€‚å¦‚æœæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼ç±»å‹ä¸ºvoidï¼Œä½†æ„é€ å‡½æ•°ç¡®å®æ²¡æœ‰è¿”å›å€¼ã€‚ æ–¹æ³•çš„è°ƒç”¨ å£°æ˜æ–¹æ³•åªç»™å‡ºæ–¹æ³•çš„å®šä¹‰ã€‚è¦æ‰§è¡Œæ–¹æ³•ï¼Œå¿…é¡»è°ƒç”¨(call/invoke)æ–¹æ³•ã€‚ å¦‚æœæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œé€šå¸¸å°†æ–¹æ³•è°ƒç”¨ä½œä¸ºä¸€ä¸ªå€¼æ¥å¤„ç†ï¼ˆå¯æ”¾åœ¨ä¸€ä¸ªè¡¨è¾¾å¼é‡Œï¼‰ã€‚1234int large = max(3, 4) * 2; System.out.println(max(3,4));å¦‚æœæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œæ–¹æ³•è°ƒç”¨å¿…é¡»æ˜¯ä¸€æ¡è¯­å¥ã€‚System.out.println(â€œWelcome to Java!â€); å½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œç¨‹åºæ§åˆ¶æƒè½¬ç§»è‡³è¢«è°ƒç”¨çš„æ–¹æ³•ã€‚å½“æ‰§è¡Œreturnè¯­å¥æˆ–åˆ°è¾¾æ–¹æ³•ç»“å°¾æ—¶ï¼Œç¨‹åºæ§åˆ¶æƒè½¬ç§»è‡³è°ƒç”¨è€…ã€‚ è°ƒç”¨å½“å‰ç±»ä¸­çš„é™æ€æ–¹æ³•ï¼šå¯ç›´æ¥ç”¨â€œæ–¹æ³•åâ€ï¼Œä¹Ÿå¯ç”¨â€ç±»å.æ–¹æ³•åâ€œï¼›å®ä¾‹å‡½æ•°ä¸­ä¹Ÿå¯ç”¨â€ æ–¹æ³•åâ€œæˆ–â€this.æ–¹æ³•åâ€œè°ƒç”¨ã€‚ è°ƒç”¨å…¶å®ƒç±»ä¸­çš„é™æ€æ–¹æ³•ï¼šå¿…é¡»ç”¨â€ç±»å.æ–¹æ³•åâ€œæˆ–â€å¯¹è±¡.æ–¹æ³•åâ€œè°ƒç”¨ï¼›å­ç±»å®ä¾‹å‡½æ•°ä¹Ÿå¯ç”¨â€ super.æ–¹æ³•åâ€œè°ƒç”¨çˆ¶ç±»æ–¹æ³•ã€‚ æ‰€æœ‰é™æ€æ–¹æ³•æå€¡ç”¨â€ç±»å.æ–¹æ³•åâ€œè°ƒç”¨ã€‚å¦‚Math.sin(3.0) 1234567891011121314public class TestMax &#123; public static void main(String[] args) &#123; int i = 5; int j = 2; int k = max(i, j); System.out.println(\"The maximum between \" + i + \" and \" + j + \" is \" + k); &#125; public static int max(int num1, int num2) &#123; int result; result = (num1 &gt; num2) ?num1:num2; return result ; &#125;&#125; è°ƒç”¨ç¨‹åºæ ˆæ¯å½“è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œç³»ç»Ÿå°†å‚æ•°ã€å±€éƒ¨å˜é‡å­˜å‚¨åœ¨ä¸€ä¸ªå†…å­˜åŒºåŸŸä¸­ï¼Œè¿™ä¸ªå†…å­˜åŒºåŸŸç§°ä¸ºè°ƒç”¨å †æ ˆ(call stack)ã€‚å½“æ–¹æ³•ç»“æŸè¿”å›åˆ°è°ƒç”¨è€…æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨é‡Šæ”¾ç›¸åº”çš„è°ƒç”¨æ ˆã€‚ æ–¹æ³•çš„å‚æ•°ä¼ é€’ å¦‚æœæ–¹æ³•å£°æ˜ä¸­åŒ…å«å½¢å‚ï¼Œè°ƒç”¨æ–¹æ³•æ—¶ï¼Œå¿…é¡»æä¾›å®å‚ã€‚å®å‚çš„ç±»å‹å¿…é¡»ä¸å½¢å‚çš„ç±»å‹å…¼å®¹ï¼šå¦‚çˆ¶ç±»å½¢å‚å¯ç”¨å­ç±»å®å‚ã€‚å®å‚é¡ºåºå¿…é¡»ä¸å½¢å‚çš„é¡ºåºä¸€è‡´ã€‚ 1234567public static void nPrintln(String message, int n) &#123; for (int i = 0; i &lt; n; i++) System.out.println(message);&#125;nPrintln(â€œHelloâ€, 3); //æ­£ç¡®nPrintln(3, â€œHelloâ€); //é”™è¯¯ å½“è°ƒç”¨æ–¹æ³•æ—¶ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„å®å‚å€¼çš„å‰¯æœ¬è¢«ä¼ é€’ç»™æ–¹æ³•çš„å½¢å‚ã€‚æ–¹æ³•å†…éƒ¨å¯¹å½¢å‚çš„ä¿®æ”¹ä¸å½±å“å®å‚å€¼ã€‚(Call by value)å¯¹è±¡ç±»å‹çš„å‚æ•°æ˜¯å¼•ç”¨è°ƒç”¨ï¼ˆCall by referenceï¼‰ 12345678910111213141516171819202122public class TestPassByValue &#123; public static void main(String[] args) &#123; int num1 = 1; int num2 = 2; System.out.println(\"è°ƒç”¨swapæ–¹æ³•ä¹‹å‰ï¼šnum1 = \" + num1 + \"ï¼Œnum2 = \" + num2); swap(num1, num2); System.out.println(\"è°ƒç”¨swapæ–¹æ³•ä¹‹åï¼šnum1 = \" + num1 + \"ï¼Œnum2 = \" + num2); &#125; public static void swap(int n1, int n2) &#123; System.out.println(\"\\tåœ¨swapæ–¹æ³•å†…ï¼š\"); System.out.println(\"\\t\\täº¤æ¢ä¹‹å‰ï¼šn1 = \" + n1 + \"ï¼Œn2 = \" + n2); int temp = n1; n1 = n2; n2 = temp; System.out.println(\"\\t\\täº¤æ¢ä¹‹åï¼šn1 = \" + n1 + \"ï¼Œn2 = \" + n2); &#125;&#125; æ–¹æ³•çš„é‡è½½ æ–¹æ³•é‡è½½(overloading)æ˜¯æŒ‡æ–¹æ³•åç§°ç›¸åŒï¼Œä½†æ–¹æ³•ç­¾åä¸åŒçš„æ–¹æ³•ï¼Œä»…è¿”å›ç±»å‹ä¸åŒçš„æ–¹æ³•ä¸å¯é‡è½½ã€‚ä¸€ä¸ªç±»ä¸­å¯ä»¥åŒ…å«å¤šä¸ªé‡è½½çš„æ–¹æ³•ã€‚ å½“è°ƒç”¨æ–¹æ³•æ—¶ï¼ŒJavaç¼–è¯‘å™¨ä¼šæ ¹æ®å®å‚çš„ä¸ªæ•°å’Œç±»å‹å¯»æ‰¾æœ€åˆé€‚çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚ è°ƒç”¨æ—¶åŒ¹é…æˆåŠŸçš„æ–¹æ³•å¯èƒ½å¤šäºä¸€ä¸ªï¼Œåˆ™ä¼šäº§ç”Ÿç¼–è¯‘äºŒä¹‰æ€§é”™è¯¯ï¼Œç§°ä¸ºæ­§ä¹‰è°ƒç”¨(ambiguous invocationï¼‰é‡è½½ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839public class TestMethodOverloading &#123; /** Return the max between two int values */ public static int max(int num1, int num2) &#123; public class TestMethodOverloading &#123; /** Return the max between two int values */ public static int max(int num1, int num2) &#123; return (num1 &gt; num2) ï¼Ÿnum1:num2; &#125; /** Return the max between two double values */ public static double max(double num1, double num2) &#123; return (num1 &gt; num2) ï¼Ÿnum1:num2; &#125; /** Return the max among three double values */ public static double max(double num1, double num2, double num3) &#123; return max(max(num1, num2), num3); &#125; &#125; &#125;&#125;public class TestMethodOverloading &#123; /** Main method */ public static void main(String[ ] args) &#123; // Invoke the max method with int parameters System.out.println(\"The maximum between 3 and 4 is \" + max(3, 4)); // Invoke the max method with the double parameters System.out.println(\"The maximum between 3.0 and 5.4 is \" + max(3.0, 5.4)); // Invoke the max method with three double parameters System.out.println(\"The maximum between 3.0, 5.4, and 10.14 is \" + max(3.0, 5.4, 10.14)); &#125; &#125; æœ‰æ­§ä¹‰çš„é‡è½½123456789101112131415161718public class AmbiguousOverloading &#123; public static void main(String[ ] args) &#123; //System.out.println(max(1, 2)); //è¯¥è°ƒç”¨äº§ç”Ÿæ­§ä¹‰ &#125; //ä»¥ä¸‹ä»»ä¸€å‡½æ•°çš„å‚æ•°éƒ½ç›¸å®¹ï¼ˆéƒ½èƒ½è‡ªåŠ¨è½¬æ¢ï¼‰ï¼Œç¼–è¯‘æ— æ³•ç¡®å®šç”¨å“ªä¸ªå‡½æ•° public static double max(int num1, double num2) &#123; if (num1 &gt; num2) return num1; else return num2; &#125; public static double max(double num1, int num2) &#123; if (num1 &gt; num2) return num1; else return num2; &#125;&#125; å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæ–¹æ³•å†…éƒ¨å£°æ˜çš„å˜é‡ç§°ä¸ºå±€éƒ¨å˜é‡(local variable)ã€‚å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸ(scope)æŒ‡ç¨‹åºä¸­å¯ä»¥ä½¿ç”¨è¯¥å˜é‡çš„éƒ¨åˆ†ã€‚å±€éƒ¨å˜é‡çš„ç”Ÿå‘½æœŸå’Œå…¶ä½œç”¨åŸŸç›¸åŒã€‚å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸä»å®ƒçš„å£°æ˜å¼€å§‹ï¼Œç›´åˆ°åŒ…å«è¯¥å˜é‡çš„ç¨‹åºå—ç»“æŸã€‚å±€éƒ¨å˜é‡åœ¨ä½¿ç”¨å‰å¿…é¡»å…ˆèµ‹å€¼ã€‚åœ¨æ–¹æ³•ä¸­ï¼Œå¯ä»¥åœ¨ä¸åŒçš„éåµŒå¥—ç¨‹åºå—ä¸­ä»¥ç›¸åŒçš„åç§°å¤šæ¬¡å£°æ˜å±€éƒ¨å˜é‡ã€‚ä½†ä¸èƒ½åœ¨åµŒå¥—çš„å—ä¸­ä»¥ç›¸åŒçš„åç§°å¤šæ¬¡å£°æ˜å±€éƒ¨å˜é‡ï¼šæ— æ³•è®¿é—®å¤–éƒ¨å—å˜é‡ã€‚åœ¨forè¯­å¥çš„åˆå§‹åŠ¨ä½œéƒ¨åˆ†å£°æ˜çš„å˜é‡ï¼Œä½œç”¨åŸŸæ˜¯æ•´ä¸ªå¾ªç¯ã€‚åœ¨forè¯­å¥å¾ªç¯ä½“ä¸­å£°æ˜çš„å˜é‡ï¼Œä½œç”¨åŸŸä»å˜é‡å£°æ˜å¼€å§‹åˆ°å¾ªç¯ä½“ç»“æŸ12345678910111213141516171819public class TestLocalVariable &#123; public static void method1( ) &#123; int x = 1; int y = 1; for (int i = 1; i &lt; 10; i++) &#123; x += i; &#125; for (int i = 1; i &lt; 10; i++) &#123; y += i; //æ­£ç¡®ï¼šä¸¤ä¸ªå¾ªç¯æœªåµŒå¥—ï¼Œéƒ½å¯ç”¨i &#125; &#125; //é”™è¯¯ï¼Œå˜é‡iåœ¨åµŒå¥—çš„è¯­å¥å—ä¸­å£°æ˜ public static void method2( ) &#123;// int i = 1;// int sum = 0;// for (int i = 1; i &lt; 10; i++) &#123;//javaä¸å…è®¸å‡½æ•°çš„å±€éƒ¨å˜é‡æˆ–å‚æ•°çš„ä½œç”¨åŸŸè¢«è¦†ç›–// sum += i; //æ— æ³•è®¿é—®å¤–éƒ¨å—å±€éƒ¨å˜é‡// &#125; &#125;&#125;å…¨å±€å˜é‡çš„å£°æ˜ä¸ä½¿ç”¨123456public class args &#123; public static String username; // å…¨å±€å˜é‡ public static String password; //å…¨å±€å˜é‡&#125;&gt;&gt; args.username&gt;&gt; args.password","categories":[{"name":"java","slug":"java","permalink":"https://shyshy903.github.io/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://shyshy903.github.io/tags/java/"}]},{"title":"Pythonå­¦ä¹ ç¬”è®°","slug":"python/shypython","date":"2019-11-22T16:00:00.000Z","updated":"2020-02-11T08:48:55.606Z","comments":true,"path":"2019/11/23/python/shypython/","link":"","permalink":"https://shyshy903.github.io/2019/11/23/python/shypython/","excerpt":"","text":"Shypython-learn-notes1. python æ•°æ®ç±»å‹1.1 å˜é‡1.1.1 ç®—æœ¯è¿ç®—ç¬¦ 123456- åŠ å‡ä¹˜é™¤+ã€-ã€*ã€/- å–ä½™ã€å–æ•´ã€å–ç»å¯¹å€¼ %ã€//ã€abs()- æœ€å°ã€æœ€å¤§å€¼ min()ã€max()- å¤æ•° complex(re,im)- å–å…±è½­ c.conjugate()- è¿”å›å•†å’Œä½™æ•° divmod(x,y) 1.1.2 å¸ƒå°”è¿ç®—ç¬¦ 123- å°äºã€å¤§äº &lt; ã€ &gt;- ç­‰äºã€ä¸ç­‰äº == ã€ != - ä¸ã€æˆ–ã€é and ã€or ã€not 1.1.3 èµ‹å€¼è¿ç®—ç¬¦ 1234- a=a+b is a+=b- a=a-b is a-=b- a=a*/b is a*/b- a=a**(//)b is a**(//)=b 1.1.4 ä½è¿ç®—ç¬¦ 123- ä¸æˆ– &amp; ã€ | - å¼‚æˆ–ã€å–å ^ ã€~ - å·¦ä½ç§»ã€å³ä½ç§» &lt;&lt; ã€ &gt;&gt; 1.1.5 è½¬ä¹‰ç¬¦ 1234567891011121314- ç»­è¡Œç¬¦ \\- åæ–œæ ç¬¦å· \\\\- å¼•å· \\'- å“é“ƒ \\a- é€€æ ¼ \\b- è½¬ä¹‰ \\e- ç©º \\000- æ¢è¡Œ \\n- çºµå‘åˆ¶è¡¨ç¬¦ \\v- æ¨ªå‘åˆ¶è¡¨ç¬¦ \\t- å›è½¦ \\r- æ¢é¡µ \\f- å…«è¿›åˆ¶ \\oyy- åå…­è¿›åˆ¶ \\xyy 1.2 å­—ç¬¦ä¸²(ä¸å¯å˜ç±»å‹)1.2.1 åˆ‡ç‰‡æ“ä½œ 12345# å½“ç´¢å¼•ä¸ºæ­£æ•°æ—¶ï¼Œä»0å¼€å§‹ï¼Œå½“ç´¢å¼•ä¸ºè´Ÿæ•°æ—¶ï¼Œä»-1å¼€å§‹ï¼ˆä»å³å¾€å·¦ï¼‰- newstr = s[a:b:c] ä»ç´¢å¼•aå¼€å§‹åˆ°b ,æ¯éš”cå–ä¸€ä¸ªå€¼ï¼Œå·¦å¼€å³é—­- newstr = s[0:] - newstr = s[:] å’Œä¸Šé¢çš„å¼å­ç­‰ä»·- newstr = s[::-1] å®ç°å­—ç¬¦ä¸²çš„é€†åº 1.2.2 å­—ç¬¦ä¸²è¿ç®—åŠæ–¹æ³• 1234567891011121314151617str = 'I LOVE PYTHON!!'- æ ‡å‡†åŒ–å­—ç¬¦ä¸² r'str' æˆ–è€… repr(str)- x in s å­å­—ç¬¦ä¸² - s1 + s2 å­—ç¬¦ä¸²è¿æ¥ - s*n å­—ç¬¦ä¸²å‰¯æœ¬çš„æ‹¼æ¥ - s[i] å­—ç¬¦ä¸²ç´¢å¼• - str.index('s') è·å¾—å­—ç¬¦ä¸²så­—ç¬¦çš„ç´¢å¼•ä½ç½®- len(s) å­—ç¬¦ä¸²é•¿åº¦ - ord(str) å­—ç¬¦ä¸²çš„ç¼–ç  - chr(number) è¿”å›æŸä¸ªç¼–ç å¾—åˆ°çš„å­—ç¬¦ - str.spilt(', ') å­—ç¬¦ä¸²çš„åˆ†å‰² ,è¿”å›å€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨- chr.join(list) å­—ç¬¦ä¸²ç¼–ç çš„è¿æ¥ , \" \".join(list)str = \"www.runoob.com\"- print(str.upper()) æŠŠæ‰€æœ‰å­—ç¬¦ä¸­çš„å°å†™å­—æ¯è½¬æ¢æˆå¤§å†™å­—æ¯- print(str.lower()) æŠŠæ‰€æœ‰å­—ç¬¦ä¸­çš„å¤§å†™å­—æ¯è½¬æ¢æˆå°å†™å­—æ¯- print(str.capitalize()) æŠŠç¬¬ä¸€ä¸ªå­—æ¯è½¬åŒ–ä¸ºå¤§å†™å­—æ¯ï¼Œå…¶ä½™å°å†™- print(str.title()) æŠŠæ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯è½¬åŒ–ä¸ºå¤§å†™ï¼Œå…¶ä½™å°å†™ 1.2.3æ·±å…¥ç ”ç©¶å­—ç¬¦ä¸²çš„æ–¹æ³• 123456str.find(x) è¿”å›xçš„ç¬¬ä¸€ä¸ªå­—ç¬¦å‡ºç°çš„ç´¢å¼•ä½ç½®str.count(x) è¿”å›xå‡ºç°çš„æ¬¡æ•°str.replace('top','bot') è¿”å›ä¸€ä¸ªä¿®æ”¹çš„å‰¯æœ¬str.spilt()tabel = str.maketrans('xyz','uvw') ; str.translate(table) è¿”å›ä¸€ä¸ªæ˜ å°„åçš„å‰¯æœ¬str.strip() è¿”å›å­—ç¬¦ä¸²çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå¹¶ä¸”æ¶ˆé™¤å‰åç©ºæ ¼ 1.3 åˆ—è¡¨ï¼ˆå¯å˜ç±»å‹ï¼‰1.3.1 listçš„å†…ç½®æ–¹æ³• 123456789101112lst = [1,3,a,[4,5],6]- list.append(x) åœ¨å°¾éƒ¨å¢åŠ ä¸€ä¸ªå…ƒç´ - list.insert(x,i) åœ¨ç´¢å¼•iå¤„æ·»åŠ ä¸€ä¸ªå…ƒç´ - list.index(x) è·å¾—å…ƒç´ xçš„ç´¢å¼•- list.remove(x) åˆ é™¤åˆ—è¡¨çš„åŸè‰²- list.pop(i) å¼¹å‡ºç´¢å¼•ä¸ºiçš„å…ƒç´ å¹¶åœ¨åˆ—è¡¨ä¸­åˆ é™¤å®ƒ- list.clear() æ¸…æ¥šåˆ—è¡¨- list.count(x) è¿”å›åˆ—è¡¨xå‡ºç°çš„æ¬¡æ•°- list.sort() å¯¹åˆ—è¡¨ç›´æ¥æ’åºï¼Œ åŒºåˆ«äºæ’åºå‡½æ•° sorted()- list.reverse() å¯¹åˆ—è¡¨è¿›è¡Œåè½¬- len(list)- for item in list: å¯¹åˆ—è¡¨çš„éå† 1.3.2 åˆ—è¡¨å’Œå­—ç¬¦ä¸²çš„ç›¸äº’è½¬åŒ– 123456789101112131415161718192021222324252627282930 1. str &gt;&gt;&gt;list str1 = \"12345\"list1 = list(str1)print list1 str2 = \"123 sjhid dhi\"list2 = str2.split() #or list2 = str2.split(\" \")print list2 str3 = \"www.google.com\"list3 = str3.split(\".\")print list3 è¾“å‡ºä¸ºï¼š['1', '2', '3', '4', '5']['123', 'sjhid', 'dhi']['www', 'google', 'com']2. list &gt;&gt;&gt;strstr4 = \"\".join(list3)print str4str5 = \".\".join(list3)print str5str6 = \" \".join(list3)print str6è¾“å‡ºä¸ºï¼šwwwgooglecomwww.google.comwww google com 1.3 å…ƒç»„ç±»å‹ï¼ˆä¸å¯å˜ç±»å‹ï¼‰1.3.1 å…ƒç»„çš„è¿ç®—åŠæ“ä½œ 12# å…ƒç»„ä¸ºä¸å¯ä¿®æ”¹çš„å­—ç¬¦ä¸²tuple = (2019,'a',(b,c),'science') 1.3.2 å…ƒç»„ä¸åˆ—è¡¨çš„è½¬æ¢ 12tuple = tuple(list)list = list(touple) 1.4 é›†åˆç±»å‹ï¼ˆæ¶ˆé™¤å…³ç³»é‡å¤å…ƒç´ ï¼‰1234567891011121314myset = ['nature','science']set.add(x)set.remove(X)set.discard(X)set.clear()set.pop()len(set)in / not inset.issubset(set2) åˆ¤æ–­setæ˜¯å¦æ˜¯set2çš„å­é›†ï¼Œè¿”å›boolç±»å‹set.isuperset(set2) set.union(set2) è®¡ç®—å¹¶é›†set.intersection(set2) è®¡ç®—äº¤é›†set.difference(set2) è®¡ç®—å·®é›†set.symmetric_difference(set2) è®¡ç®—å¯¹ç§°å·®é›† 1.5 å­—å…¸ç±»å‹ï¼ˆé”®å€¼å¯¹ï¼‰12345678910111213141516171819mydict = &#123;'a':1,'b':2,'c':3&#125;len(dict)str(dict)dict('a') è®¿é—®å­—å…¸ä¸­é”®ä¸ºaçš„å€¼dict.clear()dict.items() ä»¥åˆ—è¡¨å½¢å¼è¿”å›å¯éå†çš„ï¼ˆé”®ï¼Œå€¼ï¼‰å…ƒç´ æ•°ç»„dict.keys() ä»¥åˆ—è¡¨å½¢å¼è¿”å›ä¸€ä¸ªå­—å…¸ä¸­çš„æ‰€æœ‰é”®dict.values() ä»¥å­—å…¸å½¢å¼è¿”å›ä¸€ä¸ªå­—å…¸ä¸­çš„æ‰€æœ‰å€¼``` ## 2. è¯­å¥ç±»å‹### 2.1 if è¯­å¥```python if &lt;æ¡ä»¶&gt;ï¼š passelif &lt;æ¡ä»¶&gt;ï¼š passelse: pass 2.2 whileè¯­å¥12345while &lt;æ¡ä»¶&gt;ï¼š pass# æ­»å¾ªç¯while 1: pass 2.3 for è¯­å¥1234567891011121314151617for item in list: pass# åœ¨forå¾ªç¯ä¸­ä½¿ç”¨å†…ç½®å‡½æ•° range()range(a,b,c) è¿”å›ä¸€ä¸ªæ•°å­—åŒºé—´çš„æ‰€æœ‰æ•´æ•°# ç®€å•çš„å†’æ³¡æ’åºç®—æ³•Sfor i in range(len(n)-1): for j in range(len(n)-i-1): if n[j] &gt; n[i]: n[j], n[j+1] = n[j+1], n[j]# åœ¨forå¾ªç¯ä¸­ä½¿ç”¨å†…ç½®å‡½æ•°zip()zip(x,y) å°†å¤šåºåˆ—ç”Ÿæˆä¸€ä¸ªæ–°çš„åºåˆ—ï¼Œæ¯ä¸ªåºåˆ—çš„å…ƒç´ ä»¥å…ƒç»„å½¢å¼å­˜å‚¨æ•°æ®for t1,t2 in zip(x,y): print(t1,t2) 2.4 æ§åˆ¶è¯­å¥123break è·³å‡ºå¾ªç¯continue ç»ˆæ­¢å½“å‰ä¸€æ¬¡å¾ªç¯ã€ç»§ç»­è¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯pass ä»€ä¹ˆéƒ½ä¸åšï¼Œä¿æŒç»“æ„å®Œæ•´æ€§ 3. æ ¼å¼åŒ–è¾“å…¥ä¸è¾“å‡º3.1 æ ¼å¼åŒ–è¾“å…¥12a = input(&lt;info&gt;)a = input(repr(str)) 3.2 æ ¼å¼åŒ–è¾“å‡º3.2.1 printè¯­å¥ 12345678print(a, b) åŒè¡Œä»¥ç©ºæ ¼éš”å¼€è¾“å‡ºprint(a, b,s ep=',') ä»¥é€—å·éš”å¼€è¿›è¡Œè¾“å‡ºprint(s, ewp='\\n') ä»¥æ¢è¡Œéš”å¼€è¿›è¡Œè¾“å‡ºprint(name, end='!') æ¯ä¸ªè¾“å‡ºéƒ½è¦æ·»åŠ !print(' i love %s ' % s) print æ ¼å¼åŒ–è¾“å‡º# å¯¹å­—ç¬¦ä¸²çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œæ¢è¡Œè¾“å‡ºfor item in list: print(item) 3.2.2 å­—ç¬¦ä¸²æ–¹æ³•format() 123print('&#123;0&#125; : &#123;1&#125; : &#123;2&#125;'.format(hour, minute, second))# æŒ‰ç…§å¯¹é½æ ¼å¼åŒ–è¿›è¡Œæ’åˆ—print('&#123;0:3&#125;,&#123;1:5&#125;'.format(12, 534)) :åé¢çš„å†…å®¹ä¸ºåªç­‰çš„æ ¼å¼ï¼Œè¡¨ç¤ºå ä½æ•°ï¼Œå¦‚æœä¸å¤Ÿï¼Œåœ¨å‰é¢ç”¨ç©ºæ ¼è¡¥é½ 3.2.3 æ•°æ®è¾“å‡ºçš„æ ¼å¼ç±»å‹ 123456789# aè¡¨ç¤ºå ä½ï¼Œä¸å¤Ÿï¼ŒæŒ‰ç…§åŸé•¿åº¦æ‰“å°ï¼Œå¤šäº†å·¦ä¾§ç©ºæ ¼è¡¥é½ï¼Œå°æ•°ç‚¹åé¢ä¸ºä¿ç•™å‡ ä½å°æ•°ï¼Œfä½æ•°æ®ç±»å‹print('i love %a.bf', num)- b ä»¥äºŒè¿›åˆ¶å½¢å¼è¾“å‡º- c è¾“å‡ºè¯ä¹¦å€¼å¯¹åº”çš„unicodeå­—ç¬¦- d ä»¥åè¿›åˆ¶å½¢å¼è¾“å‡ºæ•°å€¼- e ä»¥ç§‘å­¦è®¡æ•°æ³•å½¢å¼è¾“å‡º- o ä»¥å…«è¿›åˆ¶å½¢å¼è¾“å‡º- x ä»¥å°å†™å½¢å¼çš„åå…­è¿›åˆ¶è¾“å‡º- X ä»¥å¤§å†™å½¢å¼çš„åå…­è¿›åˆ¶è¾“å‡º 4. å‡½æ•°4.1 å‡½æ•°å®šä¹‰åŠè°ƒç”¨å‡½æ•°12345678910111213141516- def funname(para1, para2,*ï¼Œpara3...): å‡½æ•°ä½“# åœ¨å‚æ•°åˆ—è¡¨ä¸­ä½¿ç”¨ï¼ˆ*ï¼‰ï¼Œä»£è¡¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œåœ¨ï¼ˆ*ï¼‰åé¢çš„å‚æ•°éƒ½å¿…é¡»æŒ‡å®šå‚æ•°åç§°ï¼Œå¦‚ä¸‹funname(para1, para2ï¼Œpara3=2...) è°ƒç”¨å‡½æ•°- def fun(strname, age=32)ï¼š åé¢çš„å‚æ•°ä½é»˜è®¤å½¢å‚ï¼Œé»˜è®¤å½¢å‚å¿…é¡»æ”¾åœ¨åé¢- å¯¹å…ƒç»„å’Œåˆ—è¡¨è¿›è¡Œè§£åŒ…def fun(*person):fun('shy','21')mylist = ['shy','21']fun(*mylist)- å¯¹å­—å…¸è¿›è¡Œè§£åŒ…å®šä¹‰å‚æ•°åŠè°ƒç”¨def fun(**person)print('å§“å',person['name'],'å¹´çºª',person['age'])fun('shy','21')mydict = &#123;'name':'shy','age':21&#125;fun(**mydict) 4.2 å‡½æ•°ç±»å‹4.2.1 pythonå†…ç½®å‡½æ•° ä¸‹å›¾python3.8å®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„å†…ç½®å‡½æ•°åº“ï¼š å®˜æ–¹ä¸­æ–‡æ–‡æ¡£çš„è¿æ¥ï¼šhttps://docs.python.org/zh-cn/3/library/functions.html 4.2.2 åŒ¿åå‡½æ•°ä¸å¯è¿­ä»£å‡½æ•° åŒ¿åå‡½æ•°1234567891011121314151617181920# åŒ¿åå‡½æ•°lambda para1, para2... : è¡¨è¾¾å¼r = lambda x,y:x*y# åŒ¿åå‡½æ•°ä¸reduceå‡½æ•°çš„ç»„åˆåº”ç”¨reduce(fun, seq, initial) #ç”¨åºåˆ—å€¼ä¾æ¬¡è°ƒç”¨funfrom funtools import reducea = reduce(lambda x,y:x + y, range(1,101)) #å®ç°æ±‚1~100çš„å’Œ# åŒ¿åå‡½æ•°ä¸mapå‡½æ•°çš„ç»„åˆåº”ç”¨map(fun, seq[,seq,]) #å°†seqå†…éƒ¨çš„å…ƒç´ ä½œä¸ºå‚æ•°ä¾æ¬¡è°ƒç”¨t = map(lambda x:x**2,[1,2,3,4,5]) #è¿”å›ä¸€ä¸ªmapå¯¹è±¡print(list(t)) #æ‰“å°å€¼ä¸º[1,4,9,16,25]y =map(lambda x,y:x+y,[1,2,3],[4,5,6])print(list(t)) # æ‰“å°å€¼ä¸º[5,7,9]# åŒ¿åå‡½æ•°ä¸filterå‡½æ•°çš„ç»„åˆåº”ç”¨filter(fun or none, seq) #å°†åºåˆ—å¯¹è±¡ä¾æ¬¡æ”¾åˆ°funä¸­ï¼Œå¦‚æœè¿”å›trueå°±ç•™ä¸‹t = filter(lambda x:x%2==0, [1,2,3,4,5,6])print(list(t)) # æ‰“å°å€¼ä¸º[2,4,6] å¯è¿­ä»£å‡½æ•°1234# æ¯ä¸ªç”Ÿæˆå™¨å¯¹è±¡ä¼šæœ‰ä¸€ä¸ª__next__()æ–¹æ³•t = filter(lambda x:x%2==0, [1,2,3,4,5,6])print(t.__next__()) # æ‰“å°2print(t.__next__()) # æ‰“å°4 4.2.3 ç”Ÿæˆå™¨å‡½æ•°ä¸å·¥å‚å‡½æ•° ç”Ÿæˆå™¨å‡½æ•°123456789# ç”Ÿæˆå™¨ä¸è¿­ä»£å™¨ä¸åŒï¼Œè¿­ä»£å™¨çš„å†…å®¹å­˜åœ¨å†…å­˜é‡Œï¼Œç”¨nextå‡½æ•°éå†ï¼Œç”Ÿæˆå™¨ç”¨å®Œç«‹å³é”€æ¯def Reverse(data): for idx in range(len(data)-1,-1,-1): yield data[idx] # ç”Ÿæˆå™¨å‡½æ•°ç”¨yieldè¿”å›for c in Reverse('Python'): print(c, end = ' ') # æ‰“å° n o h t y P# ç”Ÿæˆå™¨è¡¨è¾¾å¼mylist = [x*x for x in range(3)] # ä½¿ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼è¿”å›ä¸€ä¸ªå¯¹è±¡ å·¥å‚å‡½æ•°1234567891011121314151617181920212223242526# é—­åˆå‡½æ•°def wrapperfun(strname): def recorder(age)ï¼š print(strname,age) return recorderfun = wrapperfun('shy')fun(37) # æ‰“å° shy 37# è£…é¥°å™¨å±æ€§ï¼šåœ¨åŸæœ‰çš„å‡½æ•°åŒ…ä¸€ä¸ªå‡½æ•°ï¼Œä¸æ”¹å˜åŸä»£ç çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ æ–°åŠŸèƒ½def checkParams(fn): # è£…é¥°å™¨å‡½æ•° def wrapper(strname): if isinstance(strname.(str))ï¼š return fn(strname) # åˆ¤æ–­å­—ç¬¦ä¸²ç±»å‹ print ('error') return return wrapperdef wrapperfun(strname): def recorder(age)ï¼š print(strname,age) return recorderwrapperfun2 = checkParams(wrapperfun)fun = wrapperfun('shy')fun(37) # æ‰“å° shy 37fun = wrapperfun2(37) # è¾“å…¥ä¸åˆæ³• @ä¿®é¥°ç¬¦1234567891011121314151617def checkParams(fn): # è£…é¥°å™¨å‡½æ•° def wrapper(strname): if isinstance(strname.(str))ï¼š return fn(strname) # åˆ¤æ–­å­—ç¬¦ä¸²ç±»å‹ print ('error') return return wrapper@checkParams # ä½¿ç”¨è£…é¥°å™¨å‡½æ•°å¯¹wrapperfunå‡½æ•°è¿›è¡Œä¿®é¥°def wrapperfun(strname): def recorder(age)ï¼š print(strname,age) return recorderfun = wrapperfun('shy')fun(37) # æ‰“å° shy 37fun = wrapperfun2(37) # è¾“å…¥ä¸åˆæ³• 4.4.4 åå‡½æ•°ä¸é€’å½’å‡½æ•° åå‡½æ•°123# åå‡½æ•°æ˜¯é‡æ–°å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶æŒ‡å®šäº†é»˜è®¤å‚æ•°å€¼from funtools import partialpartial(fun, *args, **keywords) é€’å½’å‡½æ•°123# é€’å½’å‡½æ•°æ˜¯è‡ªå·±è°ƒç”¨è‡ªå·±çš„å‡½æ•°ï¼Œæ‰€æœ‰çš„å‡½æ•°è°ƒç”¨éƒ½æ˜¯å‹æ ˆçš„è¿‡ç¨‹ï¼Œæ‰€ä»¥è€—å†…å­˜ï¼Œæ ˆç©ºé—´æœ‰é™ï¼Œå¦‚æœç¨‹åºæ ˆç©ºé—´åœ°å€å†™æ»¡ï¼Œç¨‹åºæœ€åä¼šå´©æºƒdef fun(n): return n*fun(n-1) 4.4.5 eval å’Œ execå‡½æ•° evalå‡½æ•°123456# execæ‰§è¡Œä¸è¿”å›ç»“æœï¼Œevalæ‰§è¡Œè¿”å›ç»“æœdic = &#123;&#125;dic['b'] = 3exec('a=4',dic)print(dic.keys()) #æ‰“å°dict_keys(['a','__builtins__','b'])# ä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°ä¸€å®šæ˜¯å¯æ‰§è¡Œä»£ç  4.3 å˜é‡çš„ä½œç”¨åŸŸ 4.3.1 globalè¯­å¥ 123456# global å¯ä»¥æŠŠå±€éƒ¨å£°æ˜ä¸ºå…¨å±€a = 6def func(): global a a = 5print(a) # æ‰“å°5 4.3.2 nonlocalè¯­å¥ 123456789101112# nonlocalå¯ä»¥æŠŠå…¨å±€å¾€ä¸‹ä¸€ä½œç”¨åŸŸè°ƒç”¨a = 6def func(): a = 7 def nested(): nonlocal a a+=1 nested() print('æœ¬åœ°:',a) #æ‰“å° 8func()print('å…¨å±€',a) # æ‰“å°6print(a) # æ‰“å°5 5. é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡5.1 ç±»çš„ç»“æ„12345678910111213141516class MyClassï¼š def __init__(self,å±æ€§): # æ„é€ å‡½æ•° self.å±æ€§ = å±æ€§ pass def getname(self): return self.name ......myc = MyClass(å±æ€§) # åˆå§‹åŒ–å®ä¾‹å¯¹è±¡ï¼Œæ„é€ å‡½æ•°çš„å±æ€§a = myc.getname() # ç±»è¿˜å…·æœ‰ä¸€äº›å†…ç½®å±æ€§__name__ åç§°__doc__ ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸²__nodule__ ç±»çš„æ¨¡å—if __name__ == '__main__': 5.2 ç±»æ–¹æ³•1234@classmthod # å£°æ˜ä¸ºç±»æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ç”¨ç±»åè¿›è¡Œè°ƒç”¨ï¼Œå½“ç„¶åˆå§‹åŒ–å®ä¾‹å¯¹è±¡è¿›è¡Œè°ƒç”¨ä¹Ÿæ˜¯æ­£ç¡®çš„def fun(cls):@staticmethod # ç­‰åŒäºæ™®é€šå‡½æ•°ï¼Œåªæ˜¯è¢«å°è£…åœ¨ç±»ä¸­ï¼Œç‹¬ç«‹äºæ•´ä¸ªç±»def fun() # åŒä¸Šçš„è°ƒç”¨æ–¹å¼ï¼Œä¸”å‚æ•°æ²¡æœ‰é™åˆ¶è¦æ±‚ 5.3 ç±»çš„ç§æœ‰åŒ–å±æ€§123456789101112131415# ç§æœ‰åŒ–å±æ€§æ–¹æ³•ï¼Œåœ¨ç±»çš„å±æ€§å‰é¢åŠ åŒä¸‹åˆ’çº¿ï¼ŒåŒæ—¶ä¼šæä¾›ä¸€ä¸ªç§æœ‰åŒ–å±æ€§çš„è®¿é—®å‡½æ•°ï¼Œä¸å¯ä»¥è¢«ä¿®æ”¹,ä½†å¯ä»¥é’ˆå¯¹å…·ä½“å®ä¾‹è¿›è¡Œå¯¹è±¡ä¿®æ”¹clas MyClass: __Occupation = 'scientist' def __init__(sefl,name,age)ï¼› def getOccupation(self): return self.__Occupation# ä½¿ç”¨è£…é¥°å™¨å‡½æ•°å®ç°ç±»çš„ç§æœ‰åŒ–clas MyClass: __Occupation = 'scientist' def __init__(sefl,name,age)ï¼› @property # è£…é¥°ä¸ºå±æ€§ï¼Œä½¿ç±»çš„ç§æœ‰åŒ–å±æ€§ä¹Ÿå¯ä»¥è¢«è®¿é—® def getOccupation(self): return self.__Occupation 5.4 ç±»çš„ç»§æ‰¿5.4.1 ç»§æ‰¿ç»“æ„ä½“ 12class DerivedClass(FatherClass1, FatherClass2)ï¼š pass 123456789101112131415161718192021class Record: \"\"\" A record class \"\"\" __Ocuupation = \"scientist\" def __init__(self, name, age): self.name = name self.age = age def showrecode(self): print(\"Occupation:\",self.getOccupation()) def getOccupation(self): return self.__Occupationclass GirlRecord(Record): \"\"\" A girlrecord class \"\"\" def showrecode(self): Record.showrecode(self) print(\"the girl:\", self.name, \"age:\", self.age)myc = GirlRecord(\"Anaa\", 21)myc.showrecode() 5.4.2 super()å‡½æ•° 123456789101112131415161718192021222324252627282930313233# ä¿éšœäº†è°ƒç”¨çˆ¶ç±»æ–¹æ³•æ—¶åªè°ƒç”¨ä¸€æ¬¡class Record: \"\"\" A record class \"\"\" __Ocuupation = \"scientist\" def __init__(self, name, age): self.name = name self.age = age def showrecode(self): print(\"Occupation:\",self.getOccupation()) def getOccupation(self): return self.__Occupationclass GirlRecord(Record): \"\"\" A girlrecord class \"\"\" def showrecode(self): super().showrecode(self) print(\"the girl:\", self.name, \"age:\", self.age)class MaleRecord(Record): \"\"\" A girlrecord class \"\"\" def showrecode(self): super().showrecode(self) print(\"the girl:\", self.name, \"age:\", self.age) class ThisRecord(GirlRecord, MaleRecord): \"\"\" A girlrecord class \"\"\" def showrecode(self): super().showrecode(self) print(\"the girl:\", self.name, \"age:\", self.age)myc = ThisRecord(\"Anaa\", 21)myc.showrecode() 5.5 ç±»ç›¸å…³çš„å†…ç½®å‡½æ•° åˆ¤æ–­å®ä¾‹ï¼ˆisinstance)1isinstance(object, class_name) åˆ¤æ–­å­—ç±»ï¼ˆissubclass)1issubclass(class1, class2) åˆ¤æ–­ç±»å®ä¾‹ä¸­æ˜¯å¦åŒ…å«æŸä¸€ä¸ªå±æ€§ï¼ˆhasattr)1hasattr(object, name) è·å¾—ç±»å®ä¾‹ä¸­çš„æŸä¸€ä¸ªå±æ€§ï¼ˆgetattr)1getattr(object, name[,default]) è®¾ç½®ç±»å®ä¾‹ä¸­çš„æŸä¸€ä¸ªå±æ€§å€¼ï¼ˆsetattr)1setattr(object, name, value) 5.6 é‡è½½è¿ç®—ç¬¦123456789101112131415161718192021222324252627class MyClass: \"\"\" A record class\"\"\" def __init__(self, name, age): self.name = name self.age = age def __str__(self): # å°†å€¼è½¬åŒ–ä¸ºå­—ç¬¦ä¸²è¿›è¡Œè¾“å‡º retrun \"name:\"+self.name;\"age:\"+str(self.age) __repr__ = __str__ # è½¬åŒ–ä¸ºè§£é‡Šå™¨è¯»å–çš„å½¢å¼ def __lt__(self, record): #é‡è½½æ¯”è¾ƒè¿ç®—ç¬¦ if self.age &lt; record.age: return True else: return False def __add__(self, record): #é‡è½½åŠ å·è¿ç®—ç¬¦ return MyClass(self.name, self.age+record.age)myc = MyClass(\"A\", 42)myc1 = MyClass(\"B\", 23)print(repr(myc)) print(myc)print(str(myc))print(myc&lt;myc1)print(myc+myc1) è¿ç®—ç¬¦é‡è½½12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758 æ–¹æ³•å è¿ç®—ç¬¦å’Œè¡¨è¾¾å¼ è¯´æ˜__add__(self,rhs) self + rhs åŠ æ³•__sub__(self,rhs) self - rhs å‡æ³•__mul__(self,rhs) self * rhs ä¹˜æ³•__truediv__(self,rhs) self / rhs é™¤æ³•__floordiv__(self,rhs) self //rhs åœ°æ¿é™¤__mod__(self,rhs) self % rhs å–æ¨¡(æ±‚ä½™)__pow__(self,rhs) self **rhs å¹‚è¿ç®—åˆèµ‹å€¼ç®—æœ¯è¿ç®—ç¬¦çš„é‡è½½:æ–¹æ³•å è¿ç®—ç¬¦å’Œè¡¨è¾¾å¼ è¯´æ˜__iadd__(self,rhs) self += rhs åŠ æ³•__isub__(self,rhs) self -= rhs å‡æ³•__imul__(self,rhs) self *= rhs ä¹˜æ³•__itruediv__(self,rhs) self /= rhs é™¤æ³•__ifloordiv__(self,rhs) self //=rhs åœ°æ¿é™¤__imod__(self,rhs) self %= rhs å–æ¨¡(æ±‚ä½™)__ipow__(self,rhs) self **=rhs å¹‚è¿ç®—æ¯”è¾ƒç®—æœ¯è¿ç®—ç¬¦çš„é‡è½½:æ–¹æ³•å è¿ç®—ç¬¦å’Œè¡¨è¾¾å¼ è¯´æ˜__lt__(self,rhs) self &lt; rhs å°äº__le__(self,rhs) self &lt;= rhs å°äºç­‰äº__gt__(self,rhs) self &gt; rhs å¤§äº__ge__(self,rhs) self &gt;= rhs å¤§äºç­‰äº__eq__(self,rhs) self == rhs ç­‰äº__ne__(self,rhs) self != rhs ä¸ç­‰äº ä½è¿ç®—ç¬¦é‡è½½æ–¹æ³•å è¿ç®—ç¬¦å’Œè¡¨è¾¾å¼ è¯´æ˜__and__(self,rhs) self &amp; rhs ä½ä¸__or__(self,rhs) self | rhs ä½æˆ–__xor__(self,rhs) self ^ rhs ä½å¼‚æˆ– __lshift__(self,rhs) self &lt;&lt;rhs å·¦ç§» __rshift__(self,rhs) self &gt;&gt;rhs å³ç§»åå‘ä½è¿ç®—ç¬¦é‡è½½æ–¹æ³•å è¿ç®—ç¬¦å’Œè¡¨è¾¾å¼ è¯´æ˜__and__(self,lhs) lhs &amp; rhs ä½ä¸__or__(self,lhs) lhs | rhs ä½æˆ–__xor__(self,lhs) lhs ^ rhs ä½å¼‚æˆ–__lshift__(self,lhs) lhs &lt;&lt;rhs å·¦ç§»__rshift__(self,lhs) lhs &gt;&gt;rhs å³ç§»å¤åˆèµ‹å€¼ä½ç›¸å…³è¿ç®—ç¬¦é‡è½½æ–¹æ³•å è¿ç®—ç¬¦å’Œè¡¨è¾¾å¼ è¯´æ˜__iand__(self,rhs) self &amp; rhs ä½ä¸__ior__(self,rhs) self | rhs ä½æˆ–__ixor__(self,rhs) self ^ rhs ä½å¼‚æˆ–__ilshift__(self,rhs) self &lt;&lt;rhs å·¦ç§»__irshift__(self,rhs) self &gt;&gt;rhs å³ç§»ä¸€å…ƒè¿ç®—ç¬¦çš„é‡è½½æ–¹æ³•å è¿ç®—ç¬¦å’Œè¡¨è¾¾å¼ è¯´æ˜__neg__(self) - self è´Ÿå·__pos__(self) + self æ­£å·__invert__(self) ~ self å–å 6 é”™è¯¯å¼‚å¸¸ä¸æ–‡ä»¶è¯»å†™6.1 é”™è¯¯å¼‚å¸¸æ•æ‰ 6.1.1 å¼‚å¸¸è¯­å¥ç»“æ„ 123456789101112try: passexcept(ZeroDivisionError, ValueError): print('é”™è¯¯')except: print('å…¶å®ƒå¼‚å¸¸â€™)except Exception as e: # æ•æ‰æœªçŸ¥å¼‚å¸¸ print(e)else: pass # æ²¡æœ‰å¼‚å¸¸å‘ç”Ÿæ—¶æ‰§è¡Œfinally: pass # æœ€ç»ˆå¤„ç†è¯­å¥ï¼Œæ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œéƒ½è¦æ‰§è¡Œè¿™ä¸ªè¯­å¥ 6.1.2 å¼‚å¸¸ç±»å‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960# å¼‚å¸¸åç§° å¼‚å¸¸è§£é‡ŠAttributeError è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰çš„æ ‘å½¢ï¼Œæ¯”å¦‚foo.xï¼Œä½†æ˜¯fooæ²¡æœ‰å±æ€§xIOError è¾“å…¥/è¾“å‡ºå¼‚å¸¸ï¼›åŸºæœ¬ä¸Šæ˜¯æ— æ³•æ‰“å¼€æ–‡ä»¶ImportError æ— æ³•å¼•å…¥æ¨¡å—æˆ–åŒ…ï¼›åŸºæœ¬ä¸Šæ˜¯è·¯å¾„é—®é¢˜æˆ–åç§°é”™è¯¯IndentationError è¯­æ³•é”™è¯¯ï¼ˆçš„å­ç±»ï¼‰ ï¼›ä»£ç æ²¡æœ‰æ­£ç¡®å¯¹é½IndexError ä¸‹æ ‡ç´¢å¼•è¶…å‡ºåºåˆ—è¾¹ç•Œï¼Œæ¯”å¦‚å½“xåªæœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œå´è¯•å›¾è®¿é—®x[5]KeyError è¯•å›¾è®¿é—®å­—å…¸é‡Œä¸å­˜åœ¨çš„é”®KeyboardInterrupt Ctrl+Cè¢«æŒ‰ä¸‹NameError ä½¿ç”¨ä¸€ä¸ªè¿˜æœªè¢«èµ‹äºˆå¯¹è±¡çš„å˜é‡SyntaxError Pythonä»£ç éæ³•ï¼Œä»£ç ä¸èƒ½ç¼–è¯‘(ä¸ªäººè®¤ä¸ºè¿™æ˜¯è¯­æ³•é”™è¯¯ï¼Œå†™é”™äº†ï¼‰TypeError ä¼ å…¥å¯¹è±¡ç±»å‹ä¸è¦æ±‚çš„ä¸ç¬¦åˆUnboundLocalError è¯•å›¾è®¿é—®ä¸€ä¸ªè¿˜æœªè¢«è®¾ç½®çš„å±€éƒ¨å˜é‡ï¼ŒåŸºæœ¬ä¸Šæ˜¯ç”±äºå¦æœ‰ä¸€ä¸ªåŒåçš„å…¨å±€å˜é‡ï¼Œå¯¼è‡´ä½ ä»¥ä¸ºæ­£åœ¨è®¿é—®å®ƒValueError ä¼ å…¥ä¸€ä¸ªè°ƒç”¨è€…ä¸æœŸæœ›çš„å€¼ï¼Œå³ä½¿å€¼çš„ç±»å‹æ˜¯æ­£ç¡®BaseException æ‰€æœ‰å¼‚å¸¸çš„åŸºç±»SystemExit è§£é‡Šå™¨è¯·æ±‚é€€å‡ºKeyboardInterrupt ç”¨æˆ·ä¸­æ–­æ‰§è¡Œ(é€šå¸¸æ˜¯è¾“å…¥^C)Exception å¸¸è§„é”™è¯¯çš„åŸºç±»StopIteration è¿­ä»£å™¨æ²¡æœ‰æ›´å¤šçš„å€¼GeneratorExit ç”Ÿæˆå™¨(generator)å‘ç”Ÿå¼‚å¸¸æ¥é€šçŸ¥é€€å‡ºStandardError æ‰€æœ‰çš„å†…å»ºæ ‡å‡†å¼‚å¸¸çš„åŸºç±»ArithmeticError æ‰€æœ‰æ•°å€¼è®¡ç®—é”™è¯¯çš„åŸºç±»FloatingPointError æµ®ç‚¹è®¡ç®—é”™è¯¯OverflowError æ•°å€¼è¿ç®—è¶…å‡ºæœ€å¤§é™åˆ¶ZeroDivisionError é™¤(æˆ–å–æ¨¡)é›¶ (æ‰€æœ‰æ•°æ®ç±»å‹)AssertionError æ–­è¨€è¯­å¥å¤±è´¥AttributeError å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±æ€§EOFError æ²¡æœ‰å†…å»ºè¾“å…¥,åˆ°è¾¾EOF æ ‡è®°EnvironmentError æ“ä½œç³»ç»Ÿé”™è¯¯çš„åŸºç±»IOError è¾“å…¥/è¾“å‡ºæ“ä½œå¤±è´¥OSError æ“ä½œç³»ç»Ÿé”™è¯¯WindowsError ç³»ç»Ÿè°ƒç”¨å¤±è´¥ImportError å¯¼å…¥æ¨¡å—/å¯¹è±¡å¤±è´¥LookupError æ— æ•ˆæ•°æ®æŸ¥è¯¢çš„åŸºç±»IndexError åºåˆ—ä¸­æ²¡æœ‰æ­¤ç´¢å¼•(index)KeyError æ˜ å°„ä¸­æ²¡æœ‰è¿™ä¸ªé”®MemoryError å†…å­˜æº¢å‡ºé”™è¯¯(å¯¹äºPython è§£é‡Šå™¨ä¸æ˜¯è‡´å‘½çš„)NameError æœªå£°æ˜/åˆå§‹åŒ–å¯¹è±¡ (æ²¡æœ‰å±æ€§)UnboundLocalError è®¿é—®æœªåˆå§‹åŒ–çš„æœ¬åœ°å˜é‡ReferenceError å¼±å¼•ç”¨(Weak reference)è¯•å›¾è®¿é—®å·²ç»åƒåœ¾å›æ”¶äº†çš„å¯¹è±¡RuntimeError ä¸€èˆ¬çš„è¿è¡Œæ—¶é”™è¯¯NotImplementedError å°šæœªå®ç°çš„æ–¹æ³•SyntaxError Python è¯­æ³•é”™è¯¯IndentationError ç¼©è¿›é”™è¯¯TabError Tab å’Œç©ºæ ¼æ··ç”¨SystemError ä¸€èˆ¬çš„è§£é‡Šå™¨ç³»ç»Ÿé”™è¯¯TypeError å¯¹ç±»å‹æ— æ•ˆçš„æ“ä½œValueError ä¼ å…¥æ— æ•ˆçš„å‚æ•°UnicodeError Unicode ç›¸å…³çš„é”™è¯¯UnicodeDecodeError Unicode è§£ç æ—¶çš„é”™è¯¯UnicodeEncodeError Unicode ç¼–ç æ—¶é”™è¯¯UnicodeTranslateError Unicode è½¬æ¢æ—¶é”™è¯¯Warning è­¦å‘Šçš„åŸºç±»DeprecationWarning å…³äºè¢«å¼ƒç”¨çš„ç‰¹å¾çš„è­¦å‘ŠFutureWarning å…³äºæ„é€ å°†æ¥è¯­ä¹‰ä¼šæœ‰æ”¹å˜çš„è­¦å‘ŠOverflowWarning æ—§çš„å…³äºè‡ªåŠ¨æå‡ä¸ºé•¿æ•´å‹(long)çš„è­¦å‘ŠPendingDeprecationWarning å…³äºç‰¹æ€§å°†ä¼šè¢«åºŸå¼ƒçš„è­¦å‘ŠRuntimeWarning å¯ç–‘çš„è¿è¡Œæ—¶è¡Œä¸º(runtime behavior)çš„è­¦å‘ŠSyntaxWarning å¯ç–‘çš„è¯­æ³•çš„è­¦å‘ŠUserWarning ç”¨æˆ·ä»£ç ç”Ÿæˆçš„è­¦å‘Š 6.2 æ–‡ä»¶è¯»å†™ä¸å¯¼å…¥6.2.1 è¯­å¥ç»“æ„ 123456789101112131415161718192021222324f = open('new/test.txt','a+',encoding='utf-8')f.write('\\nä»Šå¤©å¤©æ°”å¾ˆå¥½')f.close()f = open('new/test.txt','rb')w=f.read().decode('utf-8')print(w)f = open('workfile', 'w')with open('workfile') as f: read_data = f.read()f.close()æ–‡ä»¶å¸¸è§çš„è¯»å†™æ¨¡å¼w ä»¥å†™æ–¹å¼æ‰“å¼€ï¼ŒW æ–‡ä»¶è‹¥å­˜åœ¨ï¼Œé¦–å…ˆè¦æ¸…ç©ºï¼Œç„¶åï¼ˆé‡æ–°ï¼‰åˆ›å»ºa ä»¥è¿½åŠ æ¨¡å¼æ‰“å¼€ (ä» EOF å¼€å§‹, å¿…è¦æ—¶åˆ›å»ºæ–°æ–‡ä»¶)r+ ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€w+ ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w )a+ ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ a )rb ä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€wb ä»¥äºŒè¿›åˆ¶å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w )ab ä»¥äºŒè¿›åˆ¶è¿½åŠ æ¨¡å¼æ‰“å¼€ (å‚è§ a )rb+ ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ r+ )wb+ ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w+ )ab+ ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ a+ ) 6.2.1 æ–‡ä»¶è¯»å†™æ–¹æ³• 123456789101112131415161718192021222324252627f.read()f.read(size)f.readline() # è¯»å–ä¸€è¡Œf.readlines() # è¯»å–æ‰€æœ‰è¡Œï¼Œæ¯ä¸€è¡Œå­˜å‚¨ä¸ºåˆ—è¡¨çš„æ¯ä¸€ä¸ªå…ƒç´ for line in f: print(line, end='')&gt;&gt;&gt; f.write('This is a test\\n')15f.tell() # è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œç»™å‡ºæ–‡ä»¶å¯¹è±¡åœ¨æ–‡ä»¶ä¸­çš„å½“å‰ä½ç½®ï¼Œè¡¨ç¤ºä¸ºäºŒè¿›åˆ¶æ¨¡å¼ä¸‹æ—¶ä»æ–‡ä»¶å¼€å§‹çš„å­—èŠ‚æ•°ï¼Œä»¥åŠæ–‡æœ¬æ¨¡å¼ä¸‹çš„ä¸é€æ˜æ•°å­—ã€‚# è¦æ”¹å˜æ–‡ä»¶å¯¹è±¡çš„ä½ç½®ï¼Œè¯·ä½¿ç”¨ f.seek(offset, whence)ã€‚ é€šè¿‡å‘ä¸€ä¸ªå‚è€ƒç‚¹æ·»åŠ  offset æ¥è®¡ç®—ä½ç½®ï¼› # å‚è€ƒç‚¹ç”± whence å‚æ•°æŒ‡å®šã€‚ # whence çš„ 0 å€¼è¡¨ç¤ºä»æ–‡ä»¶å¼€å¤´èµ·ç®—ï¼Œ1 è¡¨ç¤ºä½¿ç”¨å½“å‰æ–‡ä»¶ä½ç½®ï¼Œ2 è¡¨ç¤ºä½¿ç”¨æ–‡ä»¶æœ«å°¾ä½œä¸ºå‚è€ƒç‚¹ã€‚ # whence å¦‚æœçœç•¥åˆ™é»˜è®¤å€¼ä¸º 0ï¼Œå³ä½¿ç”¨æ–‡ä»¶å¼€å¤´ä½œä¸ºå‚è€ƒç‚¹ã€‚&gt;&gt;&gt;&gt;&gt;&gt; f = open('workfile', 'rb+')&gt;&gt;&gt; f.write(b'0123456789abcdef')16&gt;&gt;&gt; f.seek(5) # Go to the 6th byte in the file5&gt;&gt;&gt; f.read(1)b'5'&gt;&gt;&gt; f.seek(-3, 2) # Go to the 3rd byte before the end13&gt;&gt;&gt; f.read(1)b'd' 6.3 å¸¸è§æ–‡ä»¶ç±»å‹çš„è¯»å–æ–¹å¼ csvæ–‡ä»¶1234567with open('C:/users/lenovo/desktop/student_score.csv','r') as f: for line in f.readlines(): #é€è¡Œè¯»å– print(line)# æ›´åŠ é«˜æ•ˆçš„æ˜¯ä½¿ç”¨pandaè¯»å–æ•°æ®ï¼Œå­˜ä¸ºä¸€ä¸ªçŸ©é˜µçš„å½¢å¼import panda as pddata = pd.read_csv(sys.argv[1]) txtæ–‡ä»¶123456789with open('my_file.txt') as f: for line in f: #é€è¡Œè¯»å– print(line.strip()) #ä½¿ç”¨stripåˆ é™¤ç©ºæ ¼å’Œç©ºè¡Œï¼Œå¦åˆ™ä¼šæœ‰\\nåœ¨æœ€å# æ›´åŠ é«˜æ•ˆçš„æ˜¯ä½¿ç”¨numpyè¯»å–æ•°æ®,è½¬åŒ–ä¸€ä¸ªæ•°ç»„import numpy as npdataset = np.loadtxt('è·¯å¾„')dataset.shape( ) # æŸ¥çœ‹æ•°ç»„ç»´åº¦newset = reshape(dataset, (100,3)) # è½¬åŒ–ä¸º100è¡Œ 3åˆ—çš„æ•°ç»„ excleæ–‡ä»¶123456789101112131415import numpy as npimport xlrd #ä½¿ç”¨åº“å‡½æ•°workbook = xlrd.open_workbook('C:/users/lenovo/desktop/student_score.xlsx') #è¯»å–è·¯å¾„sheet = workbook.sheet_by_name('Sheet1') #è¯»å–excelä¸­çš„ç¬¬ä¸€ä¸ªsheetdata_name = sheet.col_values(0) #æŒ‰åˆ—è¯»å–ï¼Œè¯»å–ç¬¬ä¸€åˆ—#data_name1 = sheet.row_values(0) #æŒ‰è¡Œè¯»å–ï¼Œè¯»å–ç¬¬ä¸€è¡Œdata_st_ID = sheet.col_values(1)data_st_score = sheet.col_values(2)# æ›´åŠ é«˜æ•ˆçš„æ˜¯ä½¿ç”¨pandaè¯»å–æ•°æ®import pandas as pdtest_df = pd.read_excel(r'G:\\test.xlsx') matæ–‡ä»¶123456789101112131415import numpy as np import os os.chdir(r'F:/data')import scipy.io as sciodata = scio.loadmat('97.mat')print(data)de = data['X097_DE_time']è¯»å–çš„ç»“æœæ˜¯ä¸€ä¸ªå­—å…¸or from mat4py import loadmatimport numpy as npdata = np.array(loadmat('test.mat')['dictKey']).astype('float') 6.3 ä½¿ç”¨jsonä¿å­˜ç»“æ„åŒ–æ•°æ®123&gt;&gt;&gt; import json&gt;&gt;&gt; json.dumps([1, 'simple', 'list'])'[1, \"simple\", \"list\"]' 6.3.1 å°†æ•°æ®ä¿å­˜ä¸ºjsonæ–‡ä»¶ 1234model=&#123;&#125; #æ•°æ®with open(\"./hmm.json\",'w',encoding='utf-8') as json_file: json.dump(model,json_file,ensure_ascii=False) 6.3.2 ä»jsonæ–‡ä»¶è¯»å–æ•°æ® 1234567891011121314151617model=&#123;&#125; #å­˜æ”¾è¯»å–çš„æ•°æ®with open(\"./hmm.json\",'r',encoding='utf-8') as json_file: model=json.load(json_file)è¯»å–è¿”å›çš„ä¸ºpythonå­—å…¸or import json str_file = './960x540/config.json'with open(str_file, 'r') as f: print(\"Load str file from &#123;&#125;\".format(str_file)) r = json.load(f)print(type(r))print(r)print(r['under_game_score_y']) 7. pythonæ ‡å‡†åº“ ä¹Ÿå¯ä»¥æŸ¥çœ‹æ ‡å‡†åº“æ–‡æ¡£https://docs.python.org/zh-cn/3/tutorial/index.htmlhttps://docs.python.org/zh-cn/3/library/index.html","categories":[{"name":"python","slug":"python","permalink":"https://shyshy903.github.io/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://shyshy903.github.io/tags/python/"}]},{"title":"JavaåŸºç¡€ï¼ˆ4ï¼‰","slug":"java/shyjava(4)","date":"2019-11-22T16:00:00.000Z","updated":"2019-11-22T16:00:00.000Z","comments":true,"path":"2019/11/23/java/shyjava(4)/","link":"","permalink":"https://shyshy903.github.io/2019/11/23/java/shyjava(4)/","excerpt":"","text":"å¾ªç¯whileå¾ªç¯12345int i = 0;while (i &lt; 100) &#123; System.out.println(â€œWelcome to Java!â€); i++; //å¿…é¡»æœ‰è¯­å¥æ”¹å˜å¾ªç¯æ¡ä»¶&#125; do whileå¾ªç¯123456\"\"\"å¾ªç¯ä½“è‡³å°‘æ‰§è¡Œä¸€æ¬¡\"\"\"do statement or block while (loop-continuation-condition); for å¾ªç¯12345678910111213for (int i = 0; i &lt; 100; i++) &#123; System.out.println(â€œWelcome to Java!â€);&#125;forå¾ªç¯å¤´ä¸­çš„æ¯ä¸ªéƒ¨åˆ†å¯ä»¥æ˜¯é›¶ä¸ªæˆ–å¤šä¸ªä»¥é€—å¥åˆ†éš”çš„è¡¨è¾¾å¼ã€‚for (int i = 0, j = 0; i + j &lt; 10; i++, j++) &#123; System.out.println(â€œWelcome to Java!â€);&#125;å¦‚æœforå¾ªç¯ä¸­çš„loop-continuation-conditionè¢«çœç•¥ï¼Œåˆ™éšå«ä¸ºçœŸã€‚for (;;) &#123; while(true) &#123; //do something ç­‰ä»·äº //do something&#125; &#125; break ä¸ continue12break //è·³å‡ºå¾ªç¯continue //è·³å‡ºå½“å‰å¾ªç¯ï¼Œç»§ç»­å¾ªç¯ JDK1.5 å¢å¼ºçš„forå¾ªç¯12345678910111213JDK 1.5å¼•å…¥æ–°çš„forå¾ªç¯ï¼Œå¯ä»¥ä¸ç”¨ä¸‹æ ‡å°±å¯ä»¥ä¾æ¬¡è®¿é—®æ•°ç»„å…ƒç´ ã€‚è¯­æ³•ï¼šfor(elementType value : arrayRefVar) &#123;&#125;ä¾‹å¦‚for(int i = 0; i &lt; myList.length; i++) &#123; sum += myList[i];&#125;ïƒ³for(double value : myList) &#123; sum += value;&#125;","categories":[{"name":"java","slug":"java","permalink":"https://shyshy903.github.io/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://shyshy903.github.io/tags/java/"}]},{"title":"JavaåŸºç¡€ï¼ˆ3ï¼‰","slug":"java/shyjava(3)","date":"2019-11-21T16:00:00.000Z","updated":"2019-11-21T16:00:00.000Z","comments":true,"path":"2019/11/22/java/shyjava(3)/","link":"","permalink":"https://shyshy903.github.io/2019/11/22/java/shyjava(3)/","excerpt":"","text":"Shy-Learnjavaï¼ˆ3ï¼‰åŸºç¡€3 æ•°å­¦å‡½æ•°ã€å­—ç¬¦ä¸å­—ç¬¦ä¸²3.1 æ•°å­¦å‡½æ•°Mathæ˜¯finalç±»ï¼šåœ¨java.lang.Mathä¸­ï¼Œæ‰€æœ‰æ•°å­¦å‡½æ•°éƒ½æ˜¯é™æ€æ–¹æ³•123456789101112# Mathç±»ä¸­å®šä¹‰äº†å¸¸ç”¨çš„æ•°å­¦å¸¸é‡ï¼Œå¦‚PI : 3.14159265358979323846E : 2.7182818284590452354# æ–¹æ³•:æ³¨æ„éƒ½æ˜¯é™æ€å‡½æ•°# ä¸‰è§’å‡½æ•°sin, cos, tan, asin, acos, atan,toRadians,toDigrees# æŒ‡æ•°exp, log, log10ï¼Œpow, sqrt# å–æ•´ceil, floor, round# å…¶å®ƒmin, max, abs, randomï¼ˆ[0.0,1.0)) Math.randomæ–¹æ³•ç”Ÿæˆ[0.0,1.0)ä¹‹é—´çš„doubleç±»å‹çš„éšæœºæ•°123456å¦‚ï¼šï¼ˆintï¼‰(Math.random( )*10); //[0,10)50+(int)(Math.random( )*50); //[50,100)ä¸€èˆ¬åœ°a+(int)(Math.random( )*b) //è¿”å›[a, a+b)a+(int)(Math.random( )*ï¼ˆb+1ï¼‰) //è¿”å›[a, a+b]ç¼–å†™ç”Ÿæˆéšæœºå­—ç¬¦çš„æ–¹æ³•123456789101112131415161718Javaä¸­æ¯ä¸ªå­—ç¬¦å¯¹åº”ä¸€ä¸ªUnicodeç¼–ç ä»0000åˆ°FFFFã€‚ åœ¨ç”Ÿæˆä¸€ä¸ªéšæœºå­—ç¬¦ï¼Œå°±æ˜¯äº§ç”Ÿä¸€ä¸ªä»0åˆ°65535ä¹‹é—´çš„éšæœºæ•°ã€‚ æ‰€ä»¥, è®¡ç®—è¡¨è¾¾å¼ä¸ºï¼š(int)(Math.random( ) * (65535 + 1)) ã€‚è‹±æ–‡å¤§ã€å°å†™å­—æ¯çš„Unicodeæ˜¯ä¸€ä¸²è¿ç»­çš„æ•´æ•°ï¼Œå¦‚â€˜aâ€™çš„ç»Ÿä¸€ç æ˜¯: (int)â€˜aâ€™=97ç”±äºcharç±»å‹å¯è‡ªåŠ¨åœ°è¢«è½¬æ¢ä¸ºintç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹åº”ä½¿ç”¨å¦‚ä¸‹æ•´æ•°å€¼ï¼šâ€˜aâ€™=97, â€˜bâ€™=98ï¼Œ â€¦, â€˜zâ€™=122å› æ­¤ï¼Œéšæœºç”Ÿæˆä»â€˜aâ€™-â€˜zâ€™ä¹‹é—´çš„å­—ç¬¦å°±ç­‰äºç”Ÿæˆâ€˜aâ€™-â€˜zâ€™ä¹‹é—´çš„éšæœºæ•°ï¼Œå¯ç”¨â€˜aâ€™+ï¼ˆintï¼‰(Math.Random( ) * (â€˜zâ€™-â€™aâ€™+1))å°†ä¸Šé¢è®¨è®ºä¸€èˆ¬åŒ–ï¼ŒæŒ‰å¦‚ä¸‹è¡¨è¾¾å¼ï¼Œå¯ä»¥ç”Ÿæˆä»»æ„2ä¸ªå­—ç¬¦ch1å’Œch2ï¼ˆch1&lt;ch2ï¼‰ä¹‹é—´çš„éšæœºå­—ç¬¦(char)(ch1+(int)(Math.rabdom()*(ch2-ch1+1))) 3.2 å­—ç¬¦æ•°æ®ç±»å‹Unicodeå’ŒASCIIç 123456789Javaå¯¹å­—ç¬¦é‡‡ç”¨16ä½Unicodeç¼–ç ï¼Œå› æ­¤charç±»å‹çš„å¤§å°ä¸ºäºŒä¸ªå­—èŠ‚16ä½çš„Unicodeç”¨ä»¥\\uå¼€å¤´çš„4ä½16è¿›åˆ¶æ•°è¡¨ç¤ºï¼ŒèŒƒå›´ä»â€™\\u0000â€™åˆ°â€™\\uffffâ€™,ä¸èƒ½å°‘å†™ä½æ•°UnicodeåŒ…æ‹¬ASCIIç ï¼Œä»â€™\\u0000â€™åˆ°â€™\\u007fâ€™å¯¹åº”128ä¸ªASCIIå­—ç¬¦JAVAä¸­çš„ASCIIå­—ç¬¦ä¹Ÿå¯ä»¥ç”¨Unicodeè¡¨ç¤ºï¼Œä¾‹å¦‚char letter = â€˜Aâ€™ï¼›char letter = â€˜\\u0041â€™ï¼›//ç­‰ä»·ï¼Œ\\uåé¢å¿…é¡»å†™æ»¡4ä½16è¿›åˆ¶æ•°++å’Œ--è¿ç®—ç¬¦ä¹Ÿå¯ä»¥ç”¨åœ¨charç±»å‹æ•°æ®ä¸Šï¼Œè¿ç®—ç»“æœä¸ºè¯¥å­—ç¬¦ä¹‹åæˆ–ä¹‹å‰çš„å­—ç¬¦ï¼Œä¾‹å¦‚ä¸‹é¢çš„è¯­å¥æ˜¾ç¤ºå­—ç¬¦bchar ch = â€˜aâ€™;System.out.println(++ch); //æ˜¾ç¤ºbç‰¹æ®Šå­—ç¬¦è½¬ä¹‰12345å’ŒC++ä¸€æ ·ï¼Œé‡‡ç”¨åæ–œæ (\\)åé¢åŠ ä¸Šä¸€ä¸ªå­—ç¬¦æˆ–è€…ä¸€äº›æ•°å­—ä½ç»„æˆè½¬ä¹‰åºåˆ—ï¼Œä¸€ä¸ªè½¬ä¹‰åºåˆ—è¢«å½“åšä¸€ä¸ªå­—ç¬¦å¦‚\\n \\t \\b \\r \\f \\\\ \\' \\\"å¦‚æœæƒ³æ‰“å°å¸¦â€â€çš„ä¿¡æ¯ He said â€œJava is fun â€œSystem.out.println(â€œHe said \\â€Java is fun \\â€â€);å­—ç¬¦å‹å’Œæ•°æ®å‹çš„è½¬æ¢1234567891011121314151617181920charç±»å‹æ•°æ®å¯ä»¥è½¬æ¢æˆä»»æ„ä¸€ç§æ•°å€¼ç±»å‹ï¼Œåä¹‹äº¦ç„¶ã€‚å°†æ•´æ•°è½¬æ¢æˆcharç±»å‹æ•°æ®æ—¶ï¼Œåªç”¨åˆ°è¯¥æ•°æ®çš„ä½16ä½ï¼Œå…¶ä½™è¢«å¿½ç•¥ã€‚ä¾‹å¦‚char ch = ï¼ˆcharï¼‰0xAB0041ï¼› System.out.println(ch); //æ˜¾ç¤ºAè¦å°†æµ®ç‚¹æ•°è½¬æˆcharæ—¶ï¼Œå…ˆæŠŠæµ®ç‚¹æ•°è½¬æˆintå‹ï¼Œç„¶åå°†æ•´æ•°è½¬æ¢æˆchar char ch = ï¼ˆcharï¼‰65.25ï¼› System.out.println(ch); //æ˜¾ç¤ºAå½“ä¸€ä¸ªcharå‹è½¬æ¢æˆæ•°å€¼å‹æ—¶ï¼Œè¿™ä¸ªå­—ç¬¦çš„Unicodeç å°±è¢«è½¬æ¢æˆæŸç§ç‰¹å®šæ•°æ®ç±»å‹ int i = ï¼ˆintï¼‰â€˜Aâ€™ï¼› System.out.println(i); //æ˜¾ç¤º65å¦‚æœè½¬æ¢ç»“æœé€‚ç”¨äºç›®æ ‡å˜é‡ï¼ˆä¸ä¼šæœ‰ç²¾åº¦æŸå¤±ï¼‰ï¼Œå¯ä»¥é‡‡ç”¨éšå¼è½¬æ¢ï¼›å¦åˆ™å¿…é¡»å¼ºåˆ¶ç±»å‹è½¬æ¢ int i = â€˜Aâ€™ï¼› byte b = ï¼ˆbyteï¼‰â€˜\\uFFF4â€™; //å–ä½8ä½äºŒè¿›åˆ¶æ•°æ‰€æœ‰æ•°å€¼è¿ç®—ç¬¦éƒ½å¯ä»¥ç”¨åœ¨charå‹æ“ä½œæ•°ä¸Šï¼Œ å¦‚æœå¦ä¸€ä¸ªæ“ä½œæ•°æ˜¯æ•°å€¼ï¼Œé‚£ä¹ˆcharå‹æ“ä½œæ•°å°±è‡ªåŠ¨è½¬æ¢ä¸ºæ•°å€¼ï¼› å¦‚æœå¦å¤–ä¸€ä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆcharå‹æ“ä½œæ•°ä¼šè‡ªåŠ¨è½¬æ¢æˆå­—ç¬¦ä¸²å†å’Œå¦å¤–ä¸€ä¸ªæ“ä½œæ•°å­—ç¬¦ä¸²ç›¸è¿ int i = â€˜2â€™+ â€˜3â€™; System.out.printlnï¼ˆiï¼‰ï¼› // iä¸º50+51=101 int j = 2 + â€˜aâ€™ï¼› //j = 99 System.out.println(j + â€œ is the Unicode of â€+ (char)j);//99 is the Unicode of cå­—ç¬¦çš„æ¯”è¾ƒæµ‹è¯•12345678910111213ä¸¤ä¸ªå­—ç¬¦å¯ä»¥é€šè¿‡å…³ç³»è¿ç®—ç¬¦è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚åŒæ¯”è¾ƒäºŒä¸ªæ•°å€¼ï¼šé€šè¿‡å­—ç¬¦çš„Unicodeå€¼è¿›è¡Œæ¯”è¾ƒJavaä¸ºæ¯ä¸ªåŸºæœ¬ç±»å‹å®ç°äº†å¯¹åº”çš„åŒ…è£…ç±»ï¼Œcharç±»å‹çš„åŒ…è£…ç±»æ˜¯Characterç±»ã€‚æ³¨æ„åŒ…è£…ç±»å¯¹è±¡ä¸ºå¼•ç”¨ç±»å‹ï¼Œä¸æ˜¯å€¼ç±»å‹Characterç±»çš„ä½œç”¨å°†charç±»å‹çš„æ•°æ®å°è£…æˆå¯¹è±¡åŒ…å«å¤„ç†å­—ç¬¦çš„æ–¹æ³•å’Œå¸¸é‡æ–¹æ³•isDigitæ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯æ•°å­—isLetteræ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯å­—æ¯isLetterOrDigitæ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯å­—æ¯æˆ–æ•°å­—isLowerCaseæ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯å°å†™isUpperCaseæ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯å¤§å†™toLowerCaseæ–¹æ³•å°†ä¸€ä¸ªå­—ç¬¦è½¬æ¢æˆå°å†™toUpperCaseæ–¹æ³•å°†ä¸€ä¸ªå­—ç¬¦è½¬æ¢æˆå¤§å†™ 3.3 String ç±»ï¼Œä¸€ä¸ªfinalç±»123456789101112java.lang.Stringè¡¨ç¤ºä¸€ä¸ªå›ºå®šé•¿åº¦çš„å­—ç¬¦åºåˆ—ï¼Œå®ä¾‹åŒ–åå­—ç¬¦ä¸èƒ½æ”¹ã€‚æ„é€ å‡½æ•°é•¿åº¦(length)è·å–å­—ç¬¦(charAt)è¿æ¥(concat)æˆªå–(substring)æ¯”è¾ƒ(equals, equalsIgnoreCase, compareTo, startWith),endWith, regionMatch)è½¬æ¢(toLowerCase, toUpperCase, trim, replace)æŸ¥æ‰¾(indexOf, lastIndexOf)å­—ç¬¦ä¸²å’Œæ•°ç»„é—´è½¬æ¢(getChars, toCharArray), getCharsè¿”å›void,è¶…å‡ºé•¿åº¦å°±å¼‚å¸¸å­—ç¬¦ä¸²å’Œæ•°å­—é—´è½¬æ¢(valueOf) Stringç±»å¯¹è±¡çš„æ„é€ 12345678910111213141516ä»å­—é¢å€¼åˆ›å»ºå­—ç¬¦ä¸²String newString = new String(stringLiteral);ä¾‹å¦‚ï¼šString message = new String(\"Welcome to Java\");ç”±äºå­—ç¬¦ä¸²ç»å¸¸ä½¿ç”¨ï¼Œjavaæä¾›äº†åˆ›å»ºå­—ç¬¦ä¸²çš„ç®€å†™å½¢å¼ã€‚String newString = stringLiteral;ä¾‹å¦‚ï¼šString m1 = â€œWelcomeâ€; //m1å’Œm2ä¸­çš„å­—ç¬¦éƒ½æ˜¯ä¸å¯ä¿®æ”¹çš„String m2 = â€œWelcomeâ€; //æ•…m1å’Œm2å¯ä»¥ä¼˜åŒ–å¼•ç”¨åŒä¸€å¸¸é‡ï¼šm1==m2String m3 = \"Wel\" +\"come\";//m1==m2==m3 String m4 = \"Wel\" +new String(\"come\"); //m1!=m4å­—ç¬¦ä¸²å¯¹è±¡åˆ›å»ºä¹‹åï¼Œå…¶å†…å®¹æ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚String s = â€œjavaâ€;s = â€œHTMLâ€;String t =s; å­—ç¬¦ä¸²çš„æ¯”è¾ƒ1234567891011121314151617181920212223242526272829303132333435363738394041424344equalsæ–¹æ³•ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«ç›¸åŒçš„å†…å®¹ï¼ˆå­—ç¬¦åºåˆ—ï¼‰:ä¸¤ä¸ªå­—ç¬¦ä¸²å†…å®¹ç›¸åŒï¼Œè¿”å›trueä¸¤ä¸ªå­—ç¬¦ä¸²å†…å®¹ä¸åŒï¼Œè¿”å›falseæ¯”è¾ƒå­—ç¬¦ä¸²å†…å®¹ä¸èƒ½ç›´æ¥æ¯”è¾ƒäºŒä¸ªå¼•ç”¨å˜é‡ï¼Œæ¯”è¾ƒäºŒä¸ªå¼•ç”¨å˜é‡åªæ˜¯åˆ¤æ–­è¿™äºŒä¸ªå¼•ç”¨å˜é‡æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡equalsIngnoeCaseå¿½ç•¥å¤§å°å†™æ¯”è¾ƒå†…å®¹æ˜¯å¦ç›¸åŒregionMatchæ¯”è¾ƒéƒ¨åˆ†å†…å®¹æ˜¯å¦ç›¸åŒstartsWithåˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å§‹endsWithåˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²ç»“æŸcompareToæ–¹æ³•ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°ï¼Œå³ç¬¬ä¸€ä¸ªä¸åŒå­—ç¬¦çš„å·®å€¼ã€‚s1.compareTo(s2)çš„è¿”å›å€¼:å½“ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸åŒæ—¶ï¼Œè¿”å›ï¼å½“s1æŒ‰å­—å…¸æ’åºåœ¨s2ä¹‹å‰ï¼Œè¿”å›å°äºï¼çš„å€¼å½“s1æŒ‰å­—å…¸æ’åºåœ¨s2ä¹‹åï¼Œè¿”å›å¤§äºï¼çš„å€¼String s0 = \"Java\";String s1 = \"Welcome to \" + s0;String s2 = \"Welcome to Java\";String s3 = \"welcome to java\";String s6 = \"Welcome to Java\";// equalsç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒSystem.out.println(\"s1.equals(s2) is \" + s1.equals(s2)); //true// equalsIgnoreCaseå¿½ç•¥å¤§å°å†™System.out.println(\"s2.equals(s3) is \" + s2.equals(s3)); //falseSystem.out.println(\"s2.equalsIgnoreCase(s3) is \" + s2.equalsIgnoreCase(s3)); //true// regionMatchesæ¯”è¾ƒéƒ¨åˆ†å­—ç¬¦ä¸²: ç»™å®šä¸¤ä¸ªä¸²çš„èµ·å§‹ä½ç½®å’Œé•¿åº¦System.out.println(\"s2.regionMatches(11, s0, 0, 4) is \" + s2.regionMatches(11, s0, 0, 4)); //trueSystem.out.println(\"s3.regionMatches(11, s0, 0, 4) is \" + s3.regionMatches(11, s0, 0, 4));//falseSystem.out.println(\"s3.regionMatches(true, 11, s0, 0, 4) is \" + s3.regionMatches(true, 11, s0, 0, 4));//true,å¿½ç•¥å¤§å°å†™String s0 = \"Java\";String s1 = \"Welcome to \" + s0;String s2 = \"Welcome to Java\";String s3 = \"welcome to java\";String s6 = \"Welcome to Java\";// startsWithåˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å§‹// endsWithåˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²ç»“æŸSystem.out.println(\"s2.startsWith(s0) is \" + s2.startsWith(s0));//falseSystem.out.println(\"s2.endsWith(s0) is \" + s2.endsWith(s0)); //true // compareToæ ¹æ®å­—å…¸æ’åºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²String s4 = \"abc\";String s5 = \"abe\";System.out.println(\"s4.compareTo(s5) is \" + s4.compareTo(s5));//-2å­—ç¬¦ä¸²æ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243è°ƒç”¨length( )æ–¹æ³•å¯ä»¥è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ä¾‹å¦‚ï¼šmessage.length( )è¿”å›15charAt(index)æ–¹æ³•å¯ä»¥è·å–æŒ‡å®šä½ç½®çš„å­—ç¬¦ã€‚indexå¿…é¡»åœ¨0åˆ°s.length()-1ä¹‹é—´ã€‚ä¾‹å¦‚ï¼šmessage.charAt(0)è¿”å›å­—ç¬¦â€™Wâ€™concatæ–¹æ³•ç”¨äºè¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼šString s3 = s1.concat(s2);ä½¿ç”¨åŠ å·(+)è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼šString s3 = s1 + s2;s1 + s2 + s3 ç­‰ä»·äºs1.concat(s2).concat(s3)è¿æ¥æ“ä½œè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå› ä¸ºStringç±»å‹çš„å®ä¾‹ä¸å¯ä¿®æ”¹ã€‚substringç”¨äºæˆªå–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œè¿”å›æ–°å­—ç¬¦ä¸²ã€‚public String substring(int beginIndex, int endIndex)è¿”å›å­—ç¬¦ä¸²çš„å­ä¸²ã€‚å­ä¸²ä»beginIndexå¼€å§‹ï¼Œç›´åˆ°endIndex-1public String substring(int beginIndex)è¿”å›å­—ç¬¦ä¸²çš„å­ä¸²ã€‚å­ä¸²ä»beginIndexå¼€å§‹ï¼Œç›´åˆ°å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚toLowerCaseå°†å­—ç¬¦ä¸²è½¬æ¢æˆå°å†™å½¢å¼ï¼Œå¾—åˆ°æ–°ä¸²toUpperCaseå°†å­—ç¬¦ä¸²è½¬æ¢æˆå¤§å†™å½¢å¼ï¼Œå¾—åˆ°æ–°ä¸²trimåˆ é™¤ä¸¤ç«¯çš„ç©ºæ ¼ï¼Œå¾—åˆ°æ–°ä¸²replaceå­—ç¬¦æ›¿æ¢ï¼Œå¾—åˆ°æ–°ä¸²String s0 = \"Java\";String s1 = \" Welcome to Java \";// toLowerCaseå°†å­—ç¬¦ä¸²è½¬æ¢æˆå°å†™å½¢å¼System.out.println(\"s1.toLowerCase() is \" + s1.toLowerCase()); // toUpperCaseå°†å­—ç¬¦ä¸²è½¬æ¢æˆå¤§å†™å½¢å¼System.out.println(\"s1.toUpperCase() is \" + s1.toUpperCase()); // trimåˆ é™¤ä¸¤ç«¯çš„ç©ºæ ¼System.out.println(\"s1.trim() is \" + s1.trim( )); // replaceå­—ç¬¦æ›¿æ¢System.out.println(â€œs1.replace(s0, \\â€HTML\\â€œ) is â€ + s1.replace(s0, â€œHTMLâ€)); //Welcome to HTML// indexOfè¿”å›å­—ç¬¦ä¸²ä¸­å­—ç¬¦æˆ–å­—ç¬¦ä¸²åŒ¹é…çš„ä½ç½®ï¼Œè¿”å›-1è¡¨ç¤ºæœªæ‰¾åˆ°ã€‚\"Welcome to Java\".indexOf('W') returns 0\"Welcome to Java\".indexOf('x') returns -1\"Welcome to Java\".indexOf('oâ€˜,5) returns 9\"Welcome to Java\".indexOf(\"come\") returns 3\"Welcome to Java\".indexOf(\"Java\", 5) returns 11\"Welcome to Java\".indexOf(\"java\", 5) returns -1\"Welcome to Java\".lastIndexOf('a') returns 1412345678910111213141516171819202122232425262728293031323334353637383940414243444546toCharArrayå°†å­—ç¬¦ä¸²è½¬æ¢æˆå­—ç¬¦æ•°ç»„ String s = â€œJavaâ€; char[ ] charArray = s.toCharArray( );// charArray.length=4å°†å­—ç¬¦æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²ä½¿ç”¨Stringçš„æ„é€ å‡½æ•°ï¼Œå¯åŒæ—¶åˆå§‹åŒ– new String(new char[ ] &#123;â€˜Jâ€™,â€˜aâ€™,â€˜vâ€™,â€˜aâ€™&#125; );ä½¿ç”¨valueOfæ–¹æ³• String.valueOf(new char[ ] &#123;â€˜Jâ€™,â€˜aâ€™,â€˜vâ€™,â€˜aâ€™&#125;); String.valueOf(2.34);valueOfæ–¹æ³•å°†åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ String s1 = String.valueOf(1.0); //â€œï¼‘.0â€ String s2 = String.valueOf(true); //â€œtrueâ€å­—ç¬¦ä¸²è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹ Double.parseDouble(str) Integer.parseInt(str) Boolean.parseBoolean(str)å›æ–‡æ˜¯æŒ‡é¡ºè¯»å’Œå€’è¯»éƒ½ä¸€æ ·çš„è¯è¯­ã€‚ä¾‹å¦‚â€œmomâ€, â€œdadâ€, â€noonâ€éƒ½æ˜¯å›æ–‡ã€‚ç¼–å†™ç¨‹åºï¼Œåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡ã€‚public class CheckPalindrome &#123; public static boolean isPalindrome(String s) &#123; // The index of the first character in the string int low = 0; // The index of the last character in the string int high = s.length( ) - 1; while (low &lt; high) &#123; if (s.charAt(low) != s.charAt(high)) return false; // Not a palindrome low++; high--; &#125; return true; // The string is a palindrome &#125;&#125;public class CheckPalindrome &#123; /** Main method */ public static void main(String[] args) &#123; // Prompt the user to enter a string String s = JOptionPane.showInputDialog(\"Enter a string:\"); String output = \"\"; if (isPalindrome(s)) output = s + \" is a palindrome\"; else output = s + \" is not a palindrome\"; // Display the result JOptionPane.showMessageDialog(null, output); &#125;&#125;StringBuilderä¸StringBuffer1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768Stringç±»ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œå­—ç¬¦ä¸²å°±æ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚StringBuilderä¸StringBuffer(finalç±»ï¼‰åˆå§‹åŒ–åè¿˜å¯ä»¥ä¿®æ”¹å­—ç¬¦ä¸²ã€‚StringBufferä¿®æ”¹ç¼“å†²åŒºçš„æ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œæ›´é€‚åˆå¤šä»»åŠ¡ç¯å¢ƒã€‚StringBuilderåœ¨å•ä»»åŠ¡æ¨¡å¼ä¸‹ä¸StringBufferå·¥ä½œæœºåˆ¶ç±»ä¼¼ã€‚ç”±äºå¯ä¿®æ”¹å­—ç¬¦ä¸²ï¼Œ StringBuilder ä¸StringBuffer å¢åŠ äº†Stringç±»æ²¡æœ‰çš„ä¸€äº›å‡½æ•°ï¼Œä¾‹å¦‚ï¼šappendã€insertã€deleteã€replaceã€reverseã€setCharAtç­‰ã€‚ä»…ä»¥StringBuilderä¸ºä¾‹ï¼šStringBuilder stringMy=new StringBuilder( );StringMy.append(â€œWelcome toâ€); StringMy.append(â€œ Javaâ€);StringBufferç”¨äºå¤„ç†å¯å˜å†…å®¹çš„å­—ç¬¦ä¸²ã€‚appendæ–¹æ³•åœ¨å­—ç¬¦ä¸²çš„ç»“å°¾è¿½åŠ æ•°æ®insertæ–¹æ³•åœ¨æŒ‡å®šä½ç½®ä¸Šæ’å…¥æ•°æ®reverseæ–¹æ³•ç¿»è½¬å­—ç¬¦ä¸²replaceæ–¹æ³•æ›¿æ¢å­—ç¬¦toStringæ–¹æ³•è¿”å›Stringå¯¹è±¡capacityæ–¹æ³•è¿”å›ç¼“å†²åŒºçš„å®¹é‡lengthæ–¹æ³•è¿”å›ç¼“å†²åŒºä¸­å­—ç¬¦çš„ä¸ªæ•°setLengthæ–¹æ³•è®¾ç½®ç¼“å†²åŒºçš„é•¿åº¦charAtæ–¹æ³•è¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦setCharAtæ–¹æ³•è®¾ç½®æŒ‡å®šä½ç½®çš„å­—ç¬¦æ‰€æœ‰å¯¹StringBufferå¯¹è±¡å†…å®¹è¿›è¡Œä¿®æ”¹çš„æ–¹æ³•ï¼Œéƒ½è¿”å›æŒ‡å‘ç›¸åŒStringBufferå¯¹è±¡çš„å¼•ç”¨StringBuffer bf = new StringBuffer();StringBuffer bf1 = bf.append(\"Welcome \"); StringBuffer bf2 = bf.append(\"to \");StringBuffer bf3 = bf.append(\"Java\");assert(bf==bf1 &amp;&amp; bf==bf2 &amp;&amp; bf == bf3);å› æ­¤ä»¥ä¸Šè¯­å¥å¯ä»¥ç›´æ¥å†™æˆï¼šbf.append(\"Welcome \").append(\"to \").append(\"Java\");// è¿½åŠ StringBuffer bf = new StringBuffer();bf.append(â€œWelcomeâ€);bf.append(â€˜ â€˜);bf.append(â€œto â€);bf.append(â€œJavaâ€);System.out.println(bf.toString()); //Welcome to Java//æ’å…¥bf.insert(11,â€HTML and â€) //Welcome to HTML and JAVA//åˆ é™¤bf.delete(8,11); //Welcome Javabf.deleteCharAt(8);//Welcome o Javabf.reverse(); //avaJ ot emocleWbf.replaceï¼ˆ11ï¼Œ15ï¼Œâ€œHTMLâ€ï¼‰;//Welcome to HTMLbf.setCharAt(0,â€™wâ€™);//welcome to javatoString(): ä»ç¼“å†²åŒºè¿”å›å­—ç¬¦ä¸²capacity()ï¼šè¿”å›ç¼“å†²åŒºå®¹é‡ã€‚length &lt;= capacity å½“å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡ç¼“å†²åŒºå®¹é‡ï¼Œcapacityä¼šè‡ªåŠ¨å¢åŠ length()ï¼šè¿”å›ç¼“å†²åŒºä¸­å­—ç¬¦æ•°é‡setLength(newLength)ï¼šè®¾ç½®ç¼“å†²åŒºé•¿åº¦charAt(index)ï¼šè¿”å›ä¸‹æ ‡ä¸ºindexçš„å­—ç¬¦// ç¼–å†™ç¨‹åºï¼Œæ£€æŸ¥å›æ–‡ï¼Œå¹¶å¿½ç•¥ä¸æ˜¯å­—æ¯å’Œæ•°å­—çš„å­—ç¬¦ã€‚è§£å†³æ–¹æ¡ˆåˆ›å»ºä¸€ä¸ªæ–°çš„StringBufferï¼Œå°†å­—ç¬¦ä¸²çš„å­—æ¯å’Œæ•°å­—æ·»åŠ åˆ°StringBufferä¸­ï¼Œè¿”å›è¿‡æ»¤åçš„Stringå¯¹è±¡ã€‚ç¿»è½¬è¿‡æ»¤åçš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸è¿‡æ»¤åçš„å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå†…å®¹ç›¸åŒåˆ™æ˜¯å›æ–‡ã€‚public static boolean isPalindrome(String s) &#123; // Create a new string that is the reversal of s String s2 = reverse(s); // Compare if the reversal is the same as the original string return s2.equals(s); &#125;public static String reverse(String s) &#123; StringBuffer strBuf = new StringBuffer(s); strBuf.reverse(); return strBuf.toString(); &#125; 3.4 æ ¼å¼åŒ–æ§åˆ¶å°è¾“å…¥è¾“å‡º1234567891011121314151617181920212223JDK1.5æä¾›äº†æ ¼å¼åŒ–æ§åˆ¶å°è¾“å‡ºæ–¹æ³•System.out.printf(format, item1, item2, â€¦);æ ¼å¼åŒ–å­—ç¬¦ä¸²String.format(format, item1, item2, â€¦);æ ¼å¼æè¿°ç¬¦%b å¸ƒå°”å€¼%c å­—ç¬¦%d åè¿›åˆ¶æ•´æ•°%f æµ®ç‚¹æ•°%e ç§‘å­¦è®¡æ•°æ³•%s å­—ç¬¦ä¸²String.format(â€œæ ¼å¼$ï¼š%1$d,%2$sâ€, 99,â€œabcâ€); //ç»“æœâ€æ ¼å¼$ï¼š99ï¼Œabcâ€œpublic class TestPrintf &#123; public static void main(String[] args) &#123; System.out.printf(\"boolean : %6b\\n\", false); System.out.printf(\"boolean : %6b\\n\", true); System.out.printf(\"character : %4c\\n\", 'a'); System.out.printf(\"integer : %6d, %6d\\n\", 100, 200); System.out.printf(\"double : %7.2f\\n\", 12.345); System.out.printf(\"String : %7s\\n\", \"hello\"); &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"https://shyshy903.github.io/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://shyshy903.github.io/tags/java/"}]},{"title":"JavaåŸºç¡€ï¼ˆ2ï¼‰","slug":"java/shyjava(2)","date":"2019-11-20T16:00:00.000Z","updated":"2019-11-20T16:00:00.000Z","comments":true,"path":"2019/11/21/java/shyjava(2)/","link":"","permalink":"https://shyshy903.github.io/2019/11/21/java/shyjava(2)/","excerpt":"","text":"Shy-Learnjavaï¼ˆ2ï¼‰åŸºç¡€2 é€‰æ‹©2.1 å¸ƒå°”ç±»å‹å’Œé€»è¾‘è¿ç®—ç¬¦12345678booleanç±»å‹çš„å€¼æœ‰çœŸ(true)æˆ–å‡(false)ã€‚å…³ç³»è¿ç®—ç¬¦: &lt;, &lt;=, &gt;, &gt;=, ==, !=å…³ç³»è¿ç®—ç¬¦çš„è®¡ç®—ç»“æœæ˜¯booleanç±»å‹booleanç±»å‹ä¸èƒ½ä¸å…¶å®ƒæ•°æ®ç±»å‹æ··åˆè¿ç®—å¸ƒå°”è¿ç®—ç¬¦: !, &amp;&amp;, ||, ^, &amp;, | &amp;&amp; , ||ä¸ºæ¡ä»¶é€»è¾‘è¿ç®—ç¬¦: (x&gt;0) &amp;&amp; (x&lt;9)&amp;ï¼Œ|ä¸ºæ— æ¡ä»¶é€»è¾‘è¿ç®—ç¬¦ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä½æ“ä½œç¬¦^ å¼‚æˆ– 2.2 ifè¯­å¥12345678910111213141516171819202122232425262728293031323334353637if (radius &gt;= 0) &#123; area = radius * radius * PI; System.out.println(\"The area for the circle of radius \" + radius + \" is \" + area);&#125;if (radius &gt;= 0) &#123; area = radius * radius * 3.14159; System.out.println(\"The area for the circle of radius \" + radius + \" is \" + area);&#125; else &#123; System.out.println(\"Negative input\"); &#125;if (score &gt; 90.0) grade = â€˜Aâ€™;else if (score &gt;= 80.0) grade = â€˜Bâ€™;else if (scroe &gt;= 70.0) grade = â€˜Câ€™;else if (score &gt;= 60.0) grade = â€˜Dâ€™;else grade = â€˜Fâ€™// é«˜æ‰‹çš„ifif (number % 2 == 0) even = true;else even = false;//æ–°æ‰‹ç­‰ä»·äºeven = (number % 2 == 0);//é«˜æ‰‹if (even == true) System.out.println(â€œIt is even.â€);ç­‰ä»·äºif (even) System.out.println(â€œIt is even.â€); 2.3 æ¡ä»¶è¯­å¥ swithè¯­å¥ 1234567891011switch(expression) &#123; case value1 : statement(s) break; case value2 : statement(s) break; â€¦ default : statement(s)&#125; æ¡ä»¶è¡¨è¾¾å¼ 12max = (num1 &gt; num2) ? num1 : num2; 2.4 æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å’Œè¡¨è¾¾å¼è§„åˆ™123456789101112131415161718æ‹¬å·ä¼˜å…ˆçº§æœ€é«˜ï¼Œå¦‚æœæ‹¬å·æœ‰åµŒå¥—ï¼Œå†…éƒ¨æ‹¬å·ä¼˜å…ˆæ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰æ‹¬å·ï¼Œåˆ™æ ¹æ®æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å’Œç»“åˆè§„åˆ™ç¡®å®šæ‰§è¡Œé¡ºåºã€‚å¦‚æœç›¸é‚»çš„æ“ä½œç¬¦æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§ï¼Œåˆ™æ ¹æ®ç»“åˆè§„åˆ™ç¡®å®šæ‰§è¡Œé¡ºåºã€‚é™¤èµ‹å€¼è¿ç®—ç¬¦ä¹‹å¤–çš„äºŒå…ƒè¿ç®—ç¬¦éƒ½æ˜¯å·¦ç»“åˆçš„ã€‚èµ‹å€¼è¿ç®—ç¬¦å’Œ?:è¿ç®—ç¬¦æ˜¯å³ç»“åˆçš„ã€‚ä¾‹å¦‚ï¼ša+b-c+d ç­‰ä»·äº ((a+b)-c)+da=b+=c=5 ç­‰ä»·äº a=(b+=(c=5))æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å’Œç»“åˆè§„åˆ™åªè§„å®šäº†æ“ä½œç¬¦çš„æ‰§è¡Œé¡ºåºã€‚æ“ä½œæ•°ä»å·¦è‡³å³è¿›è¡Œè¿ç®—ã€‚äºŒå…ƒæ“ä½œç¬¦å·¦è¾¹çš„æ“ä½œæ•°æ¯”å³è¾¹çš„æ“ä½œæ•°ä¼˜å…ˆè¿ç®—ã€‚ä¾‹å¦‚ï¼šint a = 0;int x = a + (++a);xçš„ç»“æœä¸º1int a = 0;int x = (++a) + a;xçš„ç»“æœä¸º2 è¡¨è¾¾å¼è§„åˆ™123456789101112è§„åˆ™å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œä»å·¦å‘å³è®¡ç®—æ‰€æœ‰å­è¡¨è¾¾å¼æ ¹æ®è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§è¿›è¡Œè¿ç®—ä¼˜å…ˆçº§ç›¸åŒçš„è¿ç®—ç¬¦ï¼Œæ ¹æ®ç»“åˆæ–¹å‘è¿›è¡Œè¿ç®—3 + 4 * 4 &gt; 5 * (4 + 3) - 1 çš„æ‰§è¡Œé¡ºåºä¸ºï¼š 3 + 4 * 4 &gt; 5 * (4 + 3) - 1 3 + 4 * 4 &gt; 5 * 7 â€“ 1 3 + 16 &gt; 5 * 7 â€“ 1 3 + 16 &gt; 35 â€“ 1 19 &gt; 35 â€“ 1 19 &gt; 34 false","categories":[{"name":"java","slug":"java","permalink":"https://shyshy903.github.io/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://shyshy903.github.io/tags/java/"}]},{"title":"JavaåŸºç¡€ï¼ˆ1ï¼‰","slug":"java/shyjava(1)","date":"2019-11-19T16:00:00.000Z","updated":"2019-11-19T16:00:00.000Z","comments":true,"path":"2019/11/20/java/shyjava(1)/","link":"","permalink":"https://shyshy903.github.io/2019/11/20/java/shyjava(1)/","excerpt":"","text":"ä»ä»Šå¤©å¼€å§‹å¤ä¹ java Shy-Learnjavaï¼ˆ1ï¼‰åŸºç¡€0 ç¼–ç¨‹é£æ ¼ æ³¨é‡Š ç±»å’Œæ–¹æ³•å‰ä½¿ç”¨æ–‡æ¡£æ³¨é‡Š æ–¹æ³•æ­¥éª¤å‰ä½¿ç”¨è¡Œæ³¨é‡Šã€‚ å‘½å å˜é‡å’Œæ–¹æ³•åä½¿ç”¨å°å†™ï¼Œå¦‚æœæœ‰å¤šä¸ªå•è¯ï¼Œç¬¬ä¸€ä¸ªå•è¯é¦–å­—æ¯å°å†™ï¼Œå…¶å®ƒå•è¯é¦–å­—æ¯å¤§å†™ã€‚ ç±»åçš„æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™ã€‚ å¸¸é‡ä½¿ç”¨å¤§å†™ï¼Œå•è¯é—´ä»¥ä¸‹åˆ’çº¿åˆ†éš”ã€‚ ç¼©è¿›ã€ç©ºæ ¼ã€å—æ ·å¼ï¼ˆåœ¨eclipseä¸­ä½¿ç”¨ctrl+shift+fï¼‰ 1 åŸºæœ¬ç¨‹åºè®¾è®¡ ç¼–å†™ä¸€ä¸ªç¨‹åº12345678public class ComputeArea&#123; public static void main(String[] args)&#123; double raidus; double area; area = radius * raidus * 3.14 System.out.println(\"The area of the circle of raius\" + radius + \"is\" + area); &#125;&#125; 1.1 æ ‡å‡†è¾“å…¥ä¸è¾“å‡º æ ‡å‡†è¾“å…¥12System.out //æ ‡å‡†è¾“å‡ºæµç±»OutputStremçš„å¯¹è±¡System.in //æ ‡å‡†è¾“å…¥æµç±»InputStremçš„å¯¹è±¡ Scannerç±»1234567891011import java.util.ScannerScanner input = new Scanner(System.in)double d = input.nextDouble();// æ–¹æ³•æœ‰nextByte()nextShort()nextInt()nextLong()nextFloat()nextDouble()next() // è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸² 1.2 æ ‡è¯†ç¬¦ã€å¸¸é‡ä¸å˜é‡ æ ‡è¯†ç¬¦å‘½åè§„åˆ™ æ ‡è¯†ç¬¦æ˜¯ç”±å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿(_)ã€ç¾å…ƒç¬¦å·($)ç»„æˆçš„å­—ç¬¦åºåˆ—ã€‚ æ ‡è¯†ç¬¦å¿…é¡»ä»¥å­—æ¯ã€ä¸‹åˆ’çº¿(_)ã€ç¾å…ƒç¬¦å·($)å¼€å¤´ã€‚ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚æ ‡è¯†ç¬¦ä¸èƒ½æ˜¯ä¿ç•™å­—ã€‚ æ ‡è¯†ç¬¦ä¸èƒ½ä¸ºtrueã€falseæˆ–nullç­‰äº‹å®ä¸Šçš„ä¿ç•™å­—ï¼ˆå‚è§è‹±æ–‡ç»´åŸºç½‘ï¼‰ æ ‡è¯†ç¬¦å¯ä»¥ä¸ºä»»æ„é•¿åº¦ï¼Œä½†ç¼–è¯‘é€šå¸¸åªæ¥å—å‰128å­—ç¬¦ ä¾‹å¦‚ï¼š$2, area, radius, showMessageDialogæ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦ï¼›2A, d+4æ˜¯éæ³•çš„æ ‡è¯†ç¬¦ javaä¿ç•™å­—1234567891011abstract default if package this assert do goto private throw boolean double implements protected throws break else import public transient(éåºåˆ—åŒ–)byte enum instanceof return truecase extends int short trycatch false interface static voidchar final long strictfp(ä¸¥æ ¼æµ®ç‚¹) volatile class finally native(æœ¬åœ°æ–¹æ³•) super whileconst float new switch continue for null synchronized javaå¸¸é‡123456final datatype CONSTANT_NAME = value;//æ³¨æ„å¸¸é‡çš„å£°æ˜å’Œåˆå§‹åŒ–å¿…é¡»åŒæ—¶å®Œæˆfinal double PI = 3.14159;// é¿å…é‡å¤è¾“å…¥// ä¾¿äºç¨‹åºä¿®æ”¹// ä¾¿äºç¨‹åºé˜…è¯» 1.3 èµ‹å€¼è¯­å¥ä¸åŸºæœ¬è¡¨è¾¾å¼ èµ‹å€¼è¯­å¥ 123456789101112131415// èµ‹å€¼è¯­å¥å³è¯»i = j = k = 1;//ä¸è¦è®¤ä¸ºi, j, kçš„å€¼ä¸å˜ï¼Œvolatileç±»å‹çš„å˜é‡å€¼å¯å˜k = 1;j = k; i = j;//è¯­æ³•datatype variable = expression;//ä¾‹å¦‚ï¼šint x = 1; //æŸäº›å˜é‡åœ¨ç”³æ˜æ—¶å¿…é¡»åŒæ—¶åˆå§‹åŒ–ï¼šfinal int m=0;int x = 1, y = 2;//å±€éƒ¨å˜é‡åœ¨ä½¿ç”¨å‰å¿…é¡»èµ‹å€¼ã€‚int x, y; //è‹¥æ˜¯æˆå‘˜å˜é‡ï¼Œx, yæœ‰é»˜è®¤å€¼=0y = x + 1; //å±€éƒ¨å˜é‡æ— é»˜è®¤å€¼åˆ™é”™error 1.4 java æ•°æ®ç±»å‹ æ•°å€¼æ•°æ®ç±»å‹ 123456789101112131415161718192021222324252627282930313233æ•´æ•°byte 8ä½å¸¦ç¬¦å·æ•´æ•°(-128 åˆ° 127)short 16ä½å¸¦ç¬¦å·æ•´æ•°(-32768 åˆ° 32767)int 32ä½å¸¦ç¬¦å·æ•´æ•°(-2147483648 åˆ° 2147483647)long 64ä½å¸¦ç¬¦å·æ•´æ•°(-9223372036854775808 åˆ°9223372036854775807)æµ®ç‚¹æ•°float 32ä½æµ®ç‚¹æ•°(è´Ÿæ•° -3.4Ã—1038åˆ°-1.4Ã—10-45 æ­£æ•° 1.4Ã—10-45åˆ°3.4Ã—1038 )double 64ä½æµ®ç‚¹æ•°(è´Ÿæ•° -1.8Ã—10308åˆ°-4.9Ã—10-324 æ­£æ•° 4.9Ã—10-324åˆ°1.8Ã—10308)åŠ (+)ã€å‡(-)ã€ä¹˜(*)ã€é™¤(/)ã€æ±‚ä½™(%)ï¼šæ³¨æ„+ï¼Œ-çš„ä¼˜å…ˆçº§è¾ƒä½int a = 34 + 1; // 35double b = 34.0 â€“ 0.1; // 33.9long c = 300 * 30; // 9000double d = 1.0 / 2.0; // 0.5: æ­¤å¤„ä¸ºæµ®ç‚¹é™¤int e = 1 / 2; // 0: æ­¤å¤„ä¸ºæ•´é™¤byte f = 20 % 3; // 2: å–ä½™æ•°æ•´æ•°ç›¸é™¤çš„ç»“æœè¿˜æ˜¯æ•´æ•°ï¼Œçœç•¥å°æ•°éƒ¨åˆ†ã€‚int i = 5 / 2 // 2int j = -5 / 2 // -2å­—é¢å€¼æ˜¯ç›´æ¥å‡ºç°åœ¨ç¨‹åºä¸­çš„å¸¸é‡å€¼ã€‚int i = 34;long k = 100000L; æ•´æ•°å­—é¢å€¼ä»¥0å¼€å¤´è¡¨ç¤ºå…«è¿›åˆ¶ï¼Œå¦‚035ï¼›ä»¥0xæˆ–0Xå¼€å¤´è¡¨ç¤ºåå…­è¿›åˆ¶ï¼Œå¦‚0x1D,0X1dï¼›ä»¥1-9å¼€å¤´è¡¨ç¤ºåè¿›åˆ¶ï¼Œå¦‚29åç¼€å­—æ¯ï¼šä»¥læˆ–Lç»“å°¾è¡¨ç¤ºlongç±»å‹ï¼Œå¦‚29Lï¼›å…¶å®ƒè¡¨ç¤ºintç±»å‹ã€‚æµ®ç‚¹æ•°å­—é¢å€¼æµ®ç‚¹æ•°æ˜¯åŒ…å«å°æ•°ç‚¹çš„åè¿›åˆ¶æ•°ï¼Œåè·Ÿå¯é€‰çš„æŒ‡æ•°éƒ¨åˆ†ã€‚å¦‚ 18. 1.8e1 .18E2åç¼€å­—æ¯ï¼šä»¥dæˆ–Dç»“å°¾æˆ–è€…æ— åç¼€è¡¨ç¤ºdoubleç±»å‹ï¼›ä»¥fæˆ–Fç»“å°¾è¡¨ç¤ºfloatç±»å‹ æ“ä½œè¿ç®—ç¬¦ 12345678910111213å¸¸ç”¨ç®€æ´æ“ä½œç¬¦, ç»“æœå‡ä¸ºå³å€¼ã€‚ æ“ä½œç¬¦ ä¸¾ä¾‹ ç­‰ä»·äº += i += 8 i = i + 8 -= f -= 8.0 f = f - 8.0 *= i *= 8 i = i * 8 /= i /= 8 i = i / 8 %= i %= 8 i = i % 8é€’å¢å’Œé€’å‡è¿ç®—ç¬¦ï¼š++, --ã€‚ç»“æœå‡ä¸ºå³å€¼ã€‚å‰ç¼€è¡¨ç¤ºå…ˆåŠ (å‡)1åä½¿ç”¨åç¼€è¡¨ç¤ºå…ˆä½¿ç”¨ååŠ (å‡) 1 int i =10; //i=++i + ++i; ç»“æœä¸º23 int newNum= 10 * i++; //newNum = 100, i = 11 int newNum= 10 * ++i; //newNum = 110, i = 11 æ•°å€¼ç±»å‹è½¬æ¢ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647å¦‚æœäºŒå…ƒæ“ä½œç¬¦çš„ä¸¤ä¸ªæ“ä½œæ•°çš„æ•°æ®ç±»å‹ä¸åŒï¼Œé‚£ä¹ˆæ ¹æ®ä¸‹é¢çš„è§„åˆ™å¯¹æ“ä½œæ•°è¿›è¡Œè½¬æ¢ï¼šå¦‚æœæœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯doubleç±»å‹ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºdoubleç±»å‹ã€‚å¦åˆ™ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯floatç±»å‹ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºfloatç±»å‹ã€‚å¦åˆ™ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯longç±»å‹ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºlongç±»å‹ã€‚å¦åˆ™ï¼Œä¸¤ä¸ªæ“ä½œæ•°éƒ½è½¬æ¢ä¸ºintç±»å‹ã€‚æ•°æ®è½¬æ¢æ€»æ˜¯å‘è¾ƒå¤§èŒƒå›´çš„æ•°æ®ç±»å‹è½¬æ¢ï¼Œé¿å…ç²¾åº¦æŸå¤±long k = i * 3 + 4; //iå˜æˆintå‚ä¸å³è¾¹è¡¨è¾¾å¼è®¡ç®—ï¼Œè®¡ç®—ç»“æœè½¬longdouble d = i * 3.1 + k / 2; //iè½¬doubleï¼Œ k/2è½¬doubleå°†å€¼èµ‹å€¼ç»™è¾ƒå¤§å–å€¼èŒƒå›´çš„å˜é‡æ—¶ï¼Œè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚byte â†’ charâ†’ short â†’ int â†’ long â†’ float â†’ double å°†å€¼èµ‹å€¼ç»™è¾ƒå°å–å€¼èŒƒå›´çš„å˜é‡æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢(type casting)ã€‚è¯­æ³•ï¼š (datatype)variableName ä¾‹å¦‚ï¼š float f = (float)10.1; // 10.1æ˜¯doubleç±»å‹ int i = (int)f; // 10 int j = (int)-f; // -10``- å­—ç¬¦æ•°æ®ç±»å‹```javacharè¡¨ç¤º16ä½çš„å•ä¸ªUnicodeå­—ç¬¦ã€‚charç±»å‹çš„å­—é¢å€¼ä»¥ä¸¤ä¸ªå•å¼•å·ç•Œå®šçš„å•ä¸ªUnicodeå­—ç¬¦ã€‚å¦‚:'ç”·','å¥³'å¯ä»¥ç”¨\\uxxxxå½¢å¼è¡¨ç¤ºï¼Œ xxxxä¸ºåå…­è¿›åˆ¶ã€‚å¦‚:'\\u7537', '\\u5973'è½¬ä¹‰å­—ç¬¦è¡¨ç¤ºï¼š\\n \\t \\b \\r \\f \\\\ \\' \\\"ä¾‹å¦‚ï¼šchar letter = 'A';char numChar = '4';å¦‚æœæƒ³æ‰“å°å¸¦â€â€çš„ä¿¡æ¯ He said â€œJava is fun â€œ System.out.println(â€œHe said \\â€Java is fun \\â€â€); Stringè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦åºåˆ—ï¼Œæ³¨æ„å­—ç¬¦ä¸²æ˜¯Stringç±»å®ç°çš„ï¼Œæ˜¯å¼•ç”¨ç±»å‹å­—ç¬¦ä¸²çš„å­—é¢å€¼æ˜¯ç”±åŒå¼•å·ç•Œå®šçš„é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚ \"Welcom to java!\" \"\"è¿æ¥è¿ç®—ï¼š+, +=åŠ å·ç”¨äºè¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªä¸æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™å…ˆå°†è¯¥æ“ä½œæ•°è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œå†æ‰§è¡Œè¿æ¥æ“ä½œã€‚String message = \"Welcome \" + \"to \" + \"java\"; // Welcome to JavaString s = â€œChapterâ€ + 2; // Chapter2ï¼šä¸èƒ½éƒ½æ˜¯æ•°å€¼String s1 += \"Supplement\" + 'B'; // SupplementB message += \" and Java is fun\"; // Welcome to Java and Java is funint i = 1;int j = 2;System.out.println(\"i + j = \" + i + j); // i+j=12System.out.println(\"i + j = \" + (i + j)); // i+j = 3","categories":[{"name":"java","slug":"java","permalink":"https://shyshy903.github.io/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://shyshy903.github.io/tags/java/"}]},{"title":"Linux","slug":"Linux/linux","date":"2019-10-31T16:00:00.000Z","updated":"2020-02-11T08:48:55.540Z","comments":true,"path":"2019/11/01/Linux/linux/","link":"","permalink":"https://shyshy903.github.io/2019/11/01/Linux/linux/","excerpt":"","text":"1. linux çš„åŸºç¡€ç³»ç»Ÿå‘½ä»¤ åœ¨linuxä¸­ç³»ç»Ÿå‘½ä»¤é€šå¸¸æ˜¯å¦‚ä¸‹çš„æ ¼å¼ï¼šå‘½ä»¤åç§° ã€å‘½ä»¤å‚æ•°ã€‘ ã€å‘½ä»¤å¯¹è±¡ã€‘ è·å–ç™»å½•ä¿¡æ¯123# w# who # who am i æŸ¥çœ‹è‡ªå·±ä½¿ç”¨çš„shellps1# ps æŸ¥çœ‹å‘½ä»¤çš„è¯´æ˜whatis12# what is ps# what is python æŸ¥çœ‹å‘½ä»¤çš„ä½ç½®whichã€whereis1234# where is ps# where is python# which ps# which python æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£manã€helpã€apropos12# man ps# info ps åˆ‡æ¢ç”¨æˆ·su1# su hellokitty ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œå‘½ä»¤sudo12# ls /root(fail)# sudo ls /root(success) ç™»å…¥å’Œç™»å‡ºç›¸å…³logoutã€exitã€adduserã€userdelã€passwdã€ssh1234# adduser hellokitty# passwd hellokitty (change password)# ssh@hellokitty@1.2.3.4# logout æŸ¥çœ‹ç³»ç»Ÿå’Œä¸»æœºåunnameã€hostname12# unname# hostname é‡å¯å’Œå…³æœºrebotã€init 6ã€shutdownã€init 01# rebot æŸ¥çœ‹å†å²å‘½ä»¤history1# history 2. linuxå¸¸ç”¨çš„å®ç”¨å‘½ä»¤ åˆ›å»ºå’Œåˆ é™¤ç›®å½•mkdirã€rmdir123# mkdir abc# mkdir -p abc# rmdir abc åˆ›å»ºå’Œåˆ é™¤æ–‡ä»¶touchã€rm123456789101112131415161718192021222324# touch readme.md# rm readme.md# rm -rf xyz ```bash&gt; `touch`å‘½ä»¤ç”¨äºåˆ›å»ºç©ºç™½æ–‡ä»¶æˆ–è€…ä¿®æ”¹æ–‡ä»¶æ—¶é—´ã€‚åœ¨Linuxç³»ç»Ÿä¸­æœ‰ä¸‰ç§æ–‡ä»¶æ—¶é—´ï¼š- æ›´æ”¹æ–‡ä»¶å†…å®¹çš„æ—¶é—´ï¼š`mtime`- æ›´æ”¹æƒé™çš„æ—¶é—´: `ctime`- æœ€åè®¿é—®æ—¶é—´: `atime`&gt; rmæœ‰å‡ ä¸ªé‡è¦çš„å‚æ•°å¦‚ä¸‹ï¼š- `-i` :äº¤äº’å¼åˆ é™¤ï¼Œæ¯ä¸ªåˆ é™¤é¡¹éƒ½è¦è¯¢é—®- `-r` :åˆ é™¤ç›®å½•å¹¶ä¸”é€’å½’åˆ é™¤ç›®å½•åŠæ–‡ä»¶- `-f` :å¼ºåˆ¶åˆ é™¤ï¼Œå¿½ç•¥å­˜åœ¨çš„æ–‡ä»¶ï¼Œæ²¡æœ‰ä»»ä½•æç¤º3. åˆ‡æ¢å’ŒæŸ¥çœ‹å½“å‰çš„å·¥ä½œç›®å½•`cd`ã€`pwd`4. æŸ¥çœ‹ç›®å½•å†…å®¹`ls`* `-l` :ä»¥é•¿æ ¼å¼æŸ¥çœ‹æ–‡ä»¶å’Œç›®å½•* `-a` ï¼šæ˜¾ç¤ºä»¥ç‚¹å¼€å¤´çš„æ–‡ä»¶å’Œç›®å½•* `-R` ï¼šé‡åˆ°ç›®å½•ï¼Œé€’å½’å±•å¼€* `-d` : åªåˆ—å‡ºç›®å½•ï¼Œä¸åˆ—å‡ºå†…å®¹* `-s -t` : æŒ‰ç…§å¤§å°å’Œæ—¶é—´è¿›è¡Œæ’åº5. æŸ¥çœ‹æ–‡ä»¶å†…å®¹`cat`ã€`head`ã€`tail`ã€`more`ã€`less````bash# cat readme.md# head -10 sohu.html æ‹·è´å’Œç§»åŠ¨æ–‡ä»¶cpã€mv1234# cp sohu.html backup/# cd backup# mv sohu.html sohu_index.html æŸ¥æ‰¾æ–‡ä»¶å’ŒæŸ¥æ‰¾å†…å®¹findã€grep grep åœ¨æœç´¢å­—ç¬¦ä¸²æ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™å¯ä»¥ç”¨grep -E é“¾æ¥ln é“¾æ¥å¯ä»¥åˆ†ä¸ºç¡¬é“¾æ¥å’Œè½¯é“¾æ¥ï¼Œç¡¬é“¾æ¥å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªæŒ‡å‘æ–‡ä»¶æ•°æ®çš„æŒ‡é’ˆã€‚æˆ‘ä»¬å¹³å¸¸åˆ é™¤æ•°æ®æ—¶ï¼Œå¹¶æ²¡æœ‰åˆ é™¤ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åˆ é™¤çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚è€Œè½¯é“¾æ¥ç±»ä¼¼äºwindowsé‡Œé¢çš„å¿«æ·æ–¹å¼ã€‚ å‹ç¼©\\è§£å‹ç¼©\\å½’æ¡£\\è§£å½’æ¡£gzipã€gunzipã€xzã€tar12# gunzip redis-4.0.10.tar.gz# tar -xvf redis-4.0.10.tar å…¶å®ƒå·¥å…·sortã€uniqã€diffã€trã€cutã€pasteã€fileã€wc ç®¡é“å’Œé‡å®šå‘ ç®¡é“çš„ä½¿ç”¨ï¼š| 123# find ./ | wc -1 % æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ä¸ªæ•° # ls | cat - n % åˆ—å‡ºå½“å‰è·¯å¾„ä¸‹çš„æ–‡ä»¶åŠ ï¼Œç»™æ¯ä¸€é¡¹åŠ ä¸€ä¸ªç¼–å·# cat record.log | grep AAA | grep - v BBB | wc - 1 % æŸ¥æ‰¾record.log ä¸­çš„AAAï¼Œä½†ä¸åŒ…å«BBBçš„ä¸ªæ•° è¾“å‡ºé‡å®šå‘å’Œé”™è¯¯é‡å®šå‘ï¼š- &gt; / &gt;&gt; / 2 &gt;1234567891011121314151617[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat readme.txtbananaapplegrapeapplegrapewatermelonpearpitaya[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat readme.txt | sort | uniq &gt; result.txt[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat result.txtapplebananagrapepearpitayawatermelon è¾“å…¥é‡å®šå‘ï¼š- &lt;1234567891011[root@iZwz97tbgo9lkabnat2lo8Z ~]# echo 'hello, world!' &gt; hello.txt[root@iZwz97tbgo9lkabnat2lo8Z ~]# wall &lt; hello.txt[root@iZwz97tbgo9lkabnat2lo8Z ~]#Broadcast message from root@iZwz97tbgo9lkabnat2lo8Z (Wed Jun 20 19:43:05 2018):hello, world![root@iZwz97tbgo9lkabnat2lo8Z ~]# echo 'I will show you some code.' &gt;&gt; hello.txt[root@iZwz97tbgo9lkabnat2lo8Z ~]# wall &lt; hello.txt[root@iZwz97tbgo9lkabnat2lo8Z ~]#Broadcast message from root@iZwz97tbgo9lkabnat2lo8Z (Wed Jun 20 19:43:55 2018):hello, world!I will show you some code. åˆ«å alias1234567[root@iZwz97tbgo9lkabnat2lo8Z ~]# alias ll='ls -l'[root@iZwz97tbgo9lkabnat2lo8Z ~]# alias frm='rm -rf'[root@iZwz97tbgo9lkabnat2lo8Z ~]# ll...drwxr-xr-x 2 root root 4096 Jun 20 12:52 abc...bash[root@iZwz97tbgo9lkabnat2lo8Z ~]# frm abc unlias123[root@iZwz97tbgo9lkabnat2lo8Z ~]# unalias frm[root@iZwz97tbgo9lkabnat2lo8Z ~]# frm sohu.html-bash: frm: command not found å…¶å®ƒç¨‹åº æ—¶é—´å’Œæ—¥æœŸ date / cal123456789101112131415161718[root@iZwz97tbgo9lkabnat2lo8Z ~]# dateWed Jun 20 12:53:19 CST 2018[root@iZwz97tbgo9lkabnat2lo8Z ~]# cal June 2018Su Mo Tu We Th Fr Sa 1 2 3 4 5 6 7 8 910 11 12 13 14 15 1617 18 19 20 21 22 2324 25 26 27 28 29 30[root@iZwz97tbgo9lkabnat2lo8Z ~]# cal 5 2017 May 2017Su Mo Tu We Th Fr Sa 1 2 3 4 5 6 7 8 9 10 11 12 1314 15 16 17 18 19 2021 22 23 24 25 26 2728 29 30 31 å½•åˆ¶æ“ä½œè„šæœ¬1script ç»™ç”¨æˆ·å‘é€æ¶ˆæ¯1mesg / write / wall / mail 3. æ–‡ä»¶ç³»ç»Ÿæ–‡ä»¶å’Œè·¯å¾„ å‘½åè§„åˆ™ï¼šæ–‡ä»¶åçš„æœ€å¤§é•¿åº¦ä¸æ–‡ä»¶ç³»ç»Ÿç±»å‹æœ‰å…³ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ–‡ä»¶åä¸åº”è¯¥è¶…è¿‡255ä¸ªå­—ç¬¦ï¼Œè™½ç„¶ç»å¤§å¤šæ•°çš„å­—ç¬¦éƒ½å¯ä»¥ç”¨äºæ–‡ä»¶åï¼Œä½†æ˜¯æœ€å¥½ä½¿ç”¨è‹±æ–‡å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€ç‚¹è¿™æ ·çš„ç¬¦å·ã€‚æ–‡ä»¶åä¸­è™½ç„¶å¯ä»¥ä½¿ç”¨ç©ºæ ¼ï¼Œä½†åº”è¯¥å°½å¯èƒ½é¿å…ä½¿ç”¨ç©ºæ ¼ï¼Œå¦åˆ™åœ¨è¾“å…¥æ–‡ä»¶åæ—¶éœ€è¦ç”¨å°†æ–‡ä»¶åæ”¾åœ¨åŒå¼•å·ä¸­æˆ–è€…é€šè¿‡\\å¯¹ç©ºæ ¼è¿›è¡Œè½¬ä¹‰ã€‚ æ‰©å±•åï¼šåœ¨Linuxç³»ç»Ÿä¸‹æ–‡ä»¶çš„æ‰©å±•åæ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯ä½¿ç”¨æ‰©å±•åæœ‰åŠ©äºå¯¹æ–‡ä»¶å†…å®¹çš„ç†è§£ã€‚æœ‰äº›åº”ç”¨ç¨‹åºè¦é€šè¿‡æ‰©å±•åæ¥è¯†åˆ«æ–‡ä»¶ï¼Œä½†æ˜¯æ›´å¤šçš„åº”ç”¨ç¨‹åºå¹¶ä¸ä¾èµ–æ–‡ä»¶çš„æ‰©å±•åï¼Œå°±åƒfileå‘½ä»¤åœ¨è¯†åˆ«æ–‡ä»¶æ—¶å¹¶ä¸æ˜¯ä¾æ®æ‰©å±•åæ¥åˆ¤å®šæ–‡ä»¶çš„ç±»å‹ éšè—æ–‡ä»¶ï¼šä»¥ç‚¹å¼€å¤´çš„æ–‡ä»¶åœ¨Linuxç³»ç»Ÿä¸­æ˜¯éšè—æ–‡ä»¶ï¼ˆä¸å¯è§æ–‡ä»¶ï¼‰ã€‚ç›®å½•ç»“æ„123456789101112131415161718191. */bin* - åŸºæœ¬å‘½ä»¤çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚2. */boot* - å¼•å¯¼åŠ è½½ç¨‹åºçš„é™æ€æ–‡ä»¶ã€‚3. */dev* - è®¾å¤‡æ–‡ä»¶ã€‚4. */etc* - é…ç½®æ–‡ä»¶ã€‚5. */home* - æ™®é€šç”¨æˆ·ä¸»ç›®å½•çš„çˆ¶ç›®å½•ã€‚6. */lib* - å…±äº«åº“æ–‡ä»¶ã€‚7. */lib64* - å…±äº«64ä½åº“æ–‡ä»¶ã€‚8. */lost+found* - å­˜æ”¾æœªé“¾æ¥æ–‡ä»¶ã€‚9. */media* - è‡ªåŠ¨è¯†åˆ«è®¾å¤‡çš„æŒ‚è½½ç›®å½•ã€‚10. */mnt* - ä¸´æ—¶æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹ã€‚11. */opt* - å¯é€‰æ’ä»¶è½¯ä»¶åŒ…å®‰è£…ä½ç½®ã€‚12. */proc* - å†…æ ¸å’Œè¿›ç¨‹ä¿¡æ¯ã€‚13. */root* - è¶…çº§ç®¡ç†å‘˜ç”¨æˆ·ä¸»ç›®å½•ã€‚14. */run* - å­˜æ”¾ç³»ç»Ÿè¿è¡Œæ—¶éœ€è¦çš„ä¸œè¥¿ã€‚15. */sbin* - è¶…çº§ç”¨æˆ·çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚16. */sys* - è®¾å¤‡çš„ä¼ªæ–‡ä»¶ç³»ç»Ÿã€‚17. */tmp* - ä¸´æ—¶æ–‡ä»¶å¤¹ã€‚18. */usr* - ç”¨æˆ·åº”ç”¨ç›®å½•ã€‚19. */var* - å˜é‡æ•°æ®ç›®å½•ã€‚ è®¿é—®æƒé™ chmod æ”¹å˜æ–‡ä»¶æ¨¡å¼æ¯”ç‰¹12345678910111213141516[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l...-rw-r--r-- 1 root root 211878 Jun 19 16:06 sohu.html...[root@iZwz97tbgo9lkabnat2lo8Z ~]# chmod g+w,o+w sohu.html[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l...-rw-rw-rw- 1 root root 211878 Jun 19 16:06 sohu.html...[root@iZwz97tbgo9lkabnat2lo8Z ~]# chmod 644 sohu.html[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l...-rw-r--r-- 1 root root 211878 Jun 19 16:06 sohu.htmlè¯´æ˜ï¼šé€šè¿‡ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œç”¨chmodæ”¹å˜æ–‡ä»¶æ¨¡å¼æ¯”ç‰¹æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯å­—ç¬¦è®¾å®šæ³•ï¼Œå¦ä¸€ç§æ˜¯æ•°å­—è®¾å®šæ³•ã€‚ é™¤äº†chmodä¹‹å¤–ï¼Œå¯ä»¥é€šè¿‡umaskæ¥è®¾å®šå“ªäº›æƒé™å°†åœ¨æ–°æ–‡ä»¶çš„é»˜è®¤æƒé™ä¸­è¢«åˆ é™¤ã€‚... chown - æ”¹å˜æ–‡ä»¶æ‰€æœ‰è€…ã€‚12345678[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l...-rw-r--r-- 1 root root 54 Jun 20 10:06 readme.txt...[root@iZwz97tbgo9lkabnat2lo8Z ~]# chown hellokitty readme.txt[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l...bash-rw-r--r-- 1 hellokitty root 54 Jun 20 10:06 readme.txt ç£ç›˜ç®¡ç† åˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ä½¿ç”¨çŠ¶å†µ: df12345678[root@iZwz97tbgo9lkabnat2lo8Z ~]# df -hFilesystem Size Used Avail Use% Mounted on/dev/vda1 40G 5.0G 33G 14% /devtmpfs 486M 0 486M 0% /devtmpfs 497M 0 497M 0% /dev/shmtmpfs 497M 356K 496M 1% /runtmpfs 497M 0 497M 0% /sys/fs/cgrouptmpfs 100M 0 100M 0% /run/user/0 ç£ç›˜åˆ†åŒºæ“ä½œ: fdisk12345678910111213[root@iZwz97tbgo9lkabnat2lo8Z ~]# fdisk -lDisk /dev/vda: 42.9 GB, 42949672960 bytes, 83886080 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisk label type: dosDisk identifier: 0x000a42f4 Device Boot Start End Blocks Id System/dev/vda1 * 2048 83884031 41940992 83 LinuxDisk /dev/vdb: 21.5 GB, 21474836480 bytes, 41943040 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytes æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ mkfs æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥ fsck æŒ‚è½½/å¸è½½ï¼š mount / umount 4 ç¼–è¾‘å™¨ vim å¯åŠ¨vimã€‚å¯ä»¥é€šè¿‡viæˆ–vimå‘½ä»¤æ¥å¯åŠ¨vimï¼Œå¯åŠ¨æ—¶å¯ä»¥æŒ‡å®šæ–‡ä»¶åæ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šæ–‡ä»¶åï¼Œä¹Ÿå¯ä»¥åœ¨ä¿å­˜çš„æ—¶å€™æŒ‡å®šæ–‡ä»¶åã€‚ 1[root@iZwz97tbgo9lkabnat2lo8Z ~]# vim guess.py å‘½ä»¤æ¨¡å¼ã€ç¼–è¾‘æ¨¡å¼å’Œæœ«è¡Œæ¨¡å¼ï¼šå¯åŠ¨vimè¿›å…¥çš„æ˜¯å‘½ä»¤æ¨¡å¼ï¼ˆä¹Ÿç§°ä¸ºNormalæ¨¡å¼ï¼‰ï¼Œåœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥è‹±æ–‡å­—æ¯iä¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆInsertæ¨¡å¼ï¼‰ï¼Œå±å¹•ä¸‹æ–¹å‡ºç°â€“ INSERT â€“æç¤ºï¼›åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹æŒ‰ä¸‹Escä¼šå›åˆ°å‘½ä»¤æ¨¡å¼ï¼Œæ­¤æ—¶å¦‚æœè¾“å…¥è‹±æ–‡:ä¼šè¿›å…¥æœ«è¡Œæ¨¡å¼ï¼Œåœ¨æœ«è¡Œæ¨¡å¼ä¸‹è¾“å…¥q!å¯ä»¥åœ¨ä¸ä¿å­˜å½“å‰å·¥ä½œçš„æƒ…å†µä¸‹å¼ºè¡Œé€€å‡ºvimï¼›åœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥vä¼šè¿›å…¥å¯è§†æ¨¡å¼ï¼ˆVisualæ¨¡å¼ï¼‰ï¼Œå¯ä»¥ç”¨å…‰æ ‡é€‰æ‹©ä¸€ä¸ªåŒºåŸŸå†å®Œæˆå¯¹åº”çš„æ“ä½œã€‚ ä¿å­˜å’Œé€€å‡ºvimï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥:è¿›å…¥æœ«è¡Œæ¨¡å¼ï¼Œè¾“å…¥wqå¯ä»¥å®ç°ä¿å­˜é€€å‡ºï¼›å¦‚æœæƒ³æ”¾å¼ƒç¼–è¾‘çš„å†…å®¹è¾“å…¥q!å¼ºè¡Œé€€å‡ºï¼Œè¿™ä¸€ç‚¹åˆšæ‰å·²ç»æåˆ°è¿‡äº†ï¼›åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ä¹Ÿå¯ä»¥ç›´æ¥è¾“å…¥ZZå®ç°ä¿å­˜é€€å‡ºã€‚å¦‚æœåªæƒ³ä¿å­˜æ–‡ä»¶ä¸é€€å‡ºï¼Œé‚£ä¹ˆå¯ä»¥åœ¨æœ«è¡Œæ¨¡å¼ä¸‹è¾“å…¥wï¼›å¯ä»¥åœ¨wåé¢è¾“å…¥ç©ºæ ¼å†æŒ‡å®šè¦ä¿å­˜çš„æ–‡ä»¶åã€‚ å…‰æ ‡æ“ä½œï¼š åœ¨å‘½ä»¤æ¨¡å¼ä¸‹å¯ä»¥é€šè¿‡hã€jã€kã€læ¥æ§åˆ¶å…‰æ ‡å‘å·¦ã€ä¸‹ã€ä¸Šã€å³çš„æ–¹å‘ç§»åŠ¨ï¼Œå¯ä»¥åœ¨å­—æ¯å‰è¾“å…¥æ•°å­—æ¥è¡¨ç¤ºç§»åŠ¨çš„è·ç¦»ï¼Œä¾‹å¦‚ï¼š10hè¡¨ç¤ºå‘å·¦ç§»åŠ¨10ä¸ªå­—ç¬¦ã€‚ åœ¨å‘½ä»¤æ¨¡å¼ä¸‹å¯ä»¥é€šè¿‡Ctrl+yå’ŒCtrl+eæ¥å®ç°å‘ä¸Šã€å‘ä¸‹æ»šåŠ¨ä¸€è¡Œæ–‡æœ¬çš„æ“ä½œï¼Œå¯ä»¥é€šè¿‡Ctrl+få’ŒCtrl+bæ¥å®ç°å‘å‰å’Œå‘åç¿»é¡µçš„æ“ä½œã€‚ åœ¨å‘½ä»¤æ¨¡å¼ä¸‹å¯ä»¥é€šè¿‡è¾“å…¥è‹±æ–‡å­—æ¯Gå°†å…‰æ ‡ç§»åˆ°æ–‡ä»¶çš„æœ«å°¾ï¼Œå¯ä»¥é€šè¿‡ggå°†å…‰æ ‡ç§»åˆ°æ–‡ä»¶çš„å¼€å§‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åœ¨Gå‰è¾“å…¥æ•°å­—æ¥å°†å…‰æ ‡ç§»åŠ¨åˆ°æŒ‡å®šçš„è¡Œã€‚ æ–‡æœ¬æ“ä½œ åˆ é™¤ï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹å¯ä»¥ç”¨ddæ¥åˆ é™¤æ•´è¡Œï¼›å¯ä»¥åœ¨ddå‰åŠ æ•°å­—æ¥æŒ‡å®šåˆ é™¤çš„è¡Œæ•°ï¼›å¯ä»¥ç”¨d$æ¥å®ç°åˆ é™¤ä»å…‰æ ‡å¤„åˆ åˆ°è¡Œå°¾çš„æ“ä½œï¼Œä¹Ÿå¯ä»¥é€šè¿‡d0æ¥å®ç°ä»å…‰æ ‡å¤„åˆ åˆ°è¡Œé¦–çš„æ“ä½œï¼›å¦‚æœæƒ³åˆ é™¤ä¸€ä¸ªå•è¯ï¼Œå¯ä»¥ä½¿ç”¨dwï¼›å¦‚æœè¦åˆ é™¤å…¨æ–‡ï¼Œå¯ä»¥åœ¨è¾“å…¥:%dï¼ˆå…¶ä¸­:ç”¨æ¥ä»å‘½ä»¤æ¨¡å¼è¿›å…¥æœ«è¡Œæ¨¡å¼ï¼‰ã€‚ å¤åˆ¶å’Œç²˜è´´ï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹å¯ä»¥ç”¨yyæ¥å¤åˆ¶æ•´è¡Œï¼›å¯ä»¥åœ¨yyå‰åŠ æ•°å­—æ¥æŒ‡å®šå¤åˆ¶çš„è¡Œæ•°ï¼›å¯ä»¥é€šè¿‡på°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°å…‰æ ‡æ‰€åœ¨çš„åœ°æ–¹ã€‚ æ’¤é”€å’Œæ¢å¤ï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥uå¯ä»¥æ’¤é”€ä¹‹å‰çš„æ“ä½œï¼›é€šè¿‡Ctrl+rå¯ä»¥æ¢å¤è¢«æ’¤é”€çš„æ“ä½œã€‚ å¯¹å†…å®¹è¿›è¡Œæ’åºï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥%!sortã€‚ æŸ¥æ‰¾å’Œæ›¿æ¢ æŸ¥æ‰¾æ“ä½œéœ€è¦è¾“å…¥/è¿›å…¥æœ«è¡Œæ¨¡å¼å¹¶æä¾›æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…ä¸ä¹‹å¯¹åº”çš„å†…å®¹ï¼Œä¾‹å¦‚ï¼š/doc.*\\.ï¼Œè¾“å…¥næ¥å‘å‰æœç´¢ï¼Œä¹Ÿå¯ä»¥è¾“å…¥Næ¥å‘åæœç´¢ã€‚ æ›¿æ¢æ“ä½œéœ€è¦è¾“å…¥:è¿›å…¥æœ«è¡Œæ¨¡å¼å¹¶æŒ‡å®šæœç´¢çš„èŒƒå›´ã€æ­£åˆ™è¡¨è¾¾å¼ä»¥åŠæ›¿æ¢åçš„å†…å®¹å’ŒåŒ¹é…é€‰é¡¹ï¼Œä¾‹å¦‚ï¼š:1,$s/doc.*/hello/giceï¼Œå…¶ä¸­ï¼š g - globalï¼šå…¨å±€åŒ¹é…ã€‚ i - ignore caseï¼šå¿½ç•¥å¤§å°å†™åŒ¹é…ã€‚ c - confirmï¼šæ›¿æ¢æ—¶éœ€è¦ç¡®è®¤ã€‚ e - errorï¼šå¿½ç•¥é”™è¯¯ã€‚ å‚æ•°è®¾å®šåœ¨è¾“å…¥:è¿›å…¥æœ«è¡Œæ¨¡å¼åå¯ä»¥å¯¹vimè¿›è¡Œè®¾å®šã€‚ è®¾ç½®Tabé”®çš„ç©ºæ ¼æ•°ï¼šset ts=4 ç½®æ˜¾ç¤º/ä¸æ˜¾ç¤ºè¡Œå·ï¼šset nu / set nonu è®¾ç½®å¯ç”¨/å…³é—­é«˜äº®è¯­æ³•ï¼šsyntax on / syntax off è®¾ç½®æ˜¾ç¤ºæ ‡å°ºï¼ˆå…‰æ ‡æ‰€åœ¨çš„è¡Œå’Œåˆ—ï¼‰ï¼š set ruler è®¾ç½®å¯ç”¨/å…³é—­æœç´¢ç»“æœé«˜äº®ï¼šset hls / set nohls è¯´æ˜ï¼šå¦‚æœå¸Œæœ›ä¸Šé¢çš„è¿™äº›è®¾å®šåœ¨æ¯æ¬¡å¯åŠ¨vimæ—¶éƒ½èƒ½ç”Ÿæ•ˆï¼Œéœ€è¦å°†è¿™äº›è®¾å®šå†™åˆ°ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„.vimrcæ–‡ä»¶ä¸­ã€‚ é«˜çº§æŠ€å·§ æ¯”è¾ƒå¤šä¸ªæ–‡ä»¶1[root@iZwz97tbgo9lkabnat2lo8Z ~]# vim -d foo.txt bar.txt æ‰“å¼€å¤šä¸ªæ–‡ä»¶1[root@iZwz97tbgo9lkabnat2lo8Z ~]# vim foo.txt bar.txt hello.txt å¯åŠ¨vimååªæœ‰ä¸€ä¸ªçª—å£æ˜¾ç¤ºçš„æ˜¯foo.txtï¼Œå¯ä»¥åœ¨æœ«è¡Œæ¨¡å¼ä¸­è¾“å…¥lsæŸ¥çœ‹åˆ°æ‰“å¼€çš„ä¸‰ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨æœ«è¡Œæ¨¡å¼ä¸­è¾“å…¥b &lt;num&gt;æ¥æ˜¾ç¤ºå¦ä¸€ä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚å¯ä»¥ç”¨:b 2å°†bar.txtæ˜¾ç¤ºå‡ºæ¥ï¼Œå¯ä»¥ç”¨:b 3å°†hello.txtæ˜¾ç¤ºå‡ºæ¥ã€‚ æ‹†åˆ†å’Œåˆ‡æ¢çª—å£ï¼šå¯ä»¥åœ¨æœ«è¡Œæ¨¡å¼ä¸­è¾“å…¥spæˆ–vsæ¥å®ç°å¯¹çª—å£çš„æ°´å¹³æˆ–å‚ç›´æ‹†åˆ†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªç¼–è¾‘çª—å£ï¼Œé€šè¿‡æŒ‰ä¸¤æ¬¡Ctrl+wå°±å¯ä»¥å®ç°ç¼–è¾‘çª—å£çš„åˆ‡æ¢ï¼Œåœ¨ä¸€ä¸ªçª—å£ä¸­æ‰§è¡Œé€€å‡ºæ“ä½œåªä¼šå…³é—­å¯¹åº”çš„çª—å£ï¼Œå…¶ä»–çš„çª—å£ç»§ç»­ä¿ç•™ã€‚ æ˜ å°„å¿«æ·é”®ï¼šåœ¨vimä¸‹å¯ä»¥å°†ä¸€äº›å¸¸ç”¨æ“ä½œæ˜ å°„ä¸ºå¿«æ·é”®æ¥æå‡å·¥ä½œæ•ˆç‡ã€‚ ä¾‹å­1ï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥F4æ‰§è¡Œä»ç¬¬ä¸€è¡Œå¼€å§‹åˆ é™¤10000è¡Œä»£ç çš„æ“ä½œã€‚ 1:map &lt;F4&gt; gg10000ddã€‚ ä¾‹å­2ï¼šåœ¨ç¼–è¾‘æ¨¡å¼ä¸‹è¾“å…¥__mainç›´æ¥è¡¥å…¨ä¸º: 12if __name__ == '__main__'::inoremap __main if __name__ == '__main__': è¯´æ˜ï¼šä¸Šé¢ä¾‹å­2çš„inoremapä¸­çš„iè¡¨ç¤ºæ˜ å°„çš„é”®åœ¨ç¼–è¾‘æ¨¡å¼ä½¿ç”¨ï¼Œnoreè¡¨ç¤ºä¸è¦é€’å½’ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå¦åˆ™å¦‚æœé”®å¯¹åº”çš„å†…å®¹ä¸­åˆå‡ºç°é”®æœ¬èº«ï¼Œå°±ä¼šå¼•å‘é€’å½’ï¼ˆç›¸å½“äºè¿›å…¥äº†æ­»å¾ªç¯ï¼‰ã€‚å¦‚æœå¸Œæœ›æ˜ å°„çš„å¿«æ·é”®æ¯æ¬¡å¯åŠ¨vimæ—¶éƒ½èƒ½ç”Ÿæ•ˆï¼Œéœ€è¦å°†æ˜ å°„å†™åˆ°ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„.vimrcæ–‡ä»¶ä¸­ã€‚ å½•åˆ¶å®ï¼š åœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥qaå¼€å§‹å½•åˆ¶å®ï¼ˆå…¶ä¸­aæ˜¯å¯„å­˜å™¨çš„åå­—ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–è‹±æ–‡å­—æ¯æˆ–0-9çš„æ•°å­—ï¼‰ã€‚ æ‰§è¡Œä½ çš„æ“ä½œï¼ˆå…‰æ ‡æ“ä½œã€ç¼–è¾‘æ“ä½œç­‰ï¼‰ï¼Œè¿™äº›æ“ä½œéƒ½ä¼šè¢«å½•åˆ¶ä¸‹æ¥ã€‚ å¦‚æœå½•åˆ¶çš„æ“ä½œå·²ç»å®Œæˆäº†ï¼ŒæŒ‰qç»“æŸå½•åˆ¶ã€‚ é€šè¿‡@aï¼ˆaæ˜¯åˆšæ‰ä½¿ç”¨çš„å¯„å­˜å™¨çš„åå­—ï¼‰æ’­æ”¾å®ï¼Œå¦‚æœè¦å¤šæ¬¡æ‰§è¡Œå®å¯ä»¥åœ¨å‰é¢åŠ æ•°å­—ï¼Œä¾‹å¦‚100@aè¡¨ç¤ºå°†å®æ’­æ”¾100æ¬¡ã€‚ å¯ä»¥è¯•ä¸€è¯•ä¸‹é¢çš„ä¾‹å­æ¥ä½“éªŒå½•åˆ¶å®çš„æ“ä½œï¼Œè¯¥ä¾‹å­æ¥æºäºHarttle Landç½‘ç«™ï¼Œè¯¥ç½‘ç«™ä¸Šæä¾›äº†å¾ˆå¤šå…³äºvimçš„ä½¿ç”¨æŠ€å·§ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»äº†è§£ä¸€ä¸‹ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"https://shyshy903.github.io/categories/Linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://shyshy903.github.io/tags/linux/"}]},{"title":"ç†è®ºè®¡ç®—åŸºç¡€","slug":"é‡å­è®¡ç®—/ç†è®ºå‚¬åŒ–è®¡ç®—(ä¸€)","date":"2019-10-19T16:00:00.000Z","updated":"2019-10-19T16:00:00.000Z","comments":true,"path":"2019/10/20/é‡å­è®¡ç®—/ç†è®ºå‚¬åŒ–è®¡ç®—(ä¸€)/","link":"","permalink":"https://shyshy903.github.io/2019/10/20/%E9%87%8F%E5%AD%90%E8%AE%A1%E7%AE%97/%E7%90%86%E8%AE%BA%E5%82%AC%E5%8C%96%E8%AE%A1%E7%AE%97(%E4%B8%80)/","excerpt":"","text":"ï¼ˆä¸€ï¼‰å‡†å¤‡å·¥ä½œ1 ç³»ç»Ÿä¸è½¯ä»¶éƒ¨åˆ† Linuxä¸windowsç³»ç»Ÿ ç¼–è¾‘å™¨ï¼šwindowsç”¨notepad++ç¼–è¾‘å™¨ï¼Œlinuxç”¨vimç¼–è¾‘å™¨ ç›¸å…³ç¨‹åºï¼š Materials studio (ç”¨æ¥å»ºæ¨¡) Vesta(ç”¨æ¥è¿›è¡Œå¯è§†åŒ–ä¸æ–‡ä»¶è½¬æ¢) VASPä¸CP2k:ç”¨æ¥åšç¬¬ä¸€æ€§åŸç†è®¡ç®—çš„è½¯ä»¶,CP2kæ˜¯ä»å¤´ç®—åˆ†æåŠ¨åŠ›å­¦æ¨¡æ‹Ÿï¼Œæ˜¯è¡¨é¢å‚¬åŒ–è®¡ç®—çš„å¤§æ€å™¨ï¼Œèµ„æ–™å°‘ï¼Œå­¦ä¹ å›°éš¾ p4vasp:vaspè®¡ç®—ç»“æœçš„åå¤„ç†ç¨‹åº VMD:åˆ†å­åŠ¨åŠ›å­¦çš„å¯è§†åŒ–ç¨‹åºï¼Œä½œå›¾çš„ç©ç€ï¼Œè‡ªç”±åº¦å¾ˆé«˜ï¼Œä½¿ç”¨å¤æ‚ 2 ç†è®ºçŸ¥è¯†éƒ¨åˆ†2.1 å‚¬åŒ–åŒ–å­¦ä¸é‡å­åŒ–å­¦è¿™é‡Œæ¨èä¸¤æœ¬ä¹¦ï¼Œ 2.2 å¯†åº¦æ³›å‡½ç†è®ºè¿™é‡Œä¹Ÿæ¨èæœ¬ä¹¦ï¼š ï¼ˆäºŒï¼‰å‚¬åŒ–æ¨¡å‹æ„å»º3 æ™¶ä½“ç»“æ„æ•°æ®åº“çš„ä½¿ç”¨3.1 ç›¸å…³è¯´æ˜ç¬¬ä¸€ç¯‡å•åŸå­å‚¬åŒ–æ–‡ç« ï¼šNat. Chem., 2011, 3,634-641ç ”ç©¶æ™¶ä½“ç»“æ„çš„æ–‡çŒ®éƒ½ä¼šç»™å‡ºç»“æ„çš„è¯¦ç»†å‚æ•°ï¼šæ¯”å¦‚ï¼ŒJ. Am. Chem. Soc. 136, 20, 7221-7224æ³¨æ„ï¼šä¸è¦ç”¨MSé‡Œbuildâ€“crystalsâ€“build crystalså¯¹ç€æ–‡çŒ®è¾“å…¥å‚æ•°ã€‚è´¹äº†åŠå¤©åŠ²è¿˜å®¹æ˜“æé”™ï¼Œåœ¨æ™¶ä½“æ•°æ®åº“é‡Œå¯ä»¥ç›´æ¥æ‰¾åˆ°cifç»“æ„æ–‡ä»¶ã€‚ 3.2 æ™¶ä½“ç»“æ„ä¸æ•°æ®åº“ é—®é¢˜ï¼šæ‰¾æ™¶ä½“ç»“æ„åˆ°åº•åœ¨æ‰¾ä»€ä¹ˆï¼Ÿç­”ï¼šCIFæ–‡ä»¶ï¼Œåç¼€åä¸º.cifï¼Œå†…éƒ¨å«æœ‰ç»“æ„ä¿¡æ¯ å¸¸ç”¨çš„æ™¶ä½“ç»“æ„æ•°æ®åº“ï¼š ICSD â€“ the Inorganic Crystal Structure Database æ— æœºæ™¶ä½“æ•°æ®åº“ã€‚http://www2.fiz-karlsruhe.de/icsd_home.html CCDC â€“ The Cambridge Crystallographic Data Centrehttps://www.ccdc.cam.ac.uk/ Materials studioè‡ªå¸¦æ™¶ä½“æ•°æ®åº“ Materials Projectï¼ˆå¼ºçƒˆæ¨èï¼‰ï¼šhttps://materialsproject.org/ç‰¹è‰²ï¼Œä¸ä½†æœ‰å®éªŒç»“æ„å‚æ•°ï¼Œè¿˜æœ‰ç†è®ºè®¡ç®—æ•°æ®ï¼Œæ¯”å¦‚ç£çŸ©ï¼Œå½¢æˆèƒ½ï¼Œå¯†åº¦ï¼Œå¸¦éš™ï¼Œç©ºé—´ç¾¤ï¼Œç‚¹ç¾¤ï¼Œæ™¶ç³»ï¼Œèƒ½å¸¦ç»“æ„ï¼Œå¼¹æ€§å¼ é‡ï¼Œ å‹ç”µå¼ é‡ç­‰æ•°æ®ã€‚æˆªè‡³2018å¹´9æœˆ11æ—¥ï¼Œæ”¶å½•83989ç§æ— æœºåŒ–åˆç‰©ï¼Œ 52179ä¸ªèƒ½å¸¦ç»“æ„ AMCSD â€“ American Mineralogist Crystal Structure Databaseï¼šhttp://rruff.geo.arizona.edu/AMS/amcsd.php google search ï¼ˆexï¼š Al2O3 filetype:cif ï¼‰3.3 CCDCå®æˆ˜è®­ç»ƒï¼ˆä¸€ï¼‰-ä»æ–‡ç« ä¸­æ‰¾åˆ°æ™¶ä½“ç»“æ„ å¦‚ä½•ä»æ–‡ç« æ‰¾åˆ°æ™¶ä½“ç»“æ„ï¼Ÿç­”ï¼š ç›´æ¥åˆ°æ–‡ç« æœ«å°¾å»æ‰¾CCDCç¼–ç ï¼Œä½†æœ‰æ—¶æ™¶ä½“ç»“æ„ä¹Ÿä¼šå‡ºç°åœ¨æ–‡ç« ä¸­æˆ–è€…SIé‡Œé¢ã€‚ å¦‚ä½•ä»æ™¶ä½“æ•°æ®åº“ä¸­è·å¾—ç»“æ„æ–‡ä»¶ï¼Ÿ ç™»å½•æ•°æ®åº“æŸ¥æ‰¾CCDCç¼–ç  ä¸‹è½½CIFæ–‡ä»¶ 3.4 ISDC å®æˆ˜è®­ç»ƒï¼ˆäºŒï¼‰-å¾—åˆ°å„ç§AL2O3æ¨¡å‹Materials studio åªæœ‰ä¸€ç§Al2O3 æ¨¡å‹ï¼Œæ˜¯aå‹çš„trigonalæ™¶ç³»ï¼Œä¹Ÿç§°ä½œcorundumåˆšç‰ã€‚å¦‚æœæƒ³è¦å¾—åˆ°ä¸åŒæ™¶å‹çš„Al2O3å°±è¦å»æ™¶ä½“æ•°æ®åº“ä¸Šæ‰¾ã€‚ æ€»ç»“ï¼šç§‘ç ”ä¸­ç¢°åˆ°ä¸€ä¸ªæ™¶ä½“ï¼Œåº”è¯¥æ€ä¹ˆæ‰¾å¯¹åº”çš„ç»“æ„æ–‡ä»¶ã€‚ ä¾æ¬¡å°è¯•ä¸‹åˆ—æ–¹æ³•ï¼š åœ¨materials projectä¸­ç›´æ¥è¾“å…¥å¯¹åº”å…ƒç´ å’ŒåŸå­ä¸ªæ•°ã€‚å¦‚æœæä¸æ¸…è¯¥åŒ–åˆç‰©çš„æ™¶å‹ï¼Œæå‰Googleè¯¥æ™¶ä½“æ‰€å±æ™¶ç³»ï¼Œç‚¹ç¾¤å’Œç©ºé—´ç¾¤ã€‚ åœ¨ICSD chemistryä¸­è¾“å…¥å¯¹åº”å…ƒç´ å’ŒåŸå­ä¸ªæ•°ã€‚ï¼ˆICSDæ˜¯æœ€å…¨çš„æ— æœºæ™¶ä½“æ•°æ®åº“ï¼Œå¦‚æœè¿™éƒ½æ‰¾ä¸åˆ°ç»“æ„ï¼Œåº”è¯¥å›å¤´çœ‹é‚£é‡Œæé”™äº†ï¼‰ åœ¨æ–‡çŒ®ä¸­æ‰¾ç»“æ„ï¼Œç„¶åå»ICSDæœç´¢è¯¥æ–‡çŒ®ã€‚ ç›´æ¥googleï¼Œä¾‹å¦‚ï¼Œ black phosphorus CIFæƒ³å·æ‡’å¯ä»¥åœ¨MSé‡Œï¼Œ File-input-structuresé‡Œæ‰¾ç»“æ„ï¼Œ MSé‡Œåªæœ‰éå¸¸å°‘æ•°çš„å¸¸è§ç»“æ„ã€‚ æœ€åéå¸¸æ„Ÿè°¢ç ”ä¹‹æˆç†å’Œæ¸…ååŒ–å­¦ç³»åˆ˜é”¦ç¨‹åšå£«ï¼Œå¾®ä¿¡æœç´¢ç ”ä¹‹æˆç†å°±å¯ä»¥getä¸€ä¸ªéå¸¸éå¸¸ä¼˜è´¨çš„å…¬ä¼—å·äº†ï¼ï¼","categories":[{"name":"é‡å­è®¡ç®—","slug":"é‡å­è®¡ç®—","permalink":"https://shyshy903.github.io/categories/%E9%87%8F%E5%AD%90%E8%AE%A1%E7%AE%97/"}],"tags":[{"name":"é‡å­è®¡ç®—","slug":"é‡å­è®¡ç®—","permalink":"https://shyshy903.github.io/tags/%E9%87%8F%E5%AD%90%E8%AE%A1%E7%AE%97/"}]},{"title":"Hexo + GithubPages æ­å»ºä¸ªäººåšå®¢ä¸ç½‘ç«™ï¼","slug":"é…ç½®/Hexo-GithubPages æ­å»ºä¸ªäººç½‘ç«™","date":"2019-10-15T01:00:00.000Z","updated":"2020-02-11T08:48:55.623Z","comments":true,"path":"2019/10/15/é…ç½®/Hexo-GithubPages æ­å»ºä¸ªäººç½‘ç«™/","link":"","permalink":"https://shyshy903.github.io/2019/10/15/%E9%85%8D%E7%BD%AE/Hexo-GithubPages%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/","excerpt":"","text":"Hexo + GithubPages æ­å»ºä¸ªäººåšå®¢ä¸ç½‘ç«™ï¼åšå®¢æ­å»ºå‡†å¤‡ç¯å¢ƒ node.js ä¸‹è½½ï¼Œå¹¶å®‰è£…ã€‚ Git ä¸‹è½½ï¼Œå¹¶å®‰è£…ã€‚ å®‰è£…Hexoï¼Œåœ¨å‘½ä»¤è¡Œï¼ˆå³Git Bashï¼‰è¿è¡Œä»¥ä¸‹å‘½ä»¤: 1$ npm install -g hexo-cli åˆå§‹åŒ–hexo,åœ¨å‘½ä»¤è¡Œä¾æ¬¡è¿è¡Œä»¥ä¸‹å‘½ä»¤: 123$ hexo init folder$ cd folder$ npm install hexo server æ–°å»ºå®Œæˆåï¼Œä¼šåœ¨è·¯å¾„ä¸‹äº§ç”Ÿä¸‹åˆ—æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼š 1234567â”œâ”€â”€ _config.yml % ç«™ç‚¹é…ç½®æ–‡ä»¶â”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _posts % æ–‡ç« å‘å¸ƒæ–‡ä»¶å¤¹ themes % ä¸»é¢˜é…ç½®æ–‡ä»¶å¤¹ï¼Œå¯folkåˆ«äººçš„æ¨¡æ¿ å¯åŠ¨æœåŠ¡ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥: 1$ hexo server æµè§ˆå™¨è®¿é—®ç½‘å€,è‡³æ­¤ï¼Œhexoåšå®¢å·²ç»æ­å»ºåˆ°æœ¬åœ°äº† Githubå®æ—¶æ­å»º åœ¨githubå®˜ç½‘åˆ›å»ºè´¦å· åˆ›å»ºä»“åº“ï¼š&lt;è´¦å·åç§°&gt;github.io å°†æœ¬åœ°åšå®¢æ¨é€åˆ°githubPagesã€‚ å®‰è£…hexo-deplyer-gitæ’ä»¶ã€‚bashå‘½ä»¤è¡Œè¿è¡Œã€‚ 1$ npm install hexo-deployer-git --save æ·»åŠ githubçš„SSH-KEY,åˆ›å»ºä¸€ä¸ªSSH-KEY,åœ¨å‘½ä»¤è¡Œè¾“å…¥: 1$ ssh-keygen -t rsa -C \"é‚®ç®±åœ°å€\" C:\\Users\\Administrator\\.ssh\\id_rsa.pub ä¿®æ”¹_config.yml,æ–‡ä»¶æœ«å°¾ä¿®æ”¹ä¸º:1234deploy: type: git % æ³¨æ„å†’å·åé¢æœ‰ä¸€ä¸ªç©ºæ ¼ repo: git@github.com:shyshy903/shyshy903.github.io branch: master æ¨é€åˆ°githubPagesä¸­ã€‚12$ hexo g$ hexo d ä¹‹ååœ¨æµè§ˆå™¨è¾“å…¥ï¼šhttp://shyshy903.github.io å°±å¯ä»¥è®¿é—®ä¸ªäººåšå®¢äº† æ·»åŠ åŸŸåï¼Œåˆ›å»ºä¸ªäººç½‘ç«™ åˆ°ä¸‡ç½‘æˆ–è€…é˜¿é‡Œäº‘ä¹°ä¸€ä¸ªåŸŸåï¼Œè¿›è¡ŒDNSè§£æ DNSè§£æï¼šç±»å‹é€‰æ‹©ä¸º CNAME;æœºè®°å½•å³åŸŸåå‰ç¼€ï¼Œå¡«å†™ä¸ºwww;å½•å€¼å¡«å†™ä¸º&lt;Githubè´¦å·åç§°&gt;.github.io;è§£æçº¿è·¯ï¼ŒTTL é»˜è®¤å³å¯ ä»“åº“è®¾ç½® æ‰“å¼€åšå®¢ä»“åº“è®¾ç½®ï¼šhttps://github.com/&lt;Githubè´¦å·åç§°&gt;/&lt;Githubè´¦å·åç§°&gt;.github.io/settings åœ¨Custom domainä¸‹ï¼Œå¡«å†™è‡ªå®šä¹‰åŸŸåï¼Œç‚¹å‡»saveï¼› åœ¨ç«™ç‚¹ç›®å½•çš„sourceæ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»ºå¹¶æ‰“å¼€CNAME.txtï¼Œå†™å…¥ä½ çš„åŸŸåï¼ˆå¦‚www.simon96.onlineï¼‰ï¼Œä¿å­˜ï¼Œå¹¶é‡å‘½åä¸ºCNAME å®Œæˆä»¥ä¸Šæ­¥éª¤ï¼Œå°±å¯ä»¥é€šè¿‡åŸŸåwww.shyshy903.topæ¥è®¿é—®ä¸ªäººç½‘ç«™å’Œåšå®¢äº†ã€‚ å®‰è£…å¿…è¦çš„æ’ä»¶1npm i -S hexo-generator-search hexo-generator-json-content hexo-renderer-less ç«™ç‚¹é…ç½®-hexoæ ¹ç›®å½•ä¸‹config.ymlæ–‡ä»¶ å¤šè¯­è¨€æ”¯æŒ12345language:- zh-CN- en- zh-HK- zh-TW æœç´¢æ¡†çš„é…ç½®1npm install hexo-generator-searchdb --save ç«™ç‚¹æ–‡ä»¶æ·»åŠ ä¸‹é¢çš„ä»£ç å—ï¼š12345search: path: search.xml field: post format: html limit: 10000 ä¸»é¢˜ä¼˜åŒ–ä¹‹è‡ªå®šæ ·å¼ cdnçš„ä½¿ç”¨cdn + githubçš„åšå®¢å¯ä»¥å‚è€ƒåˆ«äººçš„æ–‡ç« 1234567891011############################### åŸºæœ¬ä¿¡æ¯ ###############################info: name: Material X docs: https://xaoxuu.com/wiki/material-x/ cdn: # æŠŠå¯¹åº”çš„é‚£ä¸€è¡Œæ³¨é‡Šæ‰å°±ä½¿ç”¨æœ¬åœ°çš„æ–‡ä»¶ css: # style: https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.9.9/css/style.css js: app: https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.9/js/app.js search: https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.9/js/search.js volantis: https://cdn.jsdelivr.net/gh/xaoxuu/volantis@1.0.5/js/volantis.min.js ä¸»é¢˜ä¼˜åŒ–ä¹‹è¯„è®ºç³»ç»Ÿ valineçš„ä½¿ç”¨ ç«™ç‚¹é…ç½®123leancloud: app_id: ä½ çš„appId # ä»leancloudå®˜ç½‘è·å¾—ï¼šhttps://www.avoscloud.com/dashboard/ app_key: ä½ çš„appKey ä¸»é¢˜é…ç½®123456789101112131415valine: enable: true # å¦‚æœä½ æƒ³ç”¨Valineè¯„è®ºç³»ç»Ÿï¼Œè¯·è®¾ç½®enableä¸ºtrue volantis: true # æ˜¯å¦å¯ç”¨volantisç‰ˆæœ¬ï¼ˆç¦æ­¢åŒ¿åï¼Œå¢åŠ è‹¥å¹²è´´å§ã€QQè¡¨æƒ…ï¼‰ # è¿˜éœ€è¦åœ¨æ ¹ç›®å½•é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢è¿™ä¸‰è¡Œå†…å®¹ # leancloud: # app_id: ä½ çš„appId # app_key: ä½ çš„appKey guest_info: nick,mail,link #valine comment header info placeholder: å¿«æ¥è¯„è®ºå§~ # valine comment input placeholder(like: Please leave your footprints ) avatar: mp # gravatar style https://valine.js.org/avatar pageSize: 20 # comment list page size verify: false # valine verify code (true/false) notify: false # valine mail notify (true/false) lang: zh-cn highlight: false ä¸»é¢˜ä¼˜åŒ–ä¹‹åŠ å…¥èŒèŒå“’è¡¨æƒ… è¿™é‡Œéœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶å“¦: 1$ npm install hexo-helper-live2d --save å¤åˆ¶ä½ å–œæ¬¢çš„åå­—ï¼Œå¦‚z16ã€‚ åœ¨hexoæ–‡ä»¶å¤¹ä¸­å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹live2d_modelsã€‚ 1 åœ¨live2d_modelsä¸­å»ºç«‹æ–‡ä»¶å¤¹z16ã€‚ 2 åœ¨æ–‡ä»¶å¤¹å•Šz16ä¸­åˆ›å»ºjsonæ–‡ä»¶ï¼šz16.model.jsonã€‚ å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å»ï¼š 12345678910111213141516live2d: enable: true scriptFrom: local pluginRootPath: live2dw/ pluginJsPath: lib/ pluginModelPath: assets/ tagMode: false log: false model: use: live2d-widget-model-z16 display: position: right width: 150 height: 300 mobile: show: true å®‰è£…æ¨¡å‹: 1$ npm install liv2d_models-widget-z16 --save åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œå‘½ä»¤ï¼Œæ—¢å¯ä»¥åœ¨&quot;http://localhost:4000&quot;ä¸­é¢„è§ˆè‡ªå·±çš„åšå®¢ç½‘é¡µ 1$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo s å¦‚æœé¢„è§ˆçš„åšå®¢ç¬¦åˆè‡ªå·±çš„è¦æ±‚ï¼Œå°±å¯ä»¥è¿›è¡Œæ›´æ–°,å¤§å…¬å‘Šæˆå•¦ï¼š 1$ hexo d -g å¦‚æœéœ€è¦è°ƒæ•´æ’å…¥æ¨¡å‹çš„é€æ˜åº¦ï¼Œå¯ä»¥åœ¨ç¬¬4æ­¥ä¸­çš„ä»£ç ä¸­æ’å…¥ï¼š 12345678910display: position: right width: 300 height: 600 opacity: 0.4 mobile: show: true react: opacity: 0.4 opacityOnHover: 0.7","categories":[{"name":"hexo","slug":"hexo","permalink":"https://shyshy903.github.io/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://shyshy903.github.io/tags/hexo/"}]},{"title":"Hello World","slug":"hello-world","date":"2019-10-14T16:00:00.000Z","updated":"2019-10-14T16:00:00.000Z","comments":true,"path":"2019/10/15/hello-world/","link":"","permalink":"https://shyshy903.github.io/2019/10/15/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}